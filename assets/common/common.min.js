class rEnum{constructor(){}static ENUM_START(t=0){rEnum._value=t;return rEnum._value}static get next(){return++rEnum._value}}rEnum._value=0;var ds;(function(t){class e{constructor(){this._map={};this._length=0}getValue(t){t=t.toString();return this._map[t]}get(t){return this.getValue(t)}put(t,e){t=t.toString();if(!this.containsKey(t)){this._length++}this._map[t]=e;return e}isEmpty(){return this._length==0}containsKey(t){t=t.toString();return t in this._map}remove(t){if(this.containsKey(t)){this._length--;var e=this.getValue(t);delete this._map[t];return e}return null}getKeys(){var t=[];for(var e in this._map){t.push(e)}return t}containsValue(t){for(var e in this._map){if(this._map[e]==t){return true}}return false}size(){return this._length}clear(){this._length=0;this._map={}}toString(){let t="HashMap Content:\n";for(var e in this._map){t+=e+" -> "+this._map[e]+"\n"}return t}_private_foreachKey(t,e){for(var i in this._map){e.call(t,i)}}_private_foreachValue(t,e){for(var i in this._map){var r=this.getValue(i);e.call(t,r)}}}t.StringMap=e})(ds||(ds={}));var ds;(function(t){class e{constructor(){this._keys=[];this._values=[]}get length(){return this._keys.length}isEmpty(){return this._keys.length==0}keys(){return this._keys}getValues(){return this._values}containsValue(t){return this._values.indexOf(t)!=-1}containsKey(t){return this._keys.indexOf(t)!=-1}getValue(t){let e=this._keys.indexOf(t);if(e==-1){return null}return this._values[e]}key(t){let e=this._values.indexOf(t);if(e==-1){return null}return this._keys[e]}add(t,e){let i=this._keys.indexOf(t);if(i!=-1){var r=this._values[i];this._values[i]=e;return r}this._keys.push(t);this._values.push(e);return null}remove(t){let e=this._keys.length;for(let i=e-1;i>=0;i--){if(this._keys[i]==t){let t=this._values[i];this._keys.splice(i,1);this._values.splice(i,1);return t}}return null}clear(){this._keys.length=0;this._values.length=0}clone(){let t=new e;t._keys=this._keys.concat();t._values=this._values.concat();return t}toString(){let t="HashMap Content:\n";for(let e=0;e<this._keys.length;++e){t+=this._keys[e]+" -> "+this._values[e]+"\n"}return t}}t.HashMap=e})(ds||(ds={}));var fly;(function(t){var e;(function(t){class e{constructor(){this._count=0;this.destroyTm=0}addCount(t){this._count++}removeCount(t){this._count--}get count(){return this._count}destroy(){}}t.CountShareData=e})(e=t.vo||(t.vo={}))})(fly||(fly={}));var fly;(function(t){class e{constructor(){}static randomInt(t,e){return Math.round(t+Math.random()*(e-t))}static getDisSquare(t,e,i,r){return(t-i)*(t-i)+(e-r)*(e-r)}static getRotPoint(i,r,s){s=s*e.toRad;var n=new t.Point;n.x=Math.cos(s)*(i.x-r.x)-Math.sin(s)*(i.y-r.y)+r.x;n.y=Math.cos(s)*(i.y-r.y)+Math.sin(s)*(i.x-r.x)+r.y;return n}static getTowPointsAngle(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);if(i<0){i=i+2*Math.PI}return i*180/Math.PI}static getNearAngel(t,e=8){t=(t%360+360)%360;var i=360/e;var r=Math.floor(t/i);var s=r*i;var n=(r+1)*i;return(t-s<=n-t?s:n)%360}static getAnglePos(e,i,r){var s=new t.Point;var n=i/180*Math.PI;s.x=e.x+r*Math.cos(n);s.y=e.y+r*Math.sin(n);return s}static get2PosDisPos(t,i,r){var s=e.getTowPointsAngle(t,i);return e.getAnglePos(t,s,r)}static getSin(t){t=(t%360+360)%360;var i=t*16;return e.mathSinArray[i]}static getCos(t){t=(t%360+360)%360;var i=t*16;return e.mathCosArray[i]}static setupSinCos(){var t=0;var i=360<<4;for(var r=0;r<i;r++){var s=Math.PI*2*r/i;e.mathSinArray.push(Math.sin(s));e.mathCosArray.push(Math.cos(s))}}static distance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}}e.abs=Math.abs;e.sin=Math.sin;e.cos=Math.cos;e.sqrt=Math.sqrt;e.PI=Math.PI;e.toDeg=180/e.PI;e.toRad=e.PI/180;e.mathSinArray=new Array;e.mathCosArray=new Array;t.ZMath=e})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{constructor(){}static getAttrValue(t,e){if(e in t){return t[e].value}return""}static getAttrNumberValue(t,e){if(e in t){return t[e].value}return 0}}t.XmlUtil=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{constructor(){}static type(t){let e=t.split("?");e=e[0].split(".");let i=e[e.length-1];if(i==t){i="NoneType"}return i}static getPath(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""}static getFileName(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t}}t.URLUtils=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));var fly;(function(t){class e{constructor(){}static transTilePoint2ZonePoint(e){return new t.Point(e.x/t.SceneConfig.ZONE_SCALE_WIDTH|0,e.y/t.SceneConfig.ZONE_SCALE_HEIGHT|0)}static transTilePoint2PixelPoint(e){return new t.Point(e.x*t.SceneConfig.TILE_WIDTH,e.y*t.SceneConfig.TILE_HEIGHT)}static transPixelPoint2TilePoint(e){return new t.Point(e.x/t.SceneConfig.TILE_WIDTH|0,e.y/t.SceneConfig.TILE_HEIGHT|0)}static transZoneTilePoint2ZonePixelPoint(e){return new t.Point(e.x*t.SceneConfig.ZONE_WIDTH,e.y*t.SceneConfig.ZONE_HEIGHT)}static transLogicAngle2Angle(t,e=8){var i=360/e;return t*i%360+90}static transLogicAngle2Angle8(t){switch(t){case 0:return 90;case 1:return 135;case 2:return 180;case 3:return 225;case 4:return 270;case 5:return 315;case 6:return 0;case 7:return 45}return 0}}t.Transformer=e})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{static converDicKeyToArr(t){var e=new Array;var i;for(i in t){e.push(i)}return e}static converDicValueToArr(t){var e=new Array;var i;for(i in t){e.push(t[i])}return e}static converArrToDictionary(t,e){var i={};var r;for(r of t){if(r.hasOwnProperty(e)){i[r[e]]=r}}return i}static converArrToStringMap(t,e,i){i.clear();var r;for(r of t){if(r.hasOwnProperty(e)){i.put(r[e],r)}}}static createUniqIndexFromDic(t,i){return e.createUniqIndexFromObj(t,i)}static createUniqIndexFromArr(t,i){return e.createUniqIndexFromObj(t,i)}static createUniqIndexFromVec(t,i){return e.createUniqIndexFromObj(t,i)}static createUniqIndexFromObj(t,e){var i={};var r;for(r in t){var s=new Array;var n;for(n of e){s.push(r[n])}var a=s.join("_");var l=i[a];if(l==null){l=new Array;i[a]=l}l.push(r)}return i}}t.TemplateUtil=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));var StatusConvert;(function(t){function e(t,e,i){return t*1e5+e*1e3+i}t.getIdByNum=e})(StatusConvert||(StatusConvert={}));class RenderUnitCallBack{constructor(t,e,...i){this._thisArg=t;this._func=e;if(i&&i.length){this._args=[];var r=i;if(i[0]instanceof Array){r=i[0]}for(var s=0;s<r.length;s++){this._args.push(r[s])}}if(this._func==null){logE("CallBack--\x3e  func 为空")}}call(...t){var e=this.getCallBackArgs(t);return this._func.apply(this._thisArg,e)}getCallBackArgs(t){var e;if(this._args!=null){e=this._args.concat()}if(t&&t.length){e=e||[];for(var i=0;i<t.length;i++){e.push(t[i])}}return e}destroy(){this._thisArg=null;this._func=null;this._args=null}get caller(){return this._thisArg}get func(){return this._func}}var fly;(function(t){class e{static isNeedScaleX(e){if(t.GlobalConfig2D.IS_TWO_ANGLE){return e>0&&e<=5}else{return e>=1&&e<=3}}static getAngleScaleX(t){var i=1;if(e.isNeedScaleX(t)){i=-1}return i}static getResourceKey(t,e,i){var r=e;return t+"_"+r+"_"+i}}t.RenderItemAngleUtil=e})(fly||(fly={}));var common;(function(t){class e{constructor(){this.pid=0;this.gpid=0;this.isFree=true;this.poolName="";this.uniqID=""}}t.PoolSign=e})(common||(common={}));var common;(function(t){class e{static setup(){e.poolMap=new ds.StringMap}static createPool(e){var i=this.getPool(e);if(i==null){i=new t.Pool(e);this.poolMap.put(e.poolname,i)}return i}static getPool(t){return this.getPoolByName(t.poolname)}static getFreeCnt(t){var e=this.getPool(t);if(e){return e.getFreeCnt()}else{throw new Error("请先初始化"+t.poolname)}}static getAllCnt(t){var e=this.getPool(t);if(e){return e.getAllCnt()}else{throw new Error("请先初始化"+t.poolname)}}static getItem(t){var e=this.getPool(t);if(e){return e.create()}else{throw new Error("请先初始化"+t.poolname)}}static getPoolByName(t){return this.poolMap.get(t)}static releaseItem(t){var e=this.getPoolByName(t.poolSign.poolName);if(e){return e.releaseItem(t)}else{throw new Error("请先初始化"+t.poolSign.poolName)}}static destoryItem(t){var e=this.getPoolByName(t.poolSign.poolName);if(e){return e.destoryItem(t)}else{throw new Error("请先初始化"+t.poolSign.poolName)}}static dispose(t){var e=this.getPool(t);if(e){e.dispose();this.poolMap.remove(t.poolname)}}}e.poolMap=new ds.StringMap;t.PoolMgr=e})(common||(common={}));var common;(function(t){class e{constructor(t,i,r=500){this._gpid=0;this._poolname=t;this._poolCls=i;this._maxSize=r;this._gpid=e._g_poolId++}get maxSize(){return this._maxSize}get poolname(){return this._poolname}get poolCls(){return this._poolCls}get gpid(){return this._gpid}}e._g_poolId=0;t.PoolInfo=e})(common||(common={}));var common;(function(t){class e{constructor(t){this._disposed=false;this._freeArr=[];this._pid=0;this._poolInfo=t;this._allMap=new ds.StringMap;this._inUseMap=new ds.StringMap}getFreeCnt(){return this._freeArr.length}getAllCnt(){return this._allMap.size()}create(){var t;if(this._freeArr.length){t=this._freeArr.pop()}else{t=new this._poolInfo.poolCls;t.poolSign.pid=this._pid++;t.poolSign.gpid=this._poolInfo.gpid;t.poolSign.poolName=this._poolInfo.poolname;t.poolSign.uniqID=this._poolInfo.gpid+"_"+t.poolSign.pid;this._allMap.put(t.poolSign.pid,t)}t.poolSign.isFree=false;this._inUseMap.put(t.poolSign.pid,t);return t}releaseItem(t){if(t.poolSign.isFree){logE("重复释放是干啥");return}t.poolSign.isFree=true;if(this._allMap.size()>this._poolInfo.maxSize){this.destoryItem(t)}else{t.release();this._freeArr.push(t);this._inUseMap.remove(t.poolSign.pid)}}destoryItem(t){t.dispose();this._inUseMap.remove(t.poolSign.pid);this._allMap.remove(t.poolSign.pid)}destoyAll(){var t=this._allMap.getKeys();for(let e=0;e<t.length;e++){const i=t[e];this.destoryItem(this._allMap.get(i))}}dispose(){this._disposed=true;this.destoyAll()}isAllFee(){return this._inUseMap.size()==0}}t.Pool=e})(common||(common={}));var fly;(function(t){class e{static construct(t,e){if(!e){return new t}switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);case 11:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]);case 12:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11]);case 13:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]);case 14:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13]);case 15:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14]);default:return}}}t.ClassConstruct=e})(fly||(fly={}));var fly;(function(t){class e{constructor(){this._blackListMap=new ds.StringMap}static get ins(){if(this._ins==null){this._ins=new e}return this._ins}getIs404Error(t,e=3){var i=this._blackListMap[t]||0;return i>e}addLoadUrl(t){var e=this._blackListMap.getValue(t)||0;e++;this._blackListMap.put(t,e)}removeLoadUrl(t){this._blackListMap.remove(t)}}t.LoadBlackListUtils=e})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i{constructor(){let t=Laya.Browser.pixelRatio;this._fontSize=12*t;this._minFPS=0;this._maxFPS=0;this._avgFPS=0;this._canvas=new Laya.HTMLCanvas(true);this._infos=[];this._context=this._canvas.getContext("2d");this._context.textBaseline="top";this._context.font=this._fontSize+"px Monaco";this.addInfo("Laya.Context","pContext","white");this.addInfo("PixelRatio","pPixelRatio","white");this.addInfo("FPS","pFps","white");this.addInfo("Frames","pFrame","white");this.addInfo("Laya.Sprite","pSprite","white");this.addInfo("Drawcall","pDrawcall","white");this.addInfo("GPUMem","pGPUMem","white");this.addInfo("Laya.Texture","pTexture","white");this.addInfo("GPUParam","pGPUParam","white");this.addInfo("Triangles","pTriangles","white");this.addInfo("Loader","pDownload0","white");this.addInfo("Net","pDownload1","white");this.addInfo("MapZone","mapZone","white");this.addInfo("RenderUnit","renderUnit","white");for(let t=0;t<this._infos.length;++t){this._infos[t].x=4;this._infos[t].y=t*this._fontSize+this._fontSize}this._height=this._infos.length*this._fontSize+3*t+4;this._width=t*250;this._vx=t*75;this._canvas.size(this._width,this._height);this.pContext="WebGL";this.pPixelRatio=t}addInfo(t,e,i){let r={title:t,value:e,color:i,units:"",x:0,y:0};this._infos.push(r)}static get instance(){if(!i._instance){i._instance=new i}return i._instance}static show(t=0,e=0){i.instance.innerShow(t,e);i._isShowing=true}static hide(){i.instance.innerHide();i._isShowing=false}setPosition(t,e){let i="";i+="pointer-events:none;";i+="background:rgba(33,33,33,0.8);";i+="z-index:100000;";i+="position: absolute;";i+="direction:ltr;";i+="left:"+t+"px;top:"+e+"px;";i+="width:"+this._width/this.pPixelRatio+"px;height:"+this._height/this.pPixelRatio+"px;";this._canvas.source.style.cssText=i}innerShow(t,e){this._minFPS=60;this._maxFPS=60;this._avgFPS=60;this._count=0;this._time0=Laya.Browser.now();this._time1=this._time0;this.pFrame=0;this.setPosition(t,e);Tick.addTick("enginestatue",this,this.loop);if(isLaya){Laya.Browser.container.appendChild(this._canvas.source)}else{}}static get isShowing(){return i._isShowing}innerHide(){Laya.timer.clear(this,this.loop);Laya.Browser.removeElement(this._canvas.source)}loop(e){this._count+=1;this.pFrame+=1;let i=Tick.time;this.pCanvas=Math.round(Laya.Stat.canvasReCache)+"/"+Math.round(Laya.Stat.canvasNormal)+"/"+Math.round(Laya.Stat.canvasBitmap);this.pDownload0=t.loader.MultiUrlLoadManager.failedCount+"x | "+t.loader.MultiUrlLoadManager.interruptCount+"! | "+t.loader.MultiUrlLoadManager.loadedTotalCount+" | T: "+t.loader.MultiUrlLoadManager.idleCount+" | "+t.loader.MultiUrlLoadManager.maxQueueSize;this.pDownload1=Math.round(t.loader.MultiUrlLoadManager.networkSpeed*100)/100+"MB/S"+" | "+Math.round(t.loader.MultiUrlLoadManager.loadedTotalBytes*100)/100+"MB";this.pDrawcall=0;this.pFps=""+this._avgFPS+" | "+this._minFPS+" | "+this._maxFPS;this.pGPUMem="0";this.pGPUParam=Math.round(Laya.Stat.shaderCall)+" | "+Math.round(Laya.Stat.shaderCall);this.pSprite=Math.round(Laya.Stat.spriteCount);this.pTriangles=Math.round(Laya.Stat.trianglesFaces);this._context.clearRect(0,0,this._width,this._height);for(let t=0;t<this._infos.length;++t){let e=this._infos[t];this._context.font=this._fontSize+"px Monaco";this._context.fillStyle=e.color;this._context.fillText(e.title,e.x,e.y,null,null,null);this._context.fillText(this[e.value],e.x+this._vx,e.y,null,null,null)}if(i-this._time0>1e3){this._avgFPS=this._count;this._time0=i;this._count=0}this._minFPS=Math.min(this._minFPS,this._avgFPS);this._maxFPS=Math.max(this._maxFPS,this._avgFPS);if(i-this._time1>1e3*60){this._minFPS=120;this._maxFPS=0;this._time1=i}Laya.Stat.clear()}}i._isShowing=false;e.EngineStatus=i})(e=t.utils||(t.utils={}))})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{static removeForParent(t){if(t==null||t.parent==null){return}t.parent.removeChild(t)}static removeAllChild(t,e=false){if(t){var i=null;while(t.numChildren>0){i=t.removeChildAt(0);if(e&&i){i.dispose()}}}}}t.DisplayUtil=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));var fly;(function(t){class e{constructor(){this._delayIdCursor=0;this._delayPool=[];this._callerKeyInfoPool=[];this._delayFuncDic=new ds.StringMap;this._callerFuncMap=new ds.HashMap;this._currentDelayNum=0;this._isRunIng=false;this._delatIdToFuncMapping={};this._currentTime=0;this._preTime=0}createDelayKey(t,e){var i=this._callerFuncMap.getValue(e);if(!i){if(this._callerKeyInfoPool.length>0){i=this._callerKeyInfoPool.pop()}else{i=new CallerKeyInfo}i.func=e}var r=i.getCallerKey(t);if(r>0){return r}i.addCaller(t);return i.getCallerKey(t)}getDelayKey(t,e){var i=this._callerFuncMap.getValue(e);if(!i){return 0}return i.getCallerKey(t)}removeDelayKey(t,e){var i=this._callerFuncMap.getValue(e);if(!i){return}i.removeCaller(t);if(i.isEmpty()){this._callerFuncMap.remove(e);i.reset();this._callerKeyInfoPool.push(i)}}addDelayCall(t,e,i,r=null){if(t<=0){i.apply(e,r);return 0}this._delayIdCursor++;var s=this.createDelayKey(e,i);var n=this._delayFuncDic[s];if(n==null){n=this.createDelyInfo(e,i,s);if(this._firstNode==null){this._firstNode=n}else{n.next=this._firstNode;this._firstNode.pre=n;this._firstNode=n}}else{}var a=this._delayIdCursor;this.addCallToInfo(n,a,this._currentTime+t,r);this.addDelyNum(1);this._delatIdToFuncMapping[a]=s;this.setRunStat();return a}removeDelayCall(t,e=false){var i=this._delatIdToFuncMapping[t];if(i){var r=this.getDelayInfo(i);if(r){var s=this.removeCall(r,t);if(s!=null){this.subDelyNum(1);if(e){r.func.apply(r.caller,s.callParams)}}if(r.isEmpty()){this.removeEmptyDelayInfo(r)}}delete this._delatIdToFuncMapping[t];this.setRunStat()}}subDelyNum(t){if(t==0){return}this._currentDelayNum-=t;if(this._currentDelayNum<0){logE("currentDelayNum = "+this._currentDelayNum)}}addDelyNum(t){if(t==0){return}this._currentDelayNum+=t}removeDelayCallByFunction(t,e){var i=this.getDelayKey(t,e);var r=this.getDelayInfo(i);if(r){var s=r.callParamerList;var n=s.length;var a=0;for(let t of s){a=t["delayId"];delete this._delatIdToFuncMapping[a]}this.subDelyNum(n);this.removeEmptyDelayInfo(r)}this.setRunStat()}run(e){var i=t.GlobalConfig2D.nowTime;e=i-this._preTime;this._preTime=i;this._currentTime+=e;var r=this._firstNode;var s;var n=0;while(r!=null){n++;var a=this.delayRun(r,this._currentTime);if(a!=null){var l=0;var o=a.length;for(var h=0;h<o;h++){var u=a[n];if(this._delatIdToFuncMapping[u]!=null){l++}}this.subDelyNum(l)}s=r;r=r.next;if(s.isEmpty()){this.removeEmptyDelayInfo(s)}}this.setRunStat()}removeEmptyDelayInfo(t){var e=this._delayPool.indexOf(t);if(e!=-1){return}if(t==this._firstNode){if(t.next!=null){t.next.pre=null;this._firstNode=t.next}else{this._firstNode=null}}else{if(t.next!=null){t.pre.next=t.next;t.next.pre=t.pre}else{if(t.pre){t.pre.next=null}else{logI(t.pre,"delayInfo.pre-> this.removeEmptyDelayInfo()")}}}var i=this.getDelayKey(t.caller,t.func);delete this._delayFuncDic[i];this.removeDelayKey(t.caller,t.func);t.clear();this._delayPool.push(t)}getDelayInfo(t){return this._delayFuncDic[t]}setRunStat(){if(this._isRunIng){if(this._currentDelayNum<=0){Tick.removeTick("delaycall");this._isRunIng=false}}else{if(this._currentDelayNum>0){this._preTime=Tick.time;logI("delay start +++++");Tick.addTick("delaycall",this,this.run);this._isRunIng=true}}}createDelyInfo(e,i,r){var s;if(this._delayPool.length){s=this._delayPool.pop()}else{s=new t.DelyInfo}s.func=i;s.caller=e;this._delayFuncDic[r]=s;return s}removeCall(t,e){var i=t.callParamerList;var r=i.length;for(var s=0;s<r;s++){var n=i[s];if(n.outKey==e){return i.splice(s,1)[0]}}return null}addCallToInfo(t,e,i,r){t.callParamerList.push({outKey:e,callTime:i,callParams:r})}delayRun(t,e){var i=0;var r=t.callParamerList;var s=r.length;if(s<=0){return null}var n=[];for(var a=s-1;a>=0;a--){var l=r[a];if(l){if(l.callTime<=e){t.func.apply(t.caller,l.callParams);var o=r.splice(a,1);delete this._delatIdToFuncMapping[l.outKey];n.push(l.outKey)}}else{logI("延迟调用，obj为空，")}}return n}}})(fly||(fly={}));var fly;(function(t){class e{constructor(){this.callParamerList=[]}isEmpty(){return this.callParamerList.length==0}clear(){this.caller=null;this.func=null;this.callParamerList.length=0;this.pre=null;this.next=null}}t.DelyInfo=e})(fly||(fly={}));var fly;(function(t){class e{constructor(){this._id=0;this._isRunning=false;e._index++;this._tickname="fly.DelayCall_"+e._index;this._map=new ds.StringMap;this._keyArr=[]}add(e,i,r,...s){this._id++;var n=Tick.time+e;var a=new t.DelayCallInfo(n,i,r,s);this._map.put(this._id,a);this.updateRunStat();this.updateKey();return this._id}remove(t,e=false){var i=this._map.get(t);if(i!=null){this._map.remove(t);if(e&&i.isCalled==false){i.call()}this.updateKey();this.updateRunStat()}}updateRunStat(){if(this._map.size()>0){if(!this._isRunning){Tick.addTick(this._tickname,this,this.tick);this._isRunning=true}}else{this._isRunning=false;Tick.removeTick(this._tickname)}}updateKey(){this._keyArr.length=0;this._map._private_foreachKey(this,this.doUpdateKey)}doUpdateKey(t){this._keyArr.push(t)}tick(t){var e=this._keyArr.length;var i=Tick.time;var r=false;for(var s=0;s<e;s++){var n=this._keyArr[s];var a=this._map.get(n);if(a.callTime<=i){if(!a.isCalled){a.call()}this._map.remove(n);r=true}}this.updateRunStat();if(r){this.updateKey()}}}e._index=0;t.DelayCall=e})(fly||(fly={}));class CallerKeyInfo{constructor(){this._callerList=[];this._calllerIdList=[];this.reset()}reset(){this._callerList.length=0;this._calllerIdList.length=0;this.func=null}addCaller(t){this._callerList.push(t);this._calllerIdList.push(++CallerKeyInfo.COUNT)}removeCaller(t){var e=this._callerList.indexOf(t);if(e>-1){this._callerList.splice(e,1);this._calllerIdList.splice(e,1)}}isEmpty(){return this._callerList.length==0}getCallerKey(t){var e=this._callerList.indexOf(t);if(e==-1){return 0}return this._calllerIdList[e]}}CallerKeyInfo.COUNT=0;CallerKeyInfo.CALLER_COUNT=0;var fly;(function(t){var e;(function(t){class e{constructor(t){this._destroyDelay=0;this._count=0;this.count=0;this._destroyDelay=t;this._shareDataDict={};this._waitingDestroyShareDataDict={}}startCount(){}stopCount(){}hasShareData(t){return this._shareDataDict[t]!=null}getShareData(t){var e=this._shareDataDict[t];return e}addShareData(t,e){var i=this.getShareData(t);if(i){i.destroy();i=null}this._shareDataDict[t]=e;this._count++}removeShareData(t){var e=this.getShareData(t);if(e!=null){e.destroy();e=null;this._count--}delete this._shareDataDict[t];delete this._waitingDestroyShareDataDict[t]}installShareData(t,e){var i=this._shareDataDict[t];i.addCount(e);if(this._waitingDestroyShareDataDict[t]==null){delete this._waitingDestroyShareDataDict[t]}return i}uninstallShareData(t,e){var i=this._shareDataDict[t];if(i){i.removeCount(e);if(i.count<=0){if(this._waitingDestroyShareDataDict[t]==null){this._waitingDestroyShareDataDict[t]=getTimer()}}}}checkUninstall(){if(++this.count<700){return}this.count%=700;var t=getTimer();var e=0;var i;for(var r in this._waitingDestroyShareDataDict){e++;var s=t-this._waitingDestroyShareDataDict[r]-this._destroyDelay;if(s>0){delete this._waitingDestroyShareDataDict[r];i=this.getShareData(r);if(i){if(i.count<=0&&s-i.destroyTm>0){this.removeShareData(r)}}}}}uninstallAll(){for(var t in this._shareDataDict){this.removeShareData(t)}this._shareDataDict={};this._waitingDestroyShareDataDict={}}uninstallAllWait(){var t;for(t in this._waitingDestroyShareDataDict){this.removeShareData(t)}}get cacheCnt(){return this._count}getAllCacheKeyList(){var t=new Array;var e;for(e in this._shareDataDict){t.push(e)}return t}getAllCacheDataList(){var t=new Array;var e;for(var i in this._shareDataDict){e=this._shareDataDict[i];t.push(e)}return t}}t.CountShare=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));var CONST_INT;(function(t){t[t["MIN_VALUE"]=-1e8]="MIN_VALUE";t[t["MAX_VALUE"]=1e8]="MAX_VALUE"})(CONST_INT||(CONST_INT={}));class ResourceGroup{}ResourceGroup.MAP_ZONE="MAP_ZONE";ResourceGroup.AVATAER="AVATAER";ResourceGroup.AVATAER_EFFECT="AVATAER_EFFECT";ResourceGroup.ICON_IMAGE="ICON_IMAGE";ResourceGroup.IMAGE="IMAGE";var fly;(function(t){var e;(function(t){class e{constructor(){}static regClass(t,i){e._classMap[t]=i;if(isLaya){Laya.ClassUtils.regClass(t,i)}}static getRegClass(t){if(isLaya){return Laya.ClassUtils.getClass(t)}else{return e._classMap[t]}}}e._temParam=[];e._classMap={};t.ClassUtils=e})(e=t.utils||(t.utils={}))})(fly||(fly={}));class CallBack{constructor(t,e,...i){this._thisArg=t;this._func=e;this._args=i;if(this._func==null){logE("CallBack--\x3e  func 为空")}}call(...t){var e=this.getCallBackArgs(t);return this._func.apply(this._thisArg,e)}getCallBackArgs(t){var e;if(this._args!=null){e=this._args}if(t&&t.length){e=e||[];for(var i=0;i<t.length;i++){e.push(t[i])}}return e}destroy(){this._thisArg=null;this._func=null;this._args=null}get caller(){return this._thisArg}get func(){return this._func}}function arrayBuffToString(t){var e=new fly.net.ByteArray;e.endian=fly.net.ByteArray.BIG_ENDIAN;e.writeArrayBuffer(t);e.position=0;var i=e.readMultiByte(e.bytesAvailable,"utf-8");return i}var isLaya=true;var logLevel=0;function logI(...t){if(logLevel<=fly.enums.LogLevel.INF){var e=new Error("111");var i=e.stack;var r=i.split("\n");var s=r[2];var n=s.split("(");console.log("INFO:【"+n[0].trim()+"】 "+" : "+t.join(","))}}function logW(...t){if(logLevel<=fly.enums.LogLevel.WAR){var e=new Error("111");var i=e.stack;var r=i.split("\n");var s=r[2];var n=s.split("(");console.warn("WAR :【"+n[0].trim()+"】 "+" : "+t.join(","),false)}}function logE(...t){if(logLevel<=fly.enums.LogLevel.ERR){var e=new Error("111");var i=e.stack;var r=i.split("\n");var s=r[2];var n=s.split("(");console.error("ERR :【"+n[0].trim()+"】 "+" : "+t.join(","))}}function logD(...t){if(logLevel<=fly.enums.LogLevel.DEBUG){var e=new Error("111");var i=e.stack;var r=i.split("\n");var s=r[2];var n=s.split("(");console.log("DEB :【"+n[0].trim()+"】 "+" : "+t.join(","))}}function getTimer(){return(new Date).getTime()}function getRequestAnimationFrame(){var t;if(window.hasOwnProperty("requestAnimationFrame")){t=window.requestAnimationFrame}else if(window.hasOwnProperty("webkitRequestAnimationFrame")){t=window.webkitRequestAnimationFrame}else if(window.hasOwnProperty("mozRequestAnimationFrame")){t=window["mozRequestAnimationFrame"]}else if(window.hasOwnProperty("oRequestAnimationFrame")){t=window["oRequestAnimationFrame"]}else if(window.hasOwnProperty("msRequestAnimationFrame")){t=window["msRequestAnimationFrame"]}else{t=function(t){return window.setTimeout(t,1e3/60)}}return t}var animationFrame=getRequestAnimationFrame();class Tick{constructor(){}static setup(){this._loopMap=new ds.StringMap;animationFrame(this.loop)}static loop(t){Tick._gapTime=t-Tick._preTime;Tick._loopMap._private_foreachValue(this,Tick.run);animationFrame(Tick.loop);Tick._preTime=t}static get time(){return this._preTime}static run(t){var e=Tick._gapTime;t.call(e)}static addTick(t,e,i,...r){if(this._loopMap.containsKey(t)){logE("重复的loop："+t);throw new Error("重复的loop："+t)}var s=new RenderUnitCallBack(e,i,r);this._loopMap.put(t,s)}static removeTick(t){this._loopMap.remove(t)}}Tick._preTime=0;Tick._gapTime=0;var fly;(function(t){var e;(function(t){class e{constructor(){}parse(t,e,i){if(isLaya){this.setLaya(t,e,i)}else{}}setLaya(t,e,i){}get width(){if(isLaya){return this._texture.width}else{return this._texture.textureWidth}}get height(){if(isLaya){return this._texture.height}else{return this._texture.textureHeight}}getLayaTexture(){return this._texture}}t.SubTexture=e})(e=t.renders||(t.renders={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i{constructor(){this.classDic={};this._length=0;this._objectEncoding_=0;this._position_=0;this._allocated_=8;this._littleEndian_=false;this.___resizeBuffer(this._allocated_)}clear(){this._strTable=[];this._objTable=[];this._traitsTable=[];this._position_=0;this.length=0}ensureWrite(t){if(this._length<t){this.length=t}}readBoolean(){return this.readByte()!=0}readBytes(t,e=0,i=0){if(e<0||i<0){throw new Error("Read error - Out of bounds"+this.length)}if(i==0){i=this._length-this._position_}t.ensureWrite(e+i);t._byteView_.set(this._byteView_.subarray(this._position_,this._position_+i),e);t.pos=e;this._position_+=i;if(t.pos+i>t.length){t.length=t.pos+i}}readDouble(){var t=this._data_.getFloat64(this._position_,this._littleEndian_);this._position_+=8;return t}readFloat(){var t=this._data_.getFloat32(this._position_,this._littleEndian_);this._position_+=4;return t}readFullBytes(t,e,i){this.ensureWrite(i);for(var r=e;r<e+i;r++){this._data_.setInt8(this._position_++,t.get(r))}}readInt(){var t=this._data_.getInt32(this._position_,this._littleEndian_);this._position_+=4;return t}readShort(){var t=this._data_.getInt16(this._position_,this._littleEndian_);this._position_+=2;return t}readUnsignedByte(){return this._data_.getUint8(this._position_++)}readByte(){return this._data_.getInt8(this._position_++)}readUnsignedInt(){var t=this._data_.getUint32(this._position_,this._littleEndian_);this._position_+=4;return Number(t)}readUnsignedShort(){var t=this._data_.getUint16(this._position_,this._littleEndian_);this._position_+=2;return t}readUTF(){return this.readUTFBytes(this.readUnsignedShort())}readUnicode(t){var e="";var i=this._position_+t;var r,s=0;while(this._position_<i){s=this._byteView_[this._position_++];r=this._byteView_[this._position_++];e+=String.fromCharCode(r<<8|s)}return e}readMultiByte(t,e){if(e=="UNICODE"||e=="unicode"){return this.readUnicode(t)}return this.readUTFBytes(t)}readUTFBytes(t=-1){var e="";var i=this._position_+t;var r,s,n=0;while(this._position_<i){r=this._data_.getUint8(this._position_++);if(r<128){if(r!=0){e+=String.fromCharCode(r)}}else if(r<224){e+=String.fromCharCode((r&63)<<6|this._data_.getUint8(this._position_++)&127)}else if(r<240){s=this._data_.getUint8(this._position_++);e+=String.fromCharCode((r&31)<<12|(s&127)<<6|this._data_.getUint8(this._position_++)&127)}else{s=this._data_.getUint8(this._position_++);n=this._data_.getUint8(this._position_++);e+=String.fromCharCode((r&15)<<18|(s&127)<<12|n<<6&127|this._data_.getUint8(this._position_++)&127)}}return e}toString(){var t=this._position_;this._position_=0;var e=this.readUTFBytes(this.length);this._position_=t;return e}writeBoolean(t){this.writeByte(t?1:0)}writeByte(t){this.ensureWrite(this._position_+1);this._data_.setInt8(this._position_,t);this._position_+=1}writeBytes(t,e=0,i=0){if(e<0||i<0){throw"writeBytes error - Out of bounds"}if(i==0){i=t.length-e}this.ensureWrite(this._position_+i);this._byteView_.set(t._byteView_.subarray(e,e+i),this._position_);this._position_+=i}writeArrayBuffer(t,e=0,i=0){if(e<0||i<0){throw"writeArrayBuffer error - Out of bounds"}if(i==0){i=t.byteLength-e}this.ensureWrite(this._position_+i);var r=new Uint8Array(t);this._byteView_.set(r.subarray(e,e+i),this._position_);this._position_+=i}writeDouble(t){this.ensureWrite(this._position_+8);this._data_.setFloat64(this._position_,t,this._littleEndian_);this._position_+=8}writeFloat(t){this.ensureWrite(this._position_+4);this._data_.setFloat32(this._position_,t,this._littleEndian_);this._position_+=4}writeInt(t){this.ensureWrite(this._position_+4);this._data_.setInt32(this._position_,t,this._littleEndian_);this._position_+=4}writeShort(t){this.ensureWrite(this._position_+2);this._data_.setInt16(this._position_,t,this._littleEndian_);this._position_+=2}writeUnsignedInt(t){this.ensureWrite(this._position_+4);this._data_.setUint32(this._position_,t,this._littleEndian_);this._position_+=4}writeUnsignedShort(t){this.ensureWrite(this._position_+2);this._data_.setUint16(this._position_,t,this._littleEndian_);this._position_+=2}writeUTF(t){t=t+"";this.writeUnsignedShort(this._getUTFBytesCount(t));this.writeUTFBytes(t)}writeUnicode(t){t=t+"";this.ensureWrite(this._position_+t.length*2);var e=0;for(var i=0,r=t.length;i<r;i++){e=t.charCodeAt(i);this._byteView_[this._position_++]=e&255;this._byteView_[this._position_++]=e>>8}}writeMultiByte(t,e){t=t+"";if(e=="UNICODE"||e=="unicode"){return this.writeUnicode(t)}this.writeUTFBytes(t)}writeUTFBytes(t){t=t+"";this.ensureWrite(this._position_+t.length*4);for(var e=0,i=t.length;e<i;e++){var r=t.charCodeAt(e);if(r<=127){this.writeByte(r)}else if(r<=2047){this.writeByte(192|r>>6);this.writeByte(128|r&63)}else if(r<=65535){this.writeByte(224|r>>12);this.writeByte(128|r>>6&63);this.writeByte(128|r&63)}else{this.writeByte(240|r>>18);this.writeByte(128|r>>12&63);this.writeByte(128|r>>6&63);this.writeByte(128|r&63)}}this.length=this._position_}__fromBytes(t){this._byteView_=new Uint8Array(t.getData());this.length=this._byteView_.length;this._allocated_=this.length}__get(t){return this._data_.getUint8(t)}_getUTFBytesCount(t){var e=0;t=t+"";for(var i=0,r=t.length;i<r;i++){var s=t.charCodeAt(i);if(s<=127){e+=1}else if(s<=2047){e+=2}else if(s<=65535){e+=3}else{e+=4}}return e}_byteAt_(t){return this._byteView_[t]}_byteSet_(t,e){this.ensureWrite(t+1);this._byteView_[t]=e}uncompress(t="zlib"){var e=new Zlib.Inflate(this._byteView_);this._byteView_=e.decompress();this._data_=new DataView(this._byteView_.buffer);this._allocated_=this._length=this._byteView_.byteLength;this._position_=0}compress(t="zlib"){var e=new Zlib.Deflate(this._byteView_);this._byteView_=e.compress();this._data_=new DataView(this._byteView_.buffer);this._position_=this._allocated_=this._length=this._byteView_.byteLength}___resizeBuffer(t){try{var e=new Uint8Array(t);if(this._byteView_!=null){if(this._byteView_.length<=t){e.set(this._byteView_)}else{e.set(this._byteView_.subarray(0,t))}}this._byteView_=e;this._data_=new DataView(e.buffer)}catch(e){throw"___resizeBuffer err:"+t}}__getBuffer(){return this._data_.buffer}__set(t,e){this._data_.setUint8(t,e)}static __ofBuffer(t){var e=new i;e.length=e.allocated=t.byteLength;e.data=new DataView(t);e.byteView=new Uint8Array(t);return e}setUint8Array(t){this._byteView_=t;this._data_=new DataView(t.buffer);this._length=t.byteLength;this._position_=0}getUint8Array(){return this._byteView_}get bytesAvailable(){return this.length-this._position_}get endian(){return this._littleEndian_?i.LITTLE_ENDIAN:i.BIG_ENDIAN}set endian(t){this._littleEndian_=t==i.LITTLE_ENDIAN}set length(t){this.___resizeBuffer(this._allocated_=t);this._length=t}get length(){return this._length}get position(){return this.pos}set position(t){this.pos=t}get pos(){return this._position_}set pos(t){if(t<this._length){this._position_=t<0?0:t}else{this._position_=t;this.length=t}}readObject(){this._strTable=[];this._objTable=[];this._traitsTable=[];return this.readObject2()}readObject2(){var t=this.readByte();return this.readObjectValue(t)}readObjectValue(t){var e;switch(t){case i.NULL_TYPE:break;case i.STRING_TYPE:e=this.__readString();break;case i.INTEGER_TYPE:e=this.readInterger();break;case i.FALSE_TYPE:e=false;break;case i.TRUE_TYPE:e=true;break;case i.OBJECT_TYPE:e=this.readScriptObject();break;case i.ARRAY_TYPE:e=this.readArray();break;case i.DOUBLE_TYPE:e=this.readDouble();break;case i.BYTEARRAY_TYPE:e=this.readByteArray();break;default:}return e}readByteArray(){var t=this.readUInt29();if((t&1)==0){return this.getObjRef(t>>1)}else{var e=t>>1;var r=new i;this._objTable.push(r);this.readBytes(r,0,e);return r}}readInterger(){var t=this.readUInt29();t=t<<3>>3;return parseInt(t+"")}getStrRef(t){return this._strTable[t]}getObjRef(t){return this._objTable[t]}__readString(){var t=this.readUInt29();if((t&1)==0){return this.getStrRef(t>>1)}var e=t>>1;if(e==0){return i.EMPTY_STRING}var r=this.readUTFBytes(e);this._strTable.push(r);return r}readTraits(t){var e;if((t&3)==1){e=this.getTraitReference(t>>2);return e.propoties?e:{obj:{}}}else{var i=(t&4)==4;var r=(t&8)==8;var s=t>>4;var n=this.__readString();e={};e.className=n;e.propoties=[];e.dynamic=r;e.externalizable=i;if(s>0){for(var a=0;a<s;a++){var l=this.__readString();e.propoties.push(l)}}this._traitsTable.push(e);return e}}readScriptObject(){var e=this.readUInt29();if((e&1)==0){return this.getObjRef(e>>1)}else{var i=this.readTraits(e);var r=i.className;var s=i.externalizable;var n;var a;var l=i.propoties;if(r&&r!=""){var o=t.utils.ClassUtils.getRegClass(r);if(o){n=new o}else{n={}}}else{n={}}this._objTable.push(n);if(l){for(var h=0;h<l.length;h++){n[l[h]]=this.readObject2()}}if(i.dynamic){for(;;){a=this.__readString();if(a==null||a.length==0){break}n[a]=this.readObject2()}}return n}}readArray(){var t=this.readUInt29();if((t&1)==0){return this.getObjRef(t>>1)}var e=null;var i=t>>1;var r;for(;;){r=this.__readString();if(r==null||r.length==0){break}if(e==null){e={};this._objTable.push(e)}e[r]=this.readObject2()}if(e==null){e=[];this._objTable.push(e);var s=0;for(s=0;s<i;s++){e.push(this.readObject2())}}else{for(s=0;s<i;s++){e[s.toString()]=this.readObject2()}}return e}readUInt29(){var t=0;var e=this.readByte()&255;if(e<128){return e}t=(e&127)<<7;e=this.readByte()&255;if(e<128){return t|e}t=(t|e&127)<<7;e=this.readByte()&255;if(e<128){return t|e}t=(t|e&127)<<8;e=this.readByte()&255;return t|e}writeObject(t){this._strTable=[];this._objTable=[];this._traitsTable=[];this.writeObject2(t)}writeObject2(t){if(t==null){this.writeAMFNull();return}var e=typeof t;if(e==="string"){this.writeAMFString(t)}else if(e==="boolean"){this.writeAMFBoolean(t)}else if(e==="number"){if(String(t).indexOf(".")!=-1){this.writeAMFDouble(t)}else{this.writeAMFInt(t)}}else if(e==="object"){if(t instanceof Array){this.writeArray(t)}else if(t instanceof i){this.writeAMFByteArray(t)}else{this.writeCustomObject(t)}}}writeAMFNull(){this.writeByte(i.NULL_TYPE)}writeAMFString(t){this.writeByte(i.STRING_TYPE);this.writeStringWithoutType(t)}writeStringWithoutType(t){if(t.length==0){this.writeUInt29(1);return}var e=this._strTable.indexOf(t);if(e>=0){this.writeUInt29(e<<1)}else{var i=this._getUTFBytesCount(t);this.writeUInt29(i<<1|1);this.writeUTFBytes(t);this._strTable.push(t)}}writeAMFInt(t){if(t>=i.INT28_MIN_VALUE&&t<=i.INT28_MAX_VALUE){t=t&i.UINT29_MASK;this.writeByte(i.INTEGER_TYPE);this.writeUInt29(t)}else{this.writeAMFDouble(t)}}writeAMFDouble(t){this.writeByte(i.DOUBLE_TYPE);this.writeDouble(t)}writeAMFBoolean(t){if(t){this.writeByte(i.TRUE_TYPE)}else{this.writeByte(i.FALSE_TYPE)}}writeCustomObject(t){this.writeByte(i.OBJECT_TYPE);var e=this._objTable.indexOf(t);if(e!=-1){this.writeUInt29(e<<1)}else{this._objTable.push(t);var r={};r.className=this.getAliasByObj(t);r.dynamic=false;r.externalizable=false;r.properties=[];for(var s in t){if(t[s]instanceof Function){continue}r.properties.push(s);r.properties.sort()}var n=i.getTraitsInfoRef(this._traitsTable,r);var a=r.properties.length;var l=0;if(n>=0){this.writeUInt29(n<<2|1)}else{this._traitsTable.push(r);this.writeUInt29(3|(r.externalizable?4:0)|(r.dynamic?8:0)|a<<4);this.writeStringWithoutType(r.className);for(l=0;l<a;l++){this.writeStringWithoutType(r.properties[l])}}for(l=0;l<a;l++){this.writeObject2(t[r.properties[l]])}}}static getTraitsInfoRef(t,e){var r,s=t.length;for(r=0;r<s;r++){if(i.equalsTraitsInfo(e,t[r])){return r}}return-1}static equalsTraitsInfo(t,e){if(t==e){return true}if(!t.className===e.className){return false}if(t.properties.length!=e.properties.length){return false}var i=t.properties.length;var r;t.properties.sort();e.properties.sort();for(var s=0;s<i;s++){if(t.properties[s]!=e.properties[s]){return false}}return true}getAliasByObj(t){return""}writeArray(t){this.writeByte(i.ARRAY_TYPE);var e=t.length;var r=this._objTable.indexOf(t);if(r>-1){this.writeUInt29(e<<1)}else{this.writeUInt29(e<<1|1);this.writeStringWithoutType(i.EMPTY_STRING);for(var s=0;s<e;s++){this.writeObject2(t[s])}this._objTable.push(t)}}writeAMFByteArray(t){this.writeByte(i.BYTEARRAY_TYPE);var e=this._objTable.indexOf(t);if(e>=0){this.writeUInt29(e<<1)}else{var r=t.length;this.writeUInt29(r<<1|1);this.writeBytes(t,0,r)}}writeMapAsECMAArray(t){this.writeByte(i.ARRAY_TYPE);this.writeUInt29(0<<1|1);var e,r;for(r in t){e++;this.writeStringWithoutType(r);this.writeObject2(t[r])}this.writeStringWithoutType(i.EMPTY_STRING)}writeUInt29(t){if(t<128){this.writeByte(t)}else if(t<16384){this.writeByte(t>>7&127|128);this.writeByte(t&127)}else if(t<2097152){this.writeByte(t>>14&127|128);this.writeByte(t>>7&127|128);this.writeByte(t&127)}else if(t<1073741824){this.writeByte(t>>22&127|128);this.writeByte(t>>15&127|128);this.writeByte(t>>8&127|128);this.writeByte(t&255)}else{}}getTraitReference(t){return this._traitsTable[t]}}i.BIG_ENDIAN="bigEndian";i.LITTLE_ENDIAN="littleEndian";i.UNDEFINED_TYPE=0;i.NULL_TYPE=1;i.FALSE_TYPE=2;i.TRUE_TYPE=3;i.INTEGER_TYPE=4;i.DOUBLE_TYPE=5;i.STRING_TYPE=6;i.XML_TYPE=7;i.DATE_TYPE=8;i.ARRAY_TYPE=9;i.OBJECT_TYPE=10;i.AVMPLUSXML_TYPE=11;i.BYTEARRAY_TYPE=12;i.EMPTY_STRING="";i.UINT29_MASK=536870911;i.INT28_MAX_VALUE=268435455;i.INT28_MIN_VALUE=-268435456;e.ByteArray=i})(e=t.net||(t.net={}))})(fly||(fly={}));var fly;(function(t){class e{constructor(){}setTo(t,e,i,r){this.x=t;this.y=e;this.width=i;this.height=r}clone(){var t=new e;t.x=this.x;t.y=this.y;t.width=this.width;t.height=this.height;return t}contains(t,e){logE("Rectangle--\x3econtains  未实现");return false}}t.Rectangle=e})(fly||(fly={}));var fly;(function(t){class e{constructor(t=0,e=0){}setTo(t=0,e=0){this.x=t;this.y=e}}t.Point=e})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{constructor(){}}e.TEXT="text";e.BINARY="arraybuffer";t.URLLoaderDataFormat=e})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){class e{constructor(){}static parse(t,i,r,s){e.loadBytes(i,r,s)}static loadBytes(t,e,i){var r={type:"application/octet-binary"};var s=[];var n;try{s[0]=t;n=new Blob(s,r)}catch(e){var a=window;a.BlobBuilder=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(e.name=="TypeError"&&a.BlobBuilder){var l=new a.BlobBuilder;l.append(t);n=l.getBlob("image/png")}}var o=URL.createObjectURL(n);if(isLaya){var h=Laya.HTMLImage.create(o);if(i!=null){}}else{}}}t.TextureParse=e})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i{constructor(){}static setup(t){this.getUrlWithVersion=t;this.waitingDict=new ds.StringMap;this.loadingDict=new ds.StringMap;this.multipleDict=new ds.StringMap;this.loadingQueue=[new e.MultiUrlLoader,new e.MultiUrlLoader,new e.MultiUrlLoader,new e.MultiUrlLoader,new e.MultiUrlLoader];this.waitingQueue=new Array;this._detailLoadedBytes=new ds.StringMap;this._detailLoadedCount=new ds.StringMap;this._detailLoadSpeed=new ds.StringMap}static loadByData(t){if(t==null||t.url==null){logW("加入了一个空的加载任务到加载队列。");return}if(i.inside(t.url)){i.addToMultipleQueue(t)}else{i.addToWaitingQueue(t);i.loadNext()}}static load(e,r=null,s=null,n=null,a=null,l=null,o=0){var h=new t.loader.MultiLoadData(e,r,s,n,a,l,o);i.loadByData(h)}static set enableInterrupt(t){i._enableInterrupt=t}static get enableInterrupt(){return i._enableInterrupt}static get maxQueueSize(){return i._maxQueueSize}static set maxQueueSize(t){if(t==i._maxQueueSize){return}if(t<1){t=1}let r=0;let s=0;let n=null;if(t>i._maxQueueSize){s=t-i._maxQueueSize;for(r=0;r<s;++r){i.loadingQueue.push(new e.MultiUrlLoader)}i.loadNext()}else{s=i._maxQueueSize-t;for(r=0;r<s;++r){n=i.loadingQueue.pop();if(!n.isLocked&&!n.isLoading){continue}i.interruptTask(n.rslLoadData)}}i._maxQueueSize=t;logW("MultiUrlLoadManager 改变加载队列长度:"+i._maxQueueSize)}static get detailLoadedCount(){return i._detailLoadedCount}static get detailLoadedBytes(){return i._detailLoadedBytes}static get loadedTotalCount(){return i._loadedTotalCount}static get idleCount(){let t=0;for(let e=0;e<i._maxQueueSize;++e){let r=i.loadingQueue[e];if(!r.isLocked&&!r.isLoading){t+=1}}return t}static get waitingCount(){return i.waitingQueue.length}static get loadedTotalBytes(){return i._loadedTotalBytes}static get networkSpeed(){return i._networkSpeed}static get interruptCount(){return i._interruptCount}static get failedCount(){return i._failedCount}static get loadedSucceedCount(){return i._loadedSucceedCount}static inside(t){if(t in i.loadingDict||t in i.waitingDict){return true}else{return false}}static interruptTask(t){i.cancelLoadingTask(t.url);i.addToWaitingQueue(t);i._interruptCount+=1;logW("MultiUrlLoadManager interrupt the loading task: "+t)}static cancelTask(t){if(!t||!t.url){return}if(!i.inside(t.url)){return}if(t.url in i.loadingDict){i.interruptTask(t);i.removeWaitingTask(t.url);i.loadNext()}else if(t.url in i.waitingDict){i.removeWaitingTask(t.url)}else if(t.url in i.multipleDict){i.removeMultipleTask(t.url)}}static cancelLoadingTask(t){if(!i.loadingDict[t]){return}let e=i.loadingDict[t];e.close();i.offLoaderEvents(e);delete i.loadingDict[t];delete i._detailLoadSpeed[t]}static removeWaitingTask(t){let e=i.waitingDict;let r=i.waitingQueue;if(!e[t]){return}delete e[t];for(let e=0;e<r.length;++e){let i=r[e];if(t==i.url){r.splice(e,1);break}}}static removeMultipleTask(t){if(!i.multipleDict[t]){return}let e=i.multipleDict[t];e.length=0;i.arrayPool.push(e);delete i.multipleDict[t]}static removeAllTask(t){i.cancelLoadingTask(t);i.removeWaitingTask(t);i.removeMultipleTask(t)}static addLoaderEvents(t){t.on(FlyEvent.COMPLETE,i,i.onLoadComplete,[t]);t.on(FlyEvent.PROGRESS,i,i.onLoadProgress,[t]);t.on(FlyEvent.ERROR,i,i.onLoadError,[t])}static offLoaderEvents(t){t.off(FlyEvent.COMPLETE,i,i.onLoadComplete);t.off(FlyEvent.PROGRESS,i,i.onLoadProgress);t.off(FlyEvent.ERROR,i,i.onLoadError)}static onLoadError(t,e){let r=t.rslLoadData;var s="加载错误:"+t.rslLoadData.reqUrl+" error:"+e;logW(s);t.isLocked=true;if(r.onError!=null){r.onError.call(r.caller,s)}i._failedCount+=1;let n=i.multipleDict[r.url];if(n&&n.length>0){for(let t=0;t<n.length;++t){if(n[t].onError){n[t].onError.call(n[t].caller,s)}}i._failedCount+=n.length}i.removeAllTask(r.url);t.isLocked=false;i.loadNext()}static profilerNet(t){let e=t.rslLoadData;if(!e){return}let r=t.bytesTotal/1048576;i._loadedCoastTime+=(getTimer()-i._detailLoadSpeed[e.url])/1e3;i._loadedTotalBytes+=r;i._detailLoadedBytes.put(e.type,i._detailLoadedBytes[e.type]+r);i._networkSpeed=i._loadedTotalBytes/(i._loadedCoastTime==0?1:i._loadedCoastTime);delete i._detailLoadSpeed[e.url]}static onLoadProgress(t,e){let r=t.rslLoadData;if(t.bytesLoaded==t.bytesTotal){i.profilerNet(t)}t.isLocked=true;if(r.onUpdate!=null){r.onUpdate.call(r.caller,e,r)}let s=i.multipleDict[r.url];if(s&&s.length>0){for(let t=0;t<s.length;++t){if(s[t].onUpdate){s[t].onUpdate.call(s[t].caller,e,r)}}}t.isLocked=false}static getName(t){t=t.split("?")[0];t=t.split("/").pop();return t}static onLoadComplete(t,e){let r=t.rslLoadData;if(r.onComplete!=null){r.onComplete.call(r.caller,e,t.rslLoadData)}let s=i.multipleDict[r.url];if(s&&s.length>0){for(let i=0;i<s.length;++i){if(s[i].onComplete){s[i].onComplete.call(s[i].caller,e,t.rslLoadData)}}}i.removeAllTask(r.url);i._loadedSucceedCount+=1;i.loadNext()}static addToWaitingQueue(t){if(!t){return}if(i.waitingDict[t.url]){i.addToMultipleQueue(t)}else{i.waitingDict[t.url]=t;i.waitingQueue.push(t);i.sortPriorityAsc(i.waitingQueue,0,i.waitingQueue.length-1)}}static sortPriorityAsc(t,e,r){let s=0;let n=0;let a=0;let l=0;let o=null;let h=null;if(r-e<20){s=e+1;r++;while(s<r){o=t[s];n=s-1;a=s;l=o.priority;while(n>=e&&t[n].priority<l){t[a--]=t[n--]}t[a]=o;s++}}else{s=e;n=r;o=t[e+r>>>1];l=o.priority;while(s<=n){while(t[n].priority<l){n--}while(t[s].priority>l){s++}if(s<=n){h=t[s];t[s]=t[n];s++;t[n]=h;n--}}if(e<n){i.sortPriorityAsc(t,e,n)}if(s<r){i.sortPriorityAsc(t,s,r)}}}static loadNext(){if(i.waitingQueue.length==0){return}var e=i._maxQueueSize;var r=i.loadingQueue;var s=i.waitingQueue;var n=null;for(let t=0;t<r.length;++t){if(!r[t].isLoading&&!r[t].isLocked){n=r[t];break}}if(!n&&i._enableInterrupt){if(i._loadingSortDirty){i.sortPriorityAsc(r,0,r.length-1);i._loadingSortDirty=false}if(r[e-1].isLocked||r[e-1].rslLoadData&&r[e-1].rslLoadData.priority+t.loader.LoadPriorityType.INTERRUPT_PRIORITY>s[0].priority){return}n=r[e-1];i.interruptTask(n.rslLoadData)}i.processLoad(n,i.shiftWaitingTask())}static shiftWaitingTask(){var t=i.waitingQueue.shift();i.waitingDict[t.url]=null;delete i.waitingDict[t.url];return t}static processLoad(t,e){i.addLoaderEvents(t);i.loadingDict[e.url]=t;i._loadingSortDirty=true;i._loadedTotalCount+=1;if(!i._detailLoadedBytes[e.type]){i._detailLoadedBytes[e.type]=0;i._detailLoadedCount[e.type]=0}i._detailLoadSpeed[e.url]=getTimer();t.load(e)}static addToMultipleQueue(t){if(!i.multipleDict[t.url]){if(i.arrayPool.length>0){i.multipleDict[t.url]=i.arrayPool.pop();i.multipleDict[t.url].length=0}else{i.multipleDict[t.url]=new Array}}var e=i.multipleDict[t.url];e.push(t)}}i.arrayPool=[];i._loadingSortDirty=true;i._maxQueueSize=5;i._enableInterrupt=true;i._loadedTotalCount=0;i._loadedSucceedCount=0;i._failedCount=0;i._interruptCount=0;i._networkSpeed=0;i._loadedTotalBytes=0;i._loadedCoastTime=1;e.MultiUrlLoadManager=i})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i{constructor(r,s=null,n=null,a=null,l=null,o=null,h=0){this.requestMethod="get";this._tryCount=3;this.uuid="1";this._url=r;this._requestURL=e.MultiUrlLoadManager.getUrlWithVersion!=null?e.MultiUrlLoadManager.getUrlWithVersion(r):r;this._caller=s;this._onComplete=n;this._onUpdate=a;this._onError=l;this._dataFormat=o;this._type=t.utils.URLUtils.type(r);if(o==null){this._dataFormat=LoaderType.typeMapping[this._type]}this.priority=h;this.uuid=++i.COUNT+""}get caller(){return this._caller}get type(){return this._type}get url(){return this._url}get reqUrl(){return this._requestURL}get onComplete(){return this._onComplete}get onUpdate(){return this._onUpdate}get onError(){return this._onError}get dataFormat(){return this._dataFormat}get tryCount(){return this._tryCount}}i.COUNT=0;e.MultiLoadData=i})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{constructor(){}}e.LEVEL_DEFAULT=0;e.INTERRUPT_PRIORITY=3e3;e.LEVEL_2D_UI_DEFAULT=1;t.LoadPriorityType=e})(e=t.loader||(t.loader={}))})(fly||(fly={}));class LoaderType{constructor(){}}LoaderType.TEXT="text";LoaderType.BINARY="arraybuffer";LoaderType.ATLAS="atlas";LoaderType.IMAGE="image";LoaderType.json="json";LoaderType.fly="fly";LoaderType.data="data";LoaderType.typeMapping={png:LoaderType.IMAGE,jpg:LoaderType.IMAGE,data:LoaderType.BINARY,byte:LoaderType.BINARY,json:LoaderType.json,atlas:LoaderType.ATLAS,fly:LoaderType.fly};var fly;(function(t){class e{constructor(t,e,i,r){this.once=false;this._id=0;r===void 0&&(r=false);this.setTo(t,e,i,r)}setTo(t,i,r,s){this._id=e._gid++;this.caller=t;this.method=i;this.args=r;this.once=s;return this}run(){if(this.method==null){return null}var t=this._id;var e=this.method.apply(this.caller,this.args);this._id===t&&this.once&&this.recover();return e}runWith(t){if(this.method==null){return null}var e=this._id;if(t==null){var i=this.method.apply(this.caller,this.args)}else if(!this.args&&!t.unshift){i=this.method.call(this.caller,t)}else if(this.args){i=this.method.apply(this.caller,this.args.concat(t))}else{i=this.method.apply(this.caller,t)}this._id===e&&this.once&&this.recover();return i}clear(){this.caller=null;this.method=null;this.args=null;return this}recover(){if(this._id>0){this._id=0;e._pool.push(this.clear())}}static create(t,i,r,s){s===void 0&&(s=true);if(e._pool.length){return e._pool.pop().setTo(t,i,r,s)}return new e(t,i,r,s)}}e._pool=[];e._gid=1;t.Handler=e})(fly||(fly={}));var FlyEvent;(function(t){t.MOUSE_DOWN="mousedown";t.MOUSE_DOWN="mousedown";t.MOUSE_UP="mouseup";t.CLICK="click";t.RIGHT_MOUSE_DOWN="rightmousedown";t.RIGHT_MOUSE_UP="rightmouseup";t.RIGHT_CLICK="rightclick";t.MOUSE_MOVE="mousemove";t.MOUSE_OVER="mouseover";t.MOUSE_OUT="mouseout";t.MOUSE_WHEEL="mousewheel";t.ROLL_OVER="mouseover";t.ROLL_OUT="mouseout";t.DOUBLE_CLICK="doubleclick";t.CHANGE="change";t.CHANGED="changed";t.RESIZE="resize";t.ADDED="added";t.REMOVED="removed";t.DISPLAY="display";t.UNDISPLAY="undisplay";t.ERROR="error";t.COMPLETE="complete";t.LOADED="loaded";t.PROGRESS="progress";t.INPUT="input";t.RENDER="render";t.OPEN="open";t.MESSAGE="message";t.CLOSE="close";t.KEY_DOWN="keydown";t.KEY_PRESS="keypress";t.KEY_UP="keyup";t.FRAME="enterframe";t.DRAG_START="dragstart";t.DRAG_MOVE="dragmove";t.DRAG_END="dragend";t.ENTER="enter";t.SELECT="select";t.BLUR="blur";t.FOCUS="focus";t.VISIBILITY_CHANGE="visibilitychange";t.FOCUS_CHANGE="focuschange";t.PLAYED="played";t.PAUSED="paused";t.STOPPED="stopped";t.START="start";t.END="end";t.ENABLE_CHANGED="enablechanged";t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged";t.COMPONENT_ADDED="componentadded";t.COMPONENT_REMOVED="componentremoved";t.LAYER_CHANGED="layerchanged";t.HIERARCHY_LOADED="hierarchyloaded";t.RECOVERED="recovered";t.RELEASED="released";t.LINK="link";t.LABEL="label";t.FULL_SCREEN_CHANGE="fullscreenchange";t.DEVICE_LOST="devicelost";t.MESH_CHANGED="meshchanged";t.MATERIAL_CHANGED="materialchanged";t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged";t.ANIMATION_CHANGED="animationchanged";t.TRIGGER_ENTER="triggerenter";t.TRIGGER_STAY="triggerstay";t.TRIGGER_EXIT="triggerexit";t.TRAIL_FILTER_CHANGE="trailfilterchange";t.DOMINO_FILTER_CHANGE="dominofilterchange"})(FlyEvent||(FlyEvent={}));var fly;(function(t){class e{constructor(){}static get listenersDict(){if(this._listenersDict==null){this._listenersDict=new ds.StringMap}return this._listenersDict}static on(t,e,i,...r){this.addEvent(t,e,i,r)}static addEvent(t,i,r,...s){if(!r){throw new Error("listener is null")}if(e.hasEvent(t,i,r)){logW("重复注册事件:Type:"+t+";Listener:"+r.toString());return}let n=e.listenersDict[t];if(!n){if(e.arrayPool.length>0){n=e.arrayPool.pop();n.length=0}else{n=new Array}e.listenersDict[t]=n}let a=null;if(e.wrapperPool.length>0){a=e.wrapperPool.pop();a.caller=i;a.method=r;a.params=s}else{a={caller:i,method:r,params:s}}n.push(a)}static dispatchEvent(t,...i){let r=e.listenersDict[t];if(!r){return}for(let t=0;t<r.length;++t){let e=r[t];if(i||e.params){let t=[];if(i){for(let e=0;e<i.length;++e){t.push(i[e])}}if(e.params){for(let i=0;i<e.params.length;++i){t.push(e.params[i])}}e.method.apply(e.caller,t)}else{e.method()}}}static removeEvent(t,i,r){let s=e.listenersDict[t];if(!s){return}let n=s.length;for(let t=n-1;t>=0;t--){let n=s[t];if(n.caller==i&&n.method===r){s.splice(t,1);n.method=null;n.params=null;e.wrapperPool.push(n)}}if(s.length==0){e.arrayPool.push(s);delete e.listenersDict[t]}}static hasTypeEvent(t){let i=e.listenersDict[t];if(!i){return false}return i.length!=0}static hasEvent(t,i,r){let s=e.listenersDict[t];if(!s){return false}for(let t=0;t<s.length;++t){var n=s[t];if(n.caller==i&&n.method==r){return true}}return false}static getEventsNum(){let t=0;for(let i in e.listenersDict){let r=e.listenersDict[i];for(let e=0;e<r.length;++e){t+=1}}return t}static removeAllEvents(){for(let t in e.listenersDict){let i=e.listenersDict[t];delete e.listenersDict[t];if(!i){continue}i.length=0;e.arrayPool.push(i)}}static getTypeEventList(t){let i=[];let r=e.listenersDict[t];if(r){for(let t=0;t<r.length;++t){i.push(r[t].method)}}return i}static getAllEventList(){let t=[];for(let i in e.listenersDict){let r=e.listenersDict[i];if(!r){continue}for(let e=0;e<r.length;++e){t.push(r[e].method)}}return t}static getTypeEventsNum(t){let i=e.listenersDict[t];if(!i){return 0}return i.length}}e.arrayPool=[];e.wrapperPool=[];t.EventManager=e;class i{constructor(t,e,i){this.caller=t;this.method=e;this.params=i}}})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e{constructor(){}}e.INF=1;e.WAR=2;e.DEBUG=3;e.ERR=4;t.LogLevel=e})(e=t.enums||(t.enums={}))})(fly||(fly={}));class Engine{constructor(){}setup(){Tick.setup()}}var fly;(function(t){class e{constructor(t,e){this.width=1e3;this.height=580;this.width=t;this.height=e}static setSceneConfig(t,i,r,s){e.TILE_WIDTH=t;e.TILE_HEIGHT=i;e.ZONE_WIDTH=r;e.ZONE_HEIGHT=s;e.ZONE_SCALE_WIDTH=e.ZONE_WIDTH/e.TILE_WIDTH;e.ZONE_SCALE_HEIGHT=e.ZONE_HEIGHT/e.TILE_HEIGHT}setViewSize(t,e){this.width=t;this.height=e}}e.TILE_WIDTH=25;e.TILE_HEIGHT=25;e.ZONE_WIDTH=256;e.ZONE_HEIGHT=256;e.ZONE_SCALE_WIDTH=e.ZONE_WIDTH/e.TILE_WIDTH;e.ZONE_SCALE_HEIGHT=e.ZONE_HEIGHT/e.TILE_HEIGHT;t.SceneConfig=e})(fly||(fly={}));var fly;(function(t){class e{constructor(){}static get shadowWidth(){return e._shadowPos.x}static get shadowHeight(){return e._shadowPos.y}static get shadowTexture(){if(e._shadowTexture==null){e._shadowTexture=new t.renders.TextureProxy}return e._shadowTexture}static setShadowBmpData(i){e._shadowPos=new t.Point;e._shadowPos.setTo(i.width,i.height);if(e._shadowTexture){e._shadowTexture.dispose()}e._shadowTexture=i}static get tanShadow(){return e._tanShadow}static get shadowAngle(){return e._shadowAngle}static set shadowAngle(t){e._shadowAngle=t;e._tanShadow=Math.tan(e._shadowAngle*Math.PI/180)}static get nowTime(){return Tick.time}static setGlobalConfig(t,i,r=null){e.FRAME_RATE=t;e.SETP_TIME=1e3/t;e.decode=i;e.version=r}}e._nowTime=0;e.IS_TWO_ANGLE=false;e.FRAME_RATE=60;e.SETP_TIME=1e3/e.FRAME_RATE;e.shadowYScale=.7;e._shadowAngle=-30;e._tanShadow=0;e.shadowOffsetX=0;e.shadowOffsetY=0;e.shadowAlpha=.5;e.shadowRenderType=2;e.SHADOW_SHAPE=2;e.isShowDrawRect=false;e.enableBlendMode=true;e.useWorker=false;e.avatarAtfResAsync=true;e.avatarBpgResScale=false;e.avatarBpgResScaleMemory=64e6;e.avatarBpgResScaleValue=2;e.cameraTween=-1;e.avatarHighlightEnabled=false;e.heightFramRender=false;t.GlobalConfig2D=e})(fly||(fly={}));var fly;(function(t){class e{constructor(){this._events={}}addEventListener(t,e,i,r){return this.on(t,e,i,r)}dispatchEvent(t,e){return this.event(t,e)}hasListener(t){var e=this._events&&this._events[t];return!!e}event(t,e){if(!this._events||!this._events[t]){return false}var i=this._events[t];if(i.run){if(i.once){delete this._events[t]}e!=null?i.runWith(e):i.run()}else{for(var r=0,s=i.length;r<s;r++){var n=i[r];if(n){e!=null?n.runWith(e):n.run()}if(!n||n.once){i.splice(r,1);r--;s--}}if(i.length===0&&this._events){delete this._events[t]}}return true}on(t,e,i,r){return this._createListener(t,e,i,r,false)}once(t,e,i,r){return this._createListener(t,e,i,r,true)}_createListener(e,i,r,s=null,n,a=null){a===void 0&&(a=true);a&&this.off(e,i,r,n);var l=t.Handler.create(i||this,r,s,n);this._events||(this._events={});var o=this._events;if(!o[e]){o[e]=l}else{if(!o[e].run){o[e].push(l)}else{o[e]=[o[e],l]}}return this}off(t,e,i,r){r===void 0&&(r=false);if(!this._events||!this._events[t]){return this}var s=this._events[t];if(i!=null){if(s.run){if((!e||s.caller===e)&&s.method===i&&(!r||s.once)){delete this._events[t];s.recover()}}else{var n=0;for(var a=0,l=s.length;a<l;a++){var o=s[a];if(!o){n++;continue}if(o&&(!e||o.caller===e)&&o.method===i&&(!r||o.once)){n++;s[a]=null;o.recover()}}if(n===l){delete this._events[t]}}}return this}offAll(t){var e=this._events;if(!e){return this}if(t){this._recoverHandlers(e[t]);delete e[t]}else{for(var i in e){this._recoverHandlers(e[i])}this._events=null}return this}_recoverHandlers(t){if(!t){return}if(t.run){t.recover()}else{for(var e=t.length-1;e>-1;e--){if(t[e]){t[e].recover();t[e]=null}}}}isMouseEvent(t){return e.MOUSE_EVENTS[t]}}e.MOUSE_EVENTS={rightmousedown:true,rightmouseup:true,rightclick:true,mousedown:true,mouseup:true,mousemove:true,mouseover:true,mouseout:true,click:true,doubleclick:true};t.EventDispatcher=e})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i extends t.EventDispatcher{constructor(){super(...arguments);this._pics=[];this._directory=""}close(){}load(t,e){this._atlasUrl=t;this._atlasJson=JSON.parse(e);var i=this._atlasJson;if(i.meta&&i.meta.image){var r=t.split("?")[0];this._directory=i.meta&&i.meta.prefix?i.meta.prefix:r.substring(0,r.lastIndexOf("."))+"/";var s=i.meta.image.split(",");var n=t.indexOf("/")>=0?"/":"\\";var a=t.lastIndexOf(n);var l=a>=0?t.substr(0,a+1):"";for(var o=0,h=s.length;o<h;o++){s[o]=l+s[o]}s.reverse();this._toLoads=s;i.pics=[];this.doLoadImg()}else{}}onAtlasError(t){this.event(FlyEvent.ERROR)}doLoadImg(){if(this._toLoads.length>0){var t=this._toLoads.shift();e.MultiUrlLoadManager.load(t,this,this.onImgLoadComplete,null,this.onImgLoadError,LoaderType.IMAGE)}else{var i=Laya.URL.formatURL(this._atlasUrl);var r=Laya.Loader;var s=r.atlasMap[i]||(r.atlasMap[i]=[]);s.dir=this._directory;var n;for(n in this._atlasJson["frames"]){var a=this._atlasJson["frames"][n];var l=this._pics[a.frame.idx?a.frame.idx:0];t=Laya.URL.formatURL(this._directory+n);this.cacheRes(t,Laya.Texture.create(l,a.frame.x,a.frame.y,a.frame.w,a.frame.h,a.spriteSourceSize.x,a.spriteSourceSize.y,a.sourceSize.w,a.sourceSize.h));Laya.Loader.loadedMap[t].url=t;s.push(t)}this.event(FlyEvent.COMPLETE)}}cacheRes(t,e){t=Laya.URL.formatURL(t);if(Laya.Loader.loadedMap[t]!=null){logW("Resources already exist,is repeated loading:",t)}else{Laya.Loader.loadedMap[t]=e}}onImgLoadComplete(t,e){this._pics.push(t);this.doLoadImg()}onImgLoadError(){this.event(FlyEvent.ERROR)}}e.LayaAtlasLoader=i})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i extends t.EventDispatcher{constructor(){super();this.onUrlTimeoutHandler=(()=>{this.onUrlError("request timeout.")});this.isLoading=false;this.isLocked=false;this._timeoutID=0;this._tryIndex=0;this._data=null;this._urlLoader=new e.URLLoader}get data(){if(!this._data){logW("MultiUrlLoader get null data. url:"+(this.rslLoadData?this.rslLoadData.url:null))}return this._data}close(){clearTimeout(this._timeoutID);this._timeoutID=0;this._tryIndex=0;this._data=null;this.rslLoadData=null;this.isLoading=false;this.isLocked=false;this._urlLoader.close();this.removeUrlLoadEvent()}get priority(){return this.rslLoadData?this.rslLoadData.priority:t.loader.LoadPriorityType.LEVEL_DEFAULT}load(t){if(this.isLoading){return}if(!t){this._tryIndex++;this._urlLoader.close();if(!this.rslLoadData){this.isLoading=false;return}}else{this.close();this.rslLoadData=t;this.initUrlLoadEvent()}clearTimeout(this._timeoutID);this.isLoading=true;if(i.ENABLE_TIMEOUT_RELOAD){this._timeoutID=setTimeout(this.onUrlTimeoutHandler,i.TIME_OUT_RETRY_TIME)}this._urlLoader.method=this.rslLoadData.requestMethod;this._urlLoader.load(this.rslLoadData.reqUrl,e.URLLoaderDataFormat.BINARY)}initUrlLoadEvent(){this._urlLoader.on(FlyEvent.COMPLETE,this,this.onUrlComplete);this._urlLoader.on(FlyEvent.PROGRESS,this,this.onUrlProgress);this._urlLoader.on(FlyEvent.ERROR,this,this.onUrlError)}removeUrlLoadEvent(){this._urlLoader.off(FlyEvent.COMPLETE,this,this.onUrlComplete);this._urlLoader.off(FlyEvent.PROGRESS,this,this.onUrlProgress);this._urlLoader.off(FlyEvent.ERROR,this,this.onUrlError)}onUrlError(e){clearTimeout(this._timeoutID);this._timeoutID=0;this.isLoading=false;if(!this.rslLoadData){return}t.LoadBlackListUtils.ins.addLoadUrl(this.rslLoadData.url);if(this._tryIndex<this.rslLoadData.tryCount){this.load(null);return}let i="重试"+this.rslLoadData.tryCount+"次之后失败。";this.event(FlyEvent.ERROR,i)}get bytesLoaded(){return this._urlLoader.bytesLoaded}get bytesTotal(){return this._urlLoader.bytesTotal}onUrlProgress(t){this.event(FlyEvent.PROGRESS,t)}onUrlComplete(i){let r=this.rslLoadData?this.rslLoadData.url:"unknown";if(this._urlLoader.bytesLoaded!=this._urlLoader.bytesTotal){this.onUrlError("bytesTotal != bytesLoaded!");return}if(!i){this.onUrlError("get null data ! url="+r);return}if(this.rslLoadData.dataFormat==LoaderType.ATLAS){var s=new e.LayaAtlasLoader;s.on(FlyEvent.COMPLETE,this,this.onAtlasLoadComplete);let t=arrayBuffToString(i);s.load(r,t)}else if(this.rslLoadData.dataFormat==LoaderType.IMAGE){t.TextureParse.parse(r,i,this,this.onImageLoadComplete)}else if(this.rslLoadData.dataFormat==LoaderType.fly){}else{if(this.rslLoadData.dataFormat==LoaderType.json){let t=arrayBuffToString(i);this._data=JSON.parse(t)}else if(this.rslLoadData.dataFormat==LoaderType.TEXT){this._data=arrayBuffToString(i)}else{this._data=i}if(isLaya){Laya.loader.cacheRes(this.rslLoadData.url,this._data)}this.event(FlyEvent.COMPLETE,this._data)}}onAtlasLoadComplete(){}onImageLoadComplete(t){if(isLaya){var e=t;Laya.loader.cacheRes(this.rslLoadData.url,e);this.event(FlyEvent.COMPLETE,e)}else{this.event(FlyEvent.COMPLETE,t)}}}i.ENABLE_TIMEOUT_RELOAD=true;i.TIME_OUT_RETRY_TIME=300*1e3;e.MultiUrlLoader=i})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i extends t.EventDispatcher{constructor(t=null,r=e.URLLoaderDataFormat.TEXT,s="get"){super();this._dataFormat="";this._method="get";this.uuid=0;this.loadTime=0;this.onError=(t=>{if(this._loading){logE("URLLoader.onError:"+this.url);this.clear();this.error("Request failed Status:"+this._httpRequest.status+" text:"+this._httpRequest.statusText)}});this.onComplete=(t=>{var e=this._httpRequest;var i=this._httpRequest.status!==undefined?this._httpRequest.status:200;if(i===200||i===204||i===0){this.complete()}else{this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)}});this.onAbort=(t=>{this.clear();this._closed=true;this.event(FlyEvent.CLOSE,t)});this.onProgress=(t=>{if(t&&t.lengthComputable){this.event(FlyEvent.PROGRESS,t.loaded/t.total)}});this._dataFormat=e.URLLoaderDataFormat.TEXT;this._url=t;this._disposed=false;this._data=null;this._dataFormat=r;this.method=s;this.uuid=++i.COUNT}get bytesTotal(){return this._bytesTotal}get bytesLoaded(){return this._bytesLoaded}set method(t){if(t=="post"||t=="get"){this._method=t}}get method(){return this._method}get http(){return this._httpRequest}get loaded(){return this._loaded}get dataFormat(){return this._dataFormat}set dataFormat(t){this._dataFormat=t;if(this._loading==true||this._disposed==true){logW("URLLoader set dataformat invalid.")}}get closed(){return this._closed}get loading(){return this._loading}get data(){return this._data}get url(){return this._url}clear(){this._closed=false;this._disposed=false;this._loaded=false;this._loading=false;this._data=null;this._bytesTotal=0;this._bytesLoaded=0;this.offHttpRequestEvent()}close(){if(this._loading){this.clear();this._httpRequest.onabort=this.onAbort;this._httpRequest.abort()}}dispose(){if(!this._disposed){this.close();this.clear();this._disposed=true;this._httpRequest=null}}load(t,r=null,s=null){if(this._disposed==true){throw new Error("Can't load, loader has been disposed.")}if(t){this._url=t}else{this._url=null}if(r){this._dataFormat=r}if(!this._url){throw new Error("Can't load, url is empty.")}if(this._loading){throw new Error("Can't load, loader is loading.")}this.clear();this.close();this._loading=true;this._httpRequest=new XMLHttpRequest;this.addHttpRequestEvent();this.loadTime=++i.LOAD_TIME;var n=r==e.URLLoaderDataFormat.BINARY?"arraybuffer":"text";this._httpRequest["responseType"]=n;this._httpRequest.open("GET",t,true);this._httpRequest.send(null)}addHttpRequestEvent(){this.offHttpRequestEvent();if(this._httpRequest){this._httpRequest.onerror=this.onError;this._httpRequest.onabort=this.onAbort;this._httpRequest.onprogress=this.onProgress;this._httpRequest.onload=this.onComplete}}error(t){this.event(FlyEvent.ERROR,t)}complete(){this.clear();var t=true;try{this._data=this._httpRequest.response||this._httpRequest.responseText}catch(e){t=false;this.error(e.message)}t&&this.event(FlyEvent.COMPLETE,this._data instanceof Array?[this._data]:this._data)}offHttpRequestEvent(){var t=this._httpRequest;if(t){t.onerror=t.onabort=t.onprogress=t.onload=null}}}i.UUID="uu_id";i.COUNT=0;i.LOAD_TIME=0;e.URLLoader=i})(e=t.loader||(t.loader={}))})(fly||(fly={}));var fly;(function(t){var e;(function(t){class e extends Laya.Sprite{constructor(){super()}dispose(){}set subTexture(t){this._subTexture=t;this.texture=t.getLayaTexture()}get subTexture(){return this._subTexture}add(t){this.addChild(t)}}t.LayaRenderSprite=e})(e=t.renders||(t.renders={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i extends t.EventDispatcher{constructor(){super();this.subTextures={}}load(i,r){this._url=i;this._configObj=r;this._textureProxy=new e.TextureProxy;this._textureProxy.on(FlyEvent.LOADED,this,this.onTextLoaed,[i]);this._textureProxy.load(i,t.loader.LoadPriorityType.LEVEL_DEFAULT)}onTextLoaed(t){this.parseTexture()}parseTexture(){this.dispatchEvent(FlyEvent.COMPLETE)}getTexture(t){return this.subTextures[t]}dispose(){}}e.TexturePack=i})(e=t.renders||(t.renders={}))})(fly||(fly={}));var fly;(function(t){var e;(function(e){class i extends t.EventDispatcher{constructor(t="",e=""){super();this._url=t;this._error=false;this._name=e;this._texture=null;this._refCount=0;this._disposed=false;this._lastUsed=0}get lastUsed(){return this._lastUsed}get error(){return this._error}get loading(){return this._loading}get loaded(){return this._loaded}get width(){return this._texture?this._texture.width:0}get height(){return this._texture?this._texture.height:0}load(e="",i=t.loader.LoadPriorityType.LEVEL_DEFAULT){}get url(){return this._url}onTextureProgress(t){t.target=this;this.event(FlyEvent.PROGRESS,t)}onTextureError(t){t.target=this;this._error=true;logE(this.url+"加载出错");this.event(FlyEvent.ERROR,t)}onTextureComplete(t){this._texture=t.param;t.target=this;t.param=this;this._loaded=true;this._loading=false;this.event(FlyEvent.LOADED,t)}addRef(){this._refCount+=1}getRef(){return this._refCount}releaseRef(){this._refCount-=1;if(this._refCount==0){this._lastUsed=getTimer()}if(this._refCount<0){logW(this._refCount.toString()+",引用计数错误。url:"+this.url)}}toString(){let t="";t+="[name="+this._name+",[url="+this._url+"]";return this._name?this._name:""}dispose(){if(this._disposed){return}if(this._refCount>0){this._refCount--}else{this._disposed=true;if(this._texture){this._texture.destroy(true);this._texture=null}let t={};t.target=this;t.param=this;this.event("disposed",t)}}}e.TextureProxy=i})(e=t.renders||(t.renders={}))})(fly||(fly={}));var fly;(function(t){class e extends CallBack{constructor(t,e,i,r){super(e,i,r);this._isCalled=false;this._args=r;this._callTime=t}call(){super.call();this._isCalled=true}get isCalled(){return this._isCalled}get callTime(){return this._callTime}}t.DelayCallInfo=e})(fly||(fly={}));var spine;(function(t){var e;(function(e){class i{constructor(t,e={alpha:"true"}){this.restorables=new Array;if(t instanceof HTMLCanvasElement){let i=t;this.gl=i.getContext("webgl",e)||i.getContext("experimental-webgl",e);this.canvas=i;i.addEventListener("webglcontextlost",t=>{let e=t;if(t){t.preventDefault()}});i.addEventListener("webglcontextrestored",t=>{for(let t=0,e=this.restorables.length;t<e;t++){this.restorables[t].restore()}})}else{this.gl=t;this.canvas=this.gl.canvas}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);if(e>-1){this.restorables.splice(e,1)}}}e.ManagedWebGLRenderingContext=i;class r{static getDestGLBlendMode(e){switch(e){case t.BlendMode.Normal:return r.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return r.ONE;case t.BlendMode.Multiply:return r.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Screen:return r.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+e)}}static getSourceGLBlendMode(e,i=false){switch(e){case t.BlendMode.Normal:return i?r.ONE:r.SRC_ALPHA;case t.BlendMode.Additive:return i?r.ONE:r.SRC_ALPHA;case t.BlendMode.Multiply:return r.DST_COLOR;case t.BlendMode.Screen:return r.ONE;default:throw new Error("Unknown blend mode: "+e)}}}r.ZERO=0;r.ONE=1;r.SRC_COLOR=768;r.ONE_MINUS_SRC_COLOR=769;r.SRC_ALPHA=770;r.ONE_MINUS_SRC_ALPHA=771;r.DST_ALPHA=772;r.ONE_MINUS_DST_ALPHA=773;r.DST_COLOR=774;e.WebGLBlendModeConverter=r})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(t=0,e=0,i=0){this.x=0;this.y=0;this.z=0;this.x=t;this.y=e;this.z=i}setFrom(t){this.x=t.x;this.y=t.y;this.z=t.z;return this}set(t,e,i){this.x=t;this.y=e;this.z=i;return this}add(t){this.x+=t.x;this.y+=t.y;this.z+=t.z;return this}sub(t){this.x-=t.x;this.y-=t.y;this.z-=t.z;return this}scale(t){this.x*=t;this.y*=t;this.z*=t;return this}normalize(){let t=this.length();if(t==0){return this}t=1/t;this.x*=t;this.y*=t;this.z*=t;return this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(e){let i=e.values;return this.set(this.x*i[t.M00]+this.y*i[t.M01]+this.z*i[t.M02]+i[t.M03],this.x*i[t.M10]+this.y*i[t.M11]+this.z*i[t.M12]+i[t.M13],this.x*i[t.M20]+this.y*i[t.M21]+this.z*i[t.M22]+i[t.M23])}project(e){let i=e.values;let r=1/(this.x*i[t.M30]+this.y*i[t.M31]+this.z*i[t.M32]+i[t.M33]);return this.set((this.x*i[t.M00]+this.y*i[t.M01]+this.z*i[t.M02]+i[t.M03])*r,(this.x*i[t.M10]+this.y*i[t.M11]+this.z*i[t.M12]+i[t.M13])*r,(this.x*i[t.M20]+this.y*i[t.M21]+this.z*i[t.M22]+i[t.M23])*r)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x;let i=t.y-this.y;let r=t.z-this.z;return Math.sqrt(e*e+i*i+r*r)}}t.Vector3=e})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(e,i=true){this.premultipliedAlpha=false;this.vertexEffect=null;this.tempColor=new t.Color;this.tempColor2=new t.Color;this.vertexSize=2+2+4;this.twoColorTint=false;this.renderable=new t.Renderable(null,0,0);this.clipper=new t.SkeletonClipping("");this.temp=new t.Vector2;this.temp2=new t.Vector2;this.temp3=new t.Color;this.temp4=new t.Color;this.twoColorTint=i;if(i){this.vertexSize+=4}this.vertices=t.Utils.newFloatArray(this.vertexSize*1024)}draw(r,s,n=-1,a=-1){let l=this.clipper;let o=this.premultipliedAlpha;let h=this.twoColorTint;let u=null;let c=this.temp;let d=this.temp2;let f=this.temp3;let p=this.temp4;let g=this.renderable;let m=null;let _=null;let M=s.drawOrder;let y=null;let w=s.color;let v=h?12:8;let E=false;if(n==-1){E=true}for(let s=0,T=M.length;s<T;s++){let T=l.isClipping()?2:v;let A=M[s];if(n>=0&&n==A.data.index){E=true}if(!E){l.clipEndWithSlot(A);continue}if(a>=0&&a==A.data.index){E=false}let x=A.getAttachment();let b=null;if(x instanceof t.RegionAttachment){let t=x;g.vertices=this.vertices;g.numVertices=4;g.numFloats=T<<2;t.computeWorldVertices(A.bone,g.vertices,0,T);_=i.QUAD_TRIANGLES;m=t.uvs;b=t.region.renderObject.texture;y=t.color}else if(x instanceof t.MeshAttachment){let e=x;g.vertices=this.vertices;g.numVertices=e.worldVerticesLength>>1;g.numFloats=g.numVertices*T;if(g.numFloats>g.vertices.length){g.vertices=this.vertices=t.Utils.newFloatArray(g.numFloats)}e.computeWorldVertices(A,0,e.worldVerticesLength,g.vertices,0,T);_=e.triangles;b=e.region.renderObject.texture;m=e.uvs;y=e.color}else if(x instanceof t.ClippingAttachment){let t=x;l.clipStart(A,t);continue}else{continue}if(b!=null){let t=A.color;let i=this.tempColor;i.r=w.r*t.r*y.r;i.g=w.g*t.g*y.g;i.b=w.b*t.b*y.b;i.a=w.a*t.a*y.a;if(o){i.r*=i.a;i.g*=i.a;i.b*=i.a}let s=this.tempColor2;if(A.darkColor==null){s.set(0,0,0,1)}else{if(o){s.r=A.darkColor.r*i.a;s.g=A.darkColor.g*i.a;s.b=A.darkColor.b*i.a}else{s.setFromColor(A.darkColor)}s.a=o?1:0}let n=A.data.blendMode;if(n!=u){u=n;r.setBlendMode(e.WebGLBlendModeConverter.getSourceGLBlendMode(u,o),e.WebGLBlendModeConverter.getDestGLBlendMode(u))}if(l.isClipping()){l.clipTriangles(g.vertices,g.numFloats,_,_.length,m,i,s,h);let t=new Float32Array(l.clippedVertices);let e=l.clippedTriangles;if(this.vertexEffect!=null){let e=this.vertexEffect;let i=t;if(!h){for(let r=0,s=t.length;r<s;r+=v){c.x=i[r];c.y=i[r+1];f.set(i[r+2],i[r+3],i[r+4],i[r+5]);d.x=i[r+6];d.y=i[r+7];p.set(0,0,0,0);e.transform(c,d,f,p);i[r]=c.x;i[r+1]=c.y;i[r+2]=f.r;i[r+3]=f.g;i[r+4]=f.b;i[r+5]=f.a;i[r+6]=d.x;i[r+7]=d.y}}else{for(let r=0,s=t.length;r<s;r+=v){c.x=i[r];c.y=i[r+1];f.set(i[r+2],i[r+3],i[r+4],i[r+5]);d.x=i[r+6];d.y=i[r+7];p.set(i[r+8],i[r+9],i[r+10],i[r+11]);e.transform(c,d,f,p);i[r]=c.x;i[r+1]=c.y;i[r+2]=f.r;i[r+3]=f.g;i[r+4]=f.b;i[r+5]=f.a;i[r+6]=d.x;i[r+7]=d.y;i[r+8]=p.r;i[r+9]=p.g;i[r+10]=p.b;i[r+11]=p.a}}}r.draw(b,t,e)}else{let t=g.vertices;if(this.vertexEffect!=null){let e=this.vertexEffect;if(!h){for(let r=0,s=0,n=g.numFloats;r<n;r+=v,s+=2){c.x=t[r];c.y=t[r+1];d.x=m[s];d.y=m[s+1];f.setFromColor(i);p.set(0,0,0,0);e.transform(c,d,f,p);t[r]=c.x;t[r+1]=c.y;t[r+2]=f.r;t[r+3]=f.g;t[r+4]=f.b;t[r+5]=f.a;t[r+6]=d.x;t[r+7]=d.y}}else{for(let r=0,n=0,a=g.numFloats;r<a;r+=v,n+=2){c.x=t[r];c.y=t[r+1];d.x=m[n];d.y=m[n+1];f.setFromColor(i);p.setFromColor(s);e.transform(c,d,f,p);t[r]=c.x;t[r+1]=c.y;t[r+2]=f.r;t[r+3]=f.g;t[r+4]=f.b;t[r+5]=f.a;t[r+6]=d.x;t[r+7]=d.y;t[r+8]=p.r;t[r+9]=p.g;t[r+10]=p.b;t[r+11]=p.a}}}else{if(!h){for(let e=2,r=0,s=g.numFloats;e<s;e+=v,r+=2){t[e]=i.r;t[e+1]=i.g;t[e+2]=i.b;t[e+3]=i.a;t[e+4]=m[r];t[e+5]=m[r+1]}}else{for(let e=2,r=0,n=g.numFloats;e<n;e+=v,r+=2){t[e]=i.r;t[e+1]=i.g;t[e+2]=i.b;t[e+3]=i.a;t[e+4]=m[r];t[e+5]=m[r+1];t[e+6]=s.r;t[e+7]=s.g;t[e+8]=s.b;t[e+9]=s.a}}}let e=g.vertices.subarray(0,g.numFloats);r.draw(b,e,_)}}l.clipEndWithSlot(A)}l.clipEnd()}}i.QUAD_TRIANGLES=[0,1,2,2,3,0];e.SkeletonRenderer=i})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){t.M00=0;t.M01=4;t.M02=8;t.M03=12;t.M10=1;t.M11=5;t.M12=9;t.M13=13;t.M20=2;t.M21=6;t.M22=10;t.M23=14;t.M30=3;t.M31=7;t.M32=11;t.M33=15;class e{constructor(){this.temp=new Float32Array(16);this.values=new Float32Array(16);let e=this.values;e[t.M00]=1;e[t.M11]=1;e[t.M22]=1;e[t.M33]=1}set(t){this.values.set(t);return this}transpose(){let e=this.temp;let i=this.values;e[t.M00]=i[t.M00];e[t.M01]=i[t.M10];e[t.M02]=i[t.M20];e[t.M03]=i[t.M30];e[t.M10]=i[t.M01];e[t.M11]=i[t.M11];e[t.M12]=i[t.M21];e[t.M13]=i[t.M31];e[t.M20]=i[t.M02];e[t.M21]=i[t.M12];e[t.M22]=i[t.M22];e[t.M23]=i[t.M32];e[t.M30]=i[t.M03];e[t.M31]=i[t.M13];e[t.M32]=i[t.M23];e[t.M33]=i[t.M33];return this.set(e)}identity(){let e=this.values;e[t.M00]=1;e[t.M01]=0;e[t.M02]=0;e[t.M03]=0;e[t.M10]=0;e[t.M11]=1;e[t.M12]=0;e[t.M13]=0;e[t.M20]=0;e[t.M21]=0;e[t.M22]=1;e[t.M23]=0;e[t.M30]=0;e[t.M31]=0;e[t.M32]=0;e[t.M33]=1;return this}invert(){let e=this.values;let i=this.temp;let r=e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33];if(r==0){throw new Error("non-invertible matrix")}let s=1/r;i[t.M00]=e[t.M12]*e[t.M23]*e[t.M31]-e[t.M13]*e[t.M22]*e[t.M31]+e[t.M13]*e[t.M21]*e[t.M32]-e[t.M11]*e[t.M23]*e[t.M32]-e[t.M12]*e[t.M21]*e[t.M33]+e[t.M11]*e[t.M22]*e[t.M33];i[t.M01]=e[t.M03]*e[t.M22]*e[t.M31]-e[t.M02]*e[t.M23]*e[t.M31]-e[t.M03]*e[t.M21]*e[t.M32]+e[t.M01]*e[t.M23]*e[t.M32]+e[t.M02]*e[t.M21]*e[t.M33]-e[t.M01]*e[t.M22]*e[t.M33];i[t.M02]=e[t.M02]*e[t.M13]*e[t.M31]-e[t.M03]*e[t.M12]*e[t.M31]+e[t.M03]*e[t.M11]*e[t.M32]-e[t.M01]*e[t.M13]*e[t.M32]-e[t.M02]*e[t.M11]*e[t.M33]+e[t.M01]*e[t.M12]*e[t.M33];i[t.M03]=e[t.M03]*e[t.M12]*e[t.M21]-e[t.M02]*e[t.M13]*e[t.M21]-e[t.M03]*e[t.M11]*e[t.M22]+e[t.M01]*e[t.M13]*e[t.M22]+e[t.M02]*e[t.M11]*e[t.M23]-e[t.M01]*e[t.M12]*e[t.M23];i[t.M10]=e[t.M13]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M20]*e[t.M32]+e[t.M10]*e[t.M23]*e[t.M32]+e[t.M12]*e[t.M20]*e[t.M33]-e[t.M10]*e[t.M22]*e[t.M33];i[t.M11]=e[t.M02]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M22]*e[t.M30]+e[t.M03]*e[t.M20]*e[t.M32]-e[t.M00]*e[t.M23]*e[t.M32]-e[t.M02]*e[t.M20]*e[t.M33]+e[t.M00]*e[t.M22]*e[t.M33];i[t.M12]=e[t.M03]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M10]*e[t.M32]+e[t.M00]*e[t.M13]*e[t.M32]+e[t.M02]*e[t.M10]*e[t.M33]-e[t.M00]*e[t.M12]*e[t.M33];i[t.M13]=e[t.M02]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M12]*e[t.M20]+e[t.M03]*e[t.M10]*e[t.M22]-e[t.M00]*e[t.M13]*e[t.M22]-e[t.M02]*e[t.M10]*e[t.M23]+e[t.M00]*e[t.M12]*e[t.M23];i[t.M20]=e[t.M11]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M21]*e[t.M30]+e[t.M13]*e[t.M20]*e[t.M31]-e[t.M10]*e[t.M23]*e[t.M31]-e[t.M11]*e[t.M20]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M33];i[t.M21]=e[t.M03]*e[t.M21]*e[t.M30]-e[t.M01]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M20]*e[t.M31]+e[t.M00]*e[t.M23]*e[t.M31]+e[t.M01]*e[t.M20]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M33];i[t.M22]=e[t.M01]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M11]*e[t.M30]+e[t.M03]*e[t.M10]*e[t.M31]-e[t.M00]*e[t.M13]*e[t.M31]-e[t.M01]*e[t.M10]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M33];i[t.M23]=e[t.M03]*e[t.M11]*e[t.M20]-e[t.M01]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M10]*e[t.M21]+e[t.M00]*e[t.M13]*e[t.M21]+e[t.M01]*e[t.M10]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M23];i[t.M30]=e[t.M12]*e[t.M21]*e[t.M30]-e[t.M11]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M20]*e[t.M31]+e[t.M10]*e[t.M22]*e[t.M31]+e[t.M11]*e[t.M20]*e[t.M32]-e[t.M10]*e[t.M21]*e[t.M32];i[t.M31]=e[t.M01]*e[t.M22]*e[t.M30]-e[t.M02]*e[t.M21]*e[t.M30]+e[t.M02]*e[t.M20]*e[t.M31]-e[t.M00]*e[t.M22]*e[t.M31]-e[t.M01]*e[t.M20]*e[t.M32]+e[t.M00]*e[t.M21]*e[t.M32];i[t.M32]=e[t.M02]*e[t.M11]*e[t.M30]-e[t.M01]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M10]*e[t.M31]+e[t.M00]*e[t.M12]*e[t.M31]+e[t.M01]*e[t.M10]*e[t.M32]-e[t.M00]*e[t.M11]*e[t.M32];i[t.M33]=e[t.M01]*e[t.M12]*e[t.M20]-e[t.M02]*e[t.M11]*e[t.M20]+e[t.M02]*e[t.M10]*e[t.M21]-e[t.M00]*e[t.M12]*e[t.M21]-e[t.M01]*e[t.M10]*e[t.M22]+e[t.M00]*e[t.M11]*e[t.M22];e[t.M00]=i[t.M00]*s;e[t.M01]=i[t.M01]*s;e[t.M02]=i[t.M02]*s;e[t.M03]=i[t.M03]*s;e[t.M10]=i[t.M10]*s;e[t.M11]=i[t.M11]*s;e[t.M12]=i[t.M12]*s;e[t.M13]=i[t.M13]*s;e[t.M20]=i[t.M20]*s;e[t.M21]=i[t.M21]*s;e[t.M22]=i[t.M22]*s;e[t.M23]=i[t.M23]*s;e[t.M30]=i[t.M30]*s;e[t.M31]=i[t.M31]*s;e[t.M32]=i[t.M32]*s;e[t.M33]=i[t.M33]*s;return this}determinant(){let e=this.values;return e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33]}translate(e,i,r){let s=this.values;s[t.M03]+=e;s[t.M13]+=i;s[t.M23]+=r;return this}copy(){return(new e).set(this.values)}projection(e,i,r,s){this.identity();let n=1/Math.tan(r*(Math.PI/180)/2);let a=(i+e)/(e-i);let l=2*i*e/(e-i);let o=this.values;o[t.M00]=n/s;o[t.M10]=0;o[t.M20]=0;o[t.M30]=0;o[t.M01]=0;o[t.M11]=n;o[t.M21]=0;o[t.M31]=0;o[t.M02]=0;o[t.M12]=0;o[t.M22]=a;o[t.M32]=-1;o[t.M03]=0;o[t.M13]=0;o[t.M23]=l;o[t.M33]=0;return this}ortho2d(t,e,i,r){return this.ortho(t,t+i,e,e+r,0,1)}ortho(e,i,r,s,n,a){this.identity();let l=2/(i-e);let o=2/(s-r);let h=-2/(a-n);let u=-(i+e)/(i-e);let c=-(s+r)/(s-r);let d=-(a+n)/(a-n);let f=this.values;f[t.M00]=l;f[t.M10]=0;f[t.M20]=0;f[t.M30]=0;f[t.M01]=0;f[t.M11]=o;f[t.M21]=0;f[t.M31]=0;f[t.M02]=0;f[t.M12]=0;f[t.M22]=h;f[t.M32]=0;f[t.M03]=u;f[t.M13]=c;f[t.M23]=d;f[t.M33]=1;return this}multiply(e){let i=this.temp;let r=this.values;let s=e.values;i[t.M00]=r[t.M00]*s[t.M00]+r[t.M01]*s[t.M10]+r[t.M02]*s[t.M20]+r[t.M03]*s[t.M30];i[t.M01]=r[t.M00]*s[t.M01]+r[t.M01]*s[t.M11]+r[t.M02]*s[t.M21]+r[t.M03]*s[t.M31];i[t.M02]=r[t.M00]*s[t.M02]+r[t.M01]*s[t.M12]+r[t.M02]*s[t.M22]+r[t.M03]*s[t.M32];i[t.M03]=r[t.M00]*s[t.M03]+r[t.M01]*s[t.M13]+r[t.M02]*s[t.M23]+r[t.M03]*s[t.M33];i[t.M10]=r[t.M10]*s[t.M00]+r[t.M11]*s[t.M10]+r[t.M12]*s[t.M20]+r[t.M13]*s[t.M30];i[t.M11]=r[t.M10]*s[t.M01]+r[t.M11]*s[t.M11]+r[t.M12]*s[t.M21]+r[t.M13]*s[t.M31];i[t.M12]=r[t.M10]*s[t.M02]+r[t.M11]*s[t.M12]+r[t.M12]*s[t.M22]+r[t.M13]*s[t.M32];i[t.M13]=r[t.M10]*s[t.M03]+r[t.M11]*s[t.M13]+r[t.M12]*s[t.M23]+r[t.M13]*s[t.M33];i[t.M20]=r[t.M20]*s[t.M00]+r[t.M21]*s[t.M10]+r[t.M22]*s[t.M20]+r[t.M23]*s[t.M30];i[t.M21]=r[t.M20]*s[t.M01]+r[t.M21]*s[t.M11]+r[t.M22]*s[t.M21]+r[t.M23]*s[t.M31];i[t.M22]=r[t.M20]*s[t.M02]+r[t.M21]*s[t.M12]+r[t.M22]*s[t.M22]+r[t.M23]*s[t.M32];i[t.M23]=r[t.M20]*s[t.M03]+r[t.M21]*s[t.M13]+r[t.M22]*s[t.M23]+r[t.M23]*s[t.M33];i[t.M30]=r[t.M30]*s[t.M00]+r[t.M31]*s[t.M10]+r[t.M32]*s[t.M20]+r[t.M33]*s[t.M30];i[t.M31]=r[t.M30]*s[t.M01]+r[t.M31]*s[t.M11]+r[t.M32]*s[t.M21]+r[t.M33]*s[t.M31];i[t.M32]=r[t.M30]*s[t.M02]+r[t.M31]*s[t.M12]+r[t.M32]*s[t.M22]+r[t.M33]*s[t.M32];i[t.M33]=r[t.M30]*s[t.M03]+r[t.M31]*s[t.M13]+r[t.M32]*s[t.M23]+r[t.M33]*s[t.M33];return this.set(this.temp)}multiplyLeft(e){let i=this.temp;let r=this.values;let s=e.values;i[t.M00]=s[t.M00]*r[t.M00]+s[t.M01]*r[t.M10]+s[t.M02]*r[t.M20]+s[t.M03]*r[t.M30];i[t.M01]=s[t.M00]*r[t.M01]+s[t.M01]*r[t.M11]+s[t.M02]*r[t.M21]+s[t.M03]*r[t.M31];i[t.M02]=s[t.M00]*r[t.M02]+s[t.M01]*r[t.M12]+s[t.M02]*r[t.M22]+s[t.M03]*r[t.M32];i[t.M03]=s[t.M00]*r[t.M03]+s[t.M01]*r[t.M13]+s[t.M02]*r[t.M23]+s[t.M03]*r[t.M33];i[t.M10]=s[t.M10]*r[t.M00]+s[t.M11]*r[t.M10]+s[t.M12]*r[t.M20]+s[t.M13]*r[t.M30];i[t.M11]=s[t.M10]*r[t.M01]+s[t.M11]*r[t.M11]+s[t.M12]*r[t.M21]+s[t.M13]*r[t.M31];i[t.M12]=s[t.M10]*r[t.M02]+s[t.M11]*r[t.M12]+s[t.M12]*r[t.M22]+s[t.M13]*r[t.M32];i[t.M13]=s[t.M10]*r[t.M03]+s[t.M11]*r[t.M13]+s[t.M12]*r[t.M23]+s[t.M13]*r[t.M33];i[t.M20]=s[t.M20]*r[t.M00]+s[t.M21]*r[t.M10]+s[t.M22]*r[t.M20]+s[t.M23]*r[t.M30];i[t.M21]=s[t.M20]*r[t.M01]+s[t.M21]*r[t.M11]+s[t.M22]*r[t.M21]+s[t.M23]*r[t.M31];i[t.M22]=s[t.M20]*r[t.M02]+s[t.M21]*r[t.M12]+s[t.M22]*r[t.M22]+s[t.M23]*r[t.M32];i[t.M23]=s[t.M20]*r[t.M03]+s[t.M21]*r[t.M13]+s[t.M22]*r[t.M23]+s[t.M23]*r[t.M33];i[t.M30]=s[t.M30]*r[t.M00]+s[t.M31]*r[t.M10]+s[t.M32]*r[t.M20]+s[t.M33]*r[t.M30];i[t.M31]=s[t.M30]*r[t.M01]+s[t.M31]*r[t.M11]+s[t.M32]*r[t.M21]+s[t.M33]*r[t.M31];i[t.M32]=s[t.M30]*r[t.M02]+s[t.M31]*r[t.M12]+s[t.M32]*r[t.M22]+s[t.M33]*r[t.M32];i[t.M33]=s[t.M30]*r[t.M03]+s[t.M31]*r[t.M13]+s[t.M32]*r[t.M23]+s[t.M33]*r[t.M33];return this.set(this.temp)}lookAt(i,r,s){e.initTemps();let n=e.xAxis,a=e.yAxis,l=e.zAxis;l.setFrom(r).normalize();n.setFrom(r).normalize();n.cross(s).normalize();a.setFrom(n).cross(l).normalize();this.identity();let o=this.values;o[t.M00]=n.x;o[t.M01]=n.y;o[t.M02]=n.z;o[t.M10]=a.x;o[t.M11]=a.y;o[t.M12]=a.z;o[t.M20]=-l.x;o[t.M21]=-l.y;o[t.M22]=-l.z;e.tmpMatrix.identity();e.tmpMatrix.values[t.M03]=-i.x;e.tmpMatrix.values[t.M13]=-i.y;e.tmpMatrix.values[t.M23]=-i.z;this.multiply(e.tmpMatrix);return this}static initTemps(){if(e.xAxis===null){e.xAxis=new t.Vector3}if(e.yAxis===null){e.yAxis=new t.Vector3}if(e.zAxis===null){e.zAxis=new t.Vector3}}}e.xAxis=null;e.yAxis=null;e.zAxis=null;e.tmpMatrix=new e;t.Matrix4=e})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(e){this.logo=null;this.spinner=null;this.angle=0;this.fadeOut=0;this.timeKeeper=new t.TimeKeeper;this.backgroundColor=new t.Color(.135,.135,.135,1);this.tempColor=new t.Color;this.firstDraw=0;this.renderer=e;this.timeKeeper.maxDelta=9;if(i.logoImg===null){let t=navigator.userAgent.indexOf("Safari")>-1;i.logoImg=new Image;i.logoImg.src=i.SPINE_LOGO_DATA;if(!t){i.logoImg.crossOrigin="anonymous"}i.logoImg.onload=(t=>{i.loaded++});i.spinnerImg=new Image;i.spinnerImg.src=i.SPINNER_DATA;if(!t){i.spinnerImg.crossOrigin="anonymous"}i.spinnerImg.onload=(t=>{i.loaded++})}}draw(t=false){if(t&&this.fadeOut>i.FADE_SECONDS){return}this.timeKeeper.update();let r=Math.abs(Math.sin(this.timeKeeper.totalTime+.75));this.angle-=this.timeKeeper.delta*360*(1+1.5*Math.pow(r,5));let s=this.renderer;let n=s.canvas;let a=s.context.gl;let l=s.camera.position.x,o=s.camera.position.y;s.camera.position.set(n.width/2,n.height/2,0);s.camera.viewportWidth=n.width;s.camera.viewportHeight=n.height;s.resize(e.ResizeMode.Stretch);if(!t){a.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a);a.clear(a.COLOR_BUFFER_BIT);this.tempColor.a=1}else{this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1);if(this.fadeOut>i.FADE_SECONDS){s.camera.position.set(l,o,0);return}r=1-this.fadeOut/i.FADE_SECONDS;this.tempColor.setFromColor(this.backgroundColor);this.tempColor.a=1-(r-1)*(r-1);s.begin();s.quad(true,0,0,n.width,0,n.width,n.height,0,n.height,this.tempColor,this.tempColor,this.tempColor,this.tempColor);s.end()}this.tempColor.set(1,1,1,this.tempColor.a);if(i.loaded!=2){return}if(this.logo===null){this.logo=new e.GLTexture(s.context,i.logoImg);this.spinner=new e.GLTexture(s.context,i.spinnerImg)}this.logo.update(false);this.spinner.update(false);let h=this.logo.getImage().width;let u=this.logo.getImage().height;let c=this.spinner.getImage().width;let d=this.spinner.getImage().height;s.batcher.setBlendMode(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);s.begin();s.drawTexture(this.logo,(n.width-h)/2,(n.height-u)/2,h,u,this.tempColor);s.drawTextureRotated(this.spinner,(n.width-c)/2,(n.height-d)/2,c,d,c/2,d/2,this.angle,this.tempColor);s.end();s.camera.position.set(l,o,0)}}i.FADE_SECONDS=1;i.loaded=0;i.spinnerImg=null;i.logoImg=null;i.SPINNER_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAChCAMAAAB3TUS6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYNQTFRFAAAA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AA/0AAkTDRyAAAAIB0Uk5TAAABAgMEBQYHCAkKCwwODxAREhMUFRYXGBkaHB0eICEiIyQlJicoKSorLC0uLzAxMjM0Nzg5Ojs8PT4/QEFDRUlKS0xNTk9QUlRWWFlbXF1eYWJjZmhscHF0d3h5e3x+f4CIiYuMj5GSlJWXm56io6arr7rAxcjO0dXe6Onr8fmb5sOOAAADuElEQVQYGe3B+3vTVBwH4M/3nCRt13br2Lozhug2q25gYQubcxqVKYoMCYoKjEsUdSpeiBc0Kl7yp9t2za39pely7PF5zvuiQKc+/e2f8K+f9g2oyQ77Ag4VGX+HketQ0XYYe0JQ0CdhogwF+WFiBgr6JkxUoKCDMMGgoP0w9gdUtB3GfoCKVsPYAVQ0H8YuQUWVMHYGKuJhrAklPQkjJpT0bdj3O9S0FfZ9ADXxP8MjVSiqFfa8B2VVV8+df14QtB4iwn+BpuZEgyM38WMQHDYhnbkgukrIh5ygZ48glyn6KshlL+jbhVRcxCzk0ApiC5CI5kVsgTAy9jiI/WxBGmqIFBMjqwYphwRZaiLNwsjqQdoVSFISGRwjM4OMFUjBRcYCYWT0XZD2SwUS0LzIKCGH2SDja0LxKiJjCrm0gowVFI6aIs1CTouPg5QvUTgSKXMMuVUeBSmEopFITBPGwO8HCYbCTYtImTAWejuI3CMUjmZFT5NjbM/9GvQcMkhADdFRIxxD7aug4wGDFGSVTcLx0MzutQ2CpmmapmmapmmapmmapmmaphWBmGFV6rNNcaLC0GUuv3LROftUo8wJk0a10207sVED6IIf+9673LIwQeW2PaCEJX/A+xYmhTbtQUu46g96SJgQZg9Zwxf+EAMTwuwhm3jkD7EwIdweBn+YhQlh9pA2HvpDTEwIs4es4GN/CMekNOxBJ9D2B10nTAyfW7fT1hjYgZ/xYIUwUcycaiwuv2h3tOcZADr7ud/12c0ru2cWSwQ1UAcixIgImqZpmqZpmqZpmqZpmqZp2v8HMSIcF186t8oghbnlOJt1wnHwl7yOGxwSlHacrjWG8dVuej03OApn7jhHtiyMiZa9yD6haLYTebWOsbDXvQRHwchJWSTkV/rQS+EoWttJaTHkJe56KXcJRZt20jY48nnBy9hE4WjLSbvAkIfwMm5zFG/KyWgRRke3vYwGZDjpZHCMruJltCAFrTtpVYxu1ktzCHKwbSdlGqOreynXGGQpOylljI5uebFbBuSZc2IbhBxmvcj9GiSiZ52+HQO5nPb6TkIqajs9L5eQk7jnddxZgGT0jNOxYSI36+Kdj9oG5OPV6QpB6yJuGAYnqIrecLveYlDUKffIOtREl90+BiWV3cgMlNR0I09DSS030oaSttzILpT0phu5BBWRmyAoiLkJgoIMN8GgoJKb4FBQzU0YUFDdTRhQUNVNcCjIdBMEBdE7buQ8lFRz+97lUFN5fe+qu//aMkeB/gU2ae9y2HgbngAAAABJRU5ErkJggg==";i.SPINE_LOGO_DATA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAZCAYAAACis3k0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtNJREFUaN7tmT2I1EAUxwN+oWgRT0HFKo0WCkJ6ObmAWFwZbCxsXGysLNJaiCyIoDaSwk4ETzvhmnBaCRbBWoQ01ho4PwotjP8cE337mMy8TLK757mBH3fLTWbe/PbN53neNniqZW8FvAVvQAqugwvgDDgO9niLRyTyJagM/ACPF6bsIl9ZRDac/Cc6tLn5xQdRQ496QlKPLxD5QCDxO9jtGM8QfYoIgUlgCipGCRJL5VvlyOdCU09iEXkCfLSIfCrs7Fab6nOsiafu06iDwES9w/uU1QnDC+ekkVS9vEaDsgVeB0d+z1VDtOGxRaYPboP3Gokb4GgXkZp4chZPJKgvZ3U0XkriK/TIt9YUDllFgTAjGwoaoHqfBhMI58yD4BQ4V6/aHYdfxToftvw9F2SiVroawU2/Cv5C4Thv0KB9S5nxlOd4STxjwUjzSdYlgrYijw2BsEfgsaFcM09lhiys94xXQQwugcvgJrgFLjrEE7WUiTuWCQzt/ZXN7FfqGwuGClyVy2xZAFmfDQvNtwFFSspMDGsD+UTWqu1KoVmVooFEJgKRXw0if85RpISEzwsjzeqWzkjkC4PIJ3MUmQgITAHlQwTFhnZhELkEntfZRwR+AvfAgXmJHOqU02XligWT8ppg67NXbdCXeq7afUQ6L8C2DalEZNt2YyQ94Qy8/ekjMpBMbfyl5iTjG7YAI8cNecROAb4kJmTjaXAF3AGvwQewOiuRxEtlSaT4j2h2lMsUueQEoMlIKpTvAmKhxPMtC876jEX6rE8l8TNx/KVbn6xlWU9NWcSDUsO4NGWpQOTZFpHPOooMXcswmW2XFk3ixb2v0Nq+XVKP00QNaffBLyWwBI/AkTlfMYZDXMf12kc6yjwEjoFdO/5me5oi/6tnyhlZX6OtgmX1c2Uh0k3khmbB2b9TRfpd/jfTUeRDJvHdYg5wE7kPXAN3wQ1weDvH+xufEgpi5qIl3QAAAABJRU5ErkJggg==";e.LoadingScreen=i})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(e){this.lastX=0;this.lastY=0;this.buttonDown=false;this.currTouch=null;this.touchesPool=new t.Pool(()=>{return new t.webgl.Touch(0,0,0)});this.listeners=new Array;this.element=e;this.setupCallbacks(e)}setupCallbacks(t){t.addEventListener("mousedown",e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();let r=e.clientX-i.left;let s=e.clientY-i.top;let n=this.listeners;for(let t=0;t<n.length;t++){n[t].down(r,s)}this.lastX=r;this.lastY=s;this.buttonDown=true}},true);t.addEventListener("mousemove",e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();let r=e.clientX-i.left;let s=e.clientY-i.top;let n=this.listeners;for(let t=0;t<n.length;t++){if(this.buttonDown){n[t].dragged(r,s)}else{n[t].moved(r,s)}}this.lastX=r;this.lastY=s}},true);t.addEventListener("mouseup",e=>{if(e instanceof MouseEvent){let i=t.getBoundingClientRect();let r=e.clientX-i.left;let s=e.clientY-i.top;let n=this.listeners;for(let t=0;t<n.length;t++){n[t].up(r,s)}this.lastX=r;this.lastY=s;this.buttonDown=false}},true);t.addEventListener("touchstart",e=>{if(this.currTouch!=null){return}var i=e.changedTouches;for(var r=0;r<i.length;r++){var s=i[r];let e=t.getBoundingClientRect();let n=s.clientX-e.left;let a=s.clientY-e.top;this.currTouch=this.touchesPool.obtain();this.currTouch.identifier=s.identifier;this.currTouch.x=n;this.currTouch.y=a;break}let n=this.listeners;for(let t=0;t<n.length;t++){n[t].down(this.currTouch.x,this.currTouch.y)}this.lastX=this.currTouch.x;this.lastY=this.currTouch.y;this.buttonDown=true;e.preventDefault()},false);t.addEventListener("touchend",e=>{var i=e.changedTouches;for(var r=0;r<i.length;r++){var s=i[r];if(this.currTouch.identifier===s.identifier){let e=t.getBoundingClientRect();let i=this.currTouch.x=s.clientX-e.left;let r=this.currTouch.y=s.clientY-e.top;this.touchesPool.free(this.currTouch);let n=this.listeners;for(let t=0;t<n.length;t++){n[t].up(i,r)}this.lastX=i;this.lastY=r;this.buttonDown=false;this.currTouch=null;break}}e.preventDefault()},false);t.addEventListener("touchcancel",e=>{var i=e.changedTouches;for(var r=0;r<i.length;r++){var s=i[r];if(this.currTouch.identifier===s.identifier){let e=t.getBoundingClientRect();let i=this.currTouch.x=s.clientX-e.left;let r=this.currTouch.y=s.clientY-e.top;this.touchesPool.free(this.currTouch);let n=this.listeners;for(let t=0;t<n.length;t++){n[t].up(i,r)}this.lastX=i;this.lastY=r;this.buttonDown=false;this.currTouch=null;break}}e.preventDefault()},false);t.addEventListener("touchmove",e=>{if(this.currTouch==null){return}var i=e.changedTouches;for(var r=0;r<i.length;r++){var s=i[r];if(this.currTouch.identifier===s.identifier){let e=t.getBoundingClientRect();let i=s.clientX-e.left;let r=s.clientY-e.top;let n=this.listeners;for(let t=0;t<n.length;t++){n[t].dragged(i,r)}"Drag "+i+", "+r;this.lastX=this.currTouch.x=i;this.lastY=this.currTouch.y=r;break}}e.preventDefault()},false)}addListener(t){this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);if(e>-1){this.listeners.splice(e,1)}}}e.Input=i;class r{constructor(t,e,i){this.identifier=t;this.x=e;this.y=i}}e.Touch=r})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(e,i){this.position=new t.Vector3(0,0,0);this.direction=new t.Vector3(0,0,-1);this.up=new t.Vector3(0,1,0);this.near=0;this.far=100;this.zoom=1;this.viewportWidth=0;this.viewportHeight=0;this.projectionView=new t.Matrix4;this.inverseProjectionView=new t.Matrix4;this.projection=new t.Matrix4;this.view=new t.Matrix4;this.tmp=new t.Vector3;this.viewportWidth=e;this.viewportHeight=i;this.update()}update(){let t=this.projection;let e=this.view;let i=this.projectionView;let r=this.inverseProjectionView;let s=this.zoom,n=this.viewportWidth,a=this.viewportHeight;t.ortho(s*(-n/2),s*(n/2),s*(-a/2),s*(a/2),this.near,this.far);e.lookAt(this.position,this.direction,this.up);i.set(t.values);i.multiply(e);r.set(i.values).invert()}screenToWorld(t,e,i){let r=t.x,s=i-t.y-1;let n=this.tmp;n.x=2*r/e-1;n.y=2*s/i-1;n.z=2*t.z-1;n.project(this.inverseProjectionView);t.set(n.x,n.y,n.z);return t}setViewport(t,e){this.viewportWidth=t;this.viewportHeight=e}}t.OrthoCamera=e})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(){this.convexPolygons=new Array;this.convexPolygonsIndices=new Array;this.indicesArray=new Array;this.isConcaveArray=new Array;this.triangles=new Array;this.polygonPool=new t.Pool(()=>{return new Array});this.polygonIndicesPool=new t.Pool(()=>{return new Array})}triangulate(t){let i=t;let r=t.length>>1;let s=this.indicesArray;s.length=0;for(let t=0;t<r;t++){s[t]=t}let n=this.isConcaveArray;n.length=0;for(let t=0,a=r;t<a;++t){n[t]=e.isConcave(t,r,i,s)}let a=this.triangles;a.length=0;while(r>3){let t=r-1,l=0,o=1;while(true){t:if(!n[l]){let a=s[t]<<1,h=s[l]<<1,u=s[o]<<1;let c=i[a],d=i[a+1];let f=i[h],p=i[h+1];let g=i[u],m=i[u+1];for(let a=(o+1)%r;a!=t;a=(a+1)%r){if(!n[a]){continue}let t=s[a]<<1;let r=i[t],l=i[t+1];if(e.positiveArea(g,m,c,d,r,l)){if(e.positiveArea(c,d,f,p,r,l)){if(e.positiveArea(f,p,g,m,r,l)){break t}}}}break}if(o==0){do{if(!n[l]){break}l--}while(l>0);break}t=l;l=o;o=(o+1)%r}a.push(s[(r+l-1)%r]);a.push(s[l]);a.push(s[(l+1)%r]);s.splice(l,1);n.splice(l,1);r--;let h=(r+l-1)%r;let u=l==r?0:l;n[h]=e.isConcave(h,r,i,s);n[u]=e.isConcave(u,r,i,s)}if(r==3){a.push(s[2]);a.push(s[0]);a.push(s[1])}return a}decompose(t,i){let r=t;let s=this.convexPolygons;this.polygonPool.freeAll(s);s.length=0;let n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n);n.length=0;let a=this.polygonIndicesPool.obtain();a.length=0;let l=this.polygonPool.obtain();l.length=0;let o=-1,h=0;for(let t=0,u=i.length;t<u;t+=3){let u=i[t]<<1,c=i[t+1]<<1,d=i[t+2]<<1;let f=r[u],p=r[u+1];let g=r[c],m=r[c+1];let _=r[d],M=r[d+1];let y=false;if(o==u){let t=l.length-4;let i=e.winding(l[t],l[t+1],l[t+2],l[t+3],_,M);let r=e.winding(_,M,l[0],l[1],l[2],l[3]);if(i==h&&r==h){l.push(_);l.push(M);a.push(d);y=true}}if(!y){if(l.length>0){s.push(l);n.push(a)}else{this.polygonPool.free(l);this.polygonIndicesPool.free(a)}l=this.polygonPool.obtain();l.length=0;l.push(f);l.push(p);l.push(g);l.push(m);l.push(_);l.push(M);a=this.polygonIndicesPool.obtain();a.length=0;a.push(u);a.push(c);a.push(d);h=e.winding(f,p,g,m,_,M);o=u}}if(l.length>0){s.push(l);n.push(a)}for(let t=0,i=s.length;t<i;t++){a=n[t];if(a.length==0){continue}let r=a[0];let o=a[a.length-1];l=s[t];let h=l.length-4;let u=l[h],c=l[h+1];let d=l[h+2],f=l[h+3];let p=l[0],g=l[1];let m=l[2],_=l[3];let M=e.winding(u,c,d,f,p,g);for(let h=0;h<i;h++){if(h==t){continue}let i=n[h];if(i.length!=3){continue}let y=i[0];let w=i[1];let v=i[2];let E=s[h];let T=E[E.length-2],A=E[E.length-1];if(y!=r||w!=o){continue}let x=e.winding(u,c,d,f,T,A);let b=e.winding(T,A,p,g,m,_);if(x==M&&b==M){E.length=0;i.length=0;l.push(T);l.push(A);a.push(v);u=d;c=f;d=T;f=A;h=0}}}for(let t=s.length-1;t>=0;t--){l=s[t];if(l.length==0){s.splice(t,1);this.polygonPool.free(l);a=n[t];n.splice(t,1);this.polygonIndicesPool.free(a)}}return s}static isConcave(t,e,i,r){let s=r[(e+t-1)%e]<<1;let n=r[t]<<1;let a=r[(t+1)%e]<<1;return!this.positiveArea(i[s],i[s+1],i[n],i[n+1],i[a],i[a+1])}static positiveArea(t,e,i,r,s,n){return t*(n-r)+i*(e-n)+s*(r-e)>=0}static winding(t,e,i,r,s,n){let a=i-t,l=r-e;return s*l-n*a+a*e-t*l>=0?1:-1}}t.Triangulator=e})(spine||(spine={}));var spine;(function(t){class e{constructor(e,i,r){this.color=new t.Color(1,1,1,1);if(e<0){throw new Error("index must be >= 0.")}if(i==null){throw new Error("name cannot be null.")}if(r==null){throw new Error("boneData cannot be null.")}this.index=e;this.name=i;this.boneData=r}}t.SlotData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(e,i){this.attachmentVertices=new Array;if(e==null){throw new Error("data cannot be null.")}if(i==null){throw new Error("bone cannot be null.")}this.data=e;this.bone=i;this.color=new t.Color;this.darkColor=e.darkColor==null?null:new t.Color;this.setToSetupPose()}getAttachment(){return this.attachment}setAttachment(t){if(this.attachment==t){return}this.attachment=t;this.attachmentTime=this.bone.skeleton.time;this.attachmentVertices.length=0}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color);if(this.darkColor!=null){this.darkColor.setFromColor(this.data.darkColor)}if(this.data.attachmentName==null){this.attachment=null}else{this.attachment=null;this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))}}}t.Slot=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.attachments=new Array;if(t==null){throw new Error("name cannot be null.")}this.name=t}addAttachment(t,e,i){if(i==null){throw new Error("attachment cannot be null.")}let r=this.attachments;if(t>=r.length){r.length=t+1}if(!r[t]){r[t]={}}r[t][e]=i}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}attachAll(t,e){let i=0;for(let r=0;r<t.slots.length;r++){let s=t.slots[r];let n=s.getAttachment();if(n&&i<e.attachments.length){let t=e.attachments[i];for(let e in t){let r=t[e];if(n==r){let t=this.getAttachment(i,e);if(t!=null){s.setAttachment(t)}break}}}i++}}}t.Skin=e})(spine||(spine={}));var spine;(function(t){let e;(function(t){t[t["Normal"]=0]="Normal";t[t["Additive"]=1]="Additive";t[t["Multiply"]=2]="Multiply";t[t["Screen"]=3]="Screen"})(e=t.BlendMode||(t.BlendMode={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(e,r,s){this.x=0;this.y=0;this.rotation=0;this.scaleX=1;this.scaleY=1;this.shearX=0;this.shearY=0;this.transformMode=i.Normal;this.color=new t.Color;if(e<0){throw new Error("index must be >= 0.")}if(r==null){throw new Error("name cannot be null.")}this.index=e;this.name=r;this.parent=s}}t.BoneData=e;let i;(function(t){t[t["Normal"]=0]="Normal";t[t["OnlyTranslation"]=1]="OnlyTranslation";t[t["NoRotationOrReflection"]=2]="NoRotationOrReflection";t[t["NoScale"]=3]="NoScale";t[t["NoScaleOrReflection"]=4]="NoScaleOrReflection"})(i=t.TransformMode||(t.TransformMode={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.order=0;this.bones=new Array;this.name=t}}t.PathConstraintData=e;let i;(function(t){t[t["Fixed"]=0]="Fixed";t[t["Percent"]=1]="Percent"})(i=t.PositionMode||(t.PositionMode={}));let r;(function(t){t[t["Length"]=0]="Length";t[t["Fixed"]=1]="Fixed";t[t["Percent"]=2]="Percent"})(r=t.SpacingMode||(t.SpacingMode={}));let s;(function(t){t[t["Tangent"]=0]="Tangent";t[t["Chain"]=1]="Chain";t[t["ChainScale"]=2]="ChainScale"})(s=t.RotateMode||(t.RotateMode={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.scale=1;this.linkedMeshes=new Array;this.attachmentLoader=t}readSkeletonData(i){let r=this.scale;let s=new t.SkeletonData;let n=typeof i==="string"?JSON.parse(i):i;let a=n.skeleton;if(a!=null){s.hash=a.hash;s.version=a.spine;s.width=a.width;s.height=a.height;s.fps=a.fps;s.imagesPath=a.images}if(n.bones){for(let i=0;i<n.bones.length;i++){let a=n.bones[i];let l=null;let o=this.getValue(a,"parent",null);if(o!=null){l=s.findBone(o);if(l==null){throw new Error("Parent bone not found: "+o)}}let h=new t.BoneData(s.bones.length,a.name,l);h.length=this.getValue(a,"length",0)*r*1;h.x=this.getValue(a,"x",0)*r*1;h.y=this.getValue(a,"y",0)*r*1;h.rotation=this.getValue(a,"rotation",0)*1;h.scaleX=this.getValue(a,"scaleX",1)*1;h.scaleY=this.getValue(a,"scaleY",1)*1;h.shearX=this.getValue(a,"shearX",0)*1;h.shearY=this.getValue(a,"shearY",0)*1;h.transformMode=e.transformModeFromString(this.getValue(a,"transform","normal"));s.bones.push(h)}}if(n.slots){for(let i=0;i<n.slots.length;i++){let r=n.slots[i];let a=r.name;let l=r.bone;let o=s.findBone(l);if(o==null){throw new Error("Slot bone not found: "+l)}let h=new t.SlotData(s.slots.length,a,o);let u=this.getValue(r,"color",null);if(u!=null){h.color.setFromString(u)}let c=this.getValue(r,"dark",null);if(c!=null){h.darkColor=new t.Color(1,1,1,1);h.darkColor.setFromString(c)}h.attachmentName=this.getValue(r,"attachment",null);h.blendMode=e.blendModeFromString(this.getValue(r,"blend","normal"));s.slots.push(h)}}if(n.ik){for(let e=0;e<n.ik.length;e++){let i=n.ik[e];let r=new t.IkConstraintData(i.name);r.order=this.getValue(i,"order",0);for(let t=0;t<i.bones.length;t++){let e=i.bones[t];let n=s.findBone(e);if(n==null){throw new Error("IK bone not found: "+e)}r.bones.push(n)}let a=i.target;r.target=s.findBone(a);if(r.target==null){throw new Error("IK target bone not found: "+a)}r.bendDirection=this.getValue(i,"bendPositive",true)?1:-1;r.mix=this.getValue(i,"mix",1);s.ikConstraints.push(r)}}if(n.transform){for(let e=0;e<n.transform.length;e++){let i=n.transform[e];let a=new t.TransformConstraintData(i.name);a.order=this.getValue(i,"order",0);for(let t=0;t<i.bones.length;t++){let e=i.bones[t];let r=s.findBone(e);if(r==null){throw new Error("Transform constraint bone not found: "+e)}a.bones.push(r)}let l=i.target;a.target=s.findBone(l);if(a.target==null){throw new Error("Transform constraint target bone not found: "+l)}a.local=this.getValue(i,"local",false);a.relative=this.getValue(i,"relative",false);a.offsetRotation=this.getValue(i,"rotation",0);a.offsetX=this.getValue(i,"x",0)*r;a.offsetY=this.getValue(i,"y",0)*r;a.offsetScaleX=this.getValue(i,"scaleX",0);a.offsetScaleY=this.getValue(i,"scaleY",0);a.offsetShearY=this.getValue(i,"shearY",0);a.rotateMix=this.getValue(i,"rotateMix",1);a.translateMix=this.getValue(i,"translateMix",1);a.scaleMix=this.getValue(i,"scaleMix",1);a.shearMix=this.getValue(i,"shearMix",1);s.transformConstraints.push(a)}}if(n.path){for(let i=0;i<n.path.length;i++){let a=n.path[i];let l=new t.PathConstraintData(a.name);l.order=this.getValue(a,"order",0);for(let t=0;t<a.bones.length;t++){let e=a.bones[t];let i=s.findBone(e);if(i==null){throw new Error("Transform constraint bone not found: "+e)}l.bones.push(i)}let o=a.target;l.target=s.findSlot(o);if(l.target==null){throw new Error("Path target slot not found: "+o)}l.positionMode=e.positionModeFromString(this.getValue(a,"positionMode","percent"));l.spacingMode=e.spacingModeFromString(this.getValue(a,"spacingMode","length"));l.rotateMode=e.rotateModeFromString(this.getValue(a,"rotateMode","tangent"));l.offsetRotation=this.getValue(a,"rotation",0);l.position=this.getValue(a,"position",0);if(l.positionMode==t.PositionMode.Fixed){l.position*=r}l.spacing=this.getValue(a,"spacing",0);if(l.spacingMode==t.SpacingMode.Length||l.spacingMode==t.SpacingMode.Fixed){l.spacing*=r}l.rotateMix=this.getValue(a,"rotateMix",1);l.translateMix=this.getValue(a,"translateMix",1);s.pathConstraints.push(l)}}if(n.skins){for(let e in n.skins){let i=n.skins[e];let r=new t.Skin(e);for(let t in i){let e=s.findSlotIndex(t);if(e==-1){throw new Error("Slot not found: "+t)}let n=i[t];for(let t in n){let i=this.readAttachment(n[t],r,e,t,s);if(i!=null){r.addAttachment(e,t,i)}}}s.skins.push(r);if(r.name=="default"){s.defaultSkin=r}}}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t];let i=e.skin==null?s.defaultSkin:s.findSkin(e.skin);if(i==null){throw new Error("Skin not found: "+e.skin)}let r=i.getAttachment(e.slotIndex,e.parent);if(r==null){throw new Error("Parent mesh not found: "+e.parent)}e.mesh.setParentMesh(r);e.mesh.updateUVs()}this.linkedMeshes.length=0;if(n.events){for(let e in n.events){let i=n.events[e];let r=new t.EventData(e);r.intValue=this.getValue(i,"int",0);r.floatValue=this.getValue(i,"float",0);r.stringValue=this.getValue(i,"string","");s.events.push(r)}}if(n.animations){for(let t in n.animations){let e=n.animations[t];this.readAnimation(e,t,s)}}return s}readAttachment(e,r,s,n,a){let l=this.scale;n=this.getValue(e,"name",n);let o=this.getValue(e,"type","region");switch(o){case"region":{let t=this.getValue(e,"path",n);let i=this.attachmentLoader.newRegionAttachment(r,n,t);if(i==null){return null}i.path=t;i.x=this.getValue(e,"x",0)*l;i.y=this.getValue(e,"y",0)*l;i.scaleX=this.getValue(e,"scaleX",1);i.scaleY=this.getValue(e,"scaleY",1);i.rotation=this.getValue(e,"rotation",0);i.width=e.width*l;i.height=e.height*l;let s=this.getValue(e,"color",null);i.updateOffset();return i}case"boundingbox":{let t=this.attachmentLoader.newBoundingBoxAttachment(r,n);if(t==null){return null}this.readVertices(e,t,e.vertexCount<<1);let i=this.getValue(e,"color",null);if(i!=null){t.color.setFromString(i)}return t}case"mesh":case"linkedmesh":{let t=this.getValue(e,"path",n);let a=this.attachmentLoader.newMeshAttachment(r,n,t);if(a==null){return null}a.path=t;let l=this.getValue(e,"color",null);if(l!=null){a.color.setFromString(l)}let o=this.getValue(e,"parent",null);if(o!=null){a.inheritDeform=this.getValue(e,"deform",true);this.linkedMeshes.push(new i(a,this.getValue(e,"skin",null),s,o));return a}let h=e.uvs;this.readVertices(e,a,h.length);a.triangles=e.triangles;a.regionUVs=h;a.updateUVs();a.hullLength=this.getValue(e,"hull",0)*2;return a}case"path":{let i=this.attachmentLoader.newPathAttachment(r,n);if(i==null){return null}i.closed=this.getValue(e,"closed",false);i.constantSpeed=this.getValue(e,"constantSpeed",true);let s=e.vertexCount;this.readVertices(e,i,s<<1);let a=t.Utils.newArray(s/3,0);for(let t=0;t<e.lengths.length;t++){a[t]=e.lengths[t]*l}i.lengths=a;let o=this.getValue(e,"color",null);if(o!=null){i.color.setFromString(o)}return i}case"point":{let t=this.attachmentLoader.newPointAttachment(r,n);if(t==null){return null}t.x=this.getValue(e,"x",0)*l;t.y=this.getValue(e,"y",0)*l;t.rotation=this.getValue(e,"rotation",0);let i=this.getValue(e,"color",null);if(i!=null){t.color.setFromString(i)}return t}case"clipping":{let t=this.attachmentLoader.newClippingAttachment(r,n);if(t==null){return null}let i=this.getValue(e,"end",null);if(i!=null){let e=a.findSlot(i);if(e==null){throw new Error("Clipping end slot not found: "+i)}t.endSlot=e}let s=e.vertexCount;this.readVertices(e,t,s<<1);let l=this.getValue(e,"color",null);if(l!=null){t.color.setFromString(l)}return t}}return null}readVertices(e,i,r){let s=this.scale;i.worldVerticesLength=r;let n=e.vertices;if(r==n.length){let e=t.Utils.toFloatArray(n);if(s!=1){for(let t=0,i=n.length;t<i;t++){e[t]*=s}}i.vertices=e;return}let a=new Array;let l=new Array;for(let t=0,e=n.length;t<e;){let e=n[t++];l.push(e);for(let i=t+e*4;t<i;t+=4){l.push(n[t]);a.push(n[t+1]*s);a.push(n[t+2]*s);a.push(n[t+3])}}i.bones=l;i.vertices=t.Utils.toFloatArray(a)}readAnimation(e,i,r){let s=this.scale;let n=new Array;let a=0;if(e.slots){for(let i in e.slots){let s=e.slots[i];let l=r.findSlotIndex(i);if(l==-1){throw new Error("Slot not found: "+i)}for(let e in s){let r=s[e];if(e=="attachment"){let e=new t.AttachmentTimeline(r.length);e.slotIndex=l;let i=0;for(let t=0;t<r.length;t++){let s=r[t];e.setFrame(i++,s.time,s.name)}n.push(e);a=Math.max(a,e.frames[e.getFrameCount()-1])}else if(e=="color"){let e=new t.ColorTimeline(r.length);e.slotIndex=l;let i=0;for(let s=0;s<r.length;s++){let n=r[s];let a=new t.Color;a.setFromString(n.color);e.setFrame(i,n.time,a.r,a.g,a.b,a.a);this.readCurve(n,e,i);i++}n.push(e);a=Math.max(a,e.frames[(e.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else if(e=="twoColor"){let e=new t.TwoColorTimeline(r.length);e.slotIndex=l;let i=0;for(let s=0;s<r.length;s++){let n=r[s];let a=new t.Color;let l=new t.Color;a.setFromString(n.light);l.setFromString(n.dark);e.setFrame(i,n.time,a.r,a.g,a.b,a.a,l.r,l.g,l.b);this.readCurve(n,e,i);i++}n.push(e);a=Math.max(a,e.frames[(e.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}else{throw new Error("Invalid timeline type for a slot: "+e+" ("+i+")")}}}}if(e.bones){for(let i in e.bones){let l=e.bones[i];let o=r.findBoneIndex(i);if(o==-1){throw new Error("Bone not found: "+i)}for(let e in l){let r=l[e];if(e==="rotate"){let e=new t.RotateTimeline(r.length);e.boneIndex=o;let i=0;for(let t=0;t<r.length;t++){let s=r[t];e.setFrame(i,s.time,s.angle);this.readCurve(s,e,i);i++}n.push(e);a=Math.max(a,e.frames[(e.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else if(e==="translate"||e==="scale"||e==="shear"){let i=null;let l=1;if(e==="scale"){i=new t.ScaleTimeline(r.length)}else if(e==="shear"){i=new t.ShearTimeline(r.length)}else{i=new t.TranslateTimeline(r.length);l=s}i.boneIndex=o;let h=0;for(let t=0;t<r.length;t++){let e=r[t];let s=this.getValue(e,"x",0),n=this.getValue(e,"y",0);i.setFrame(h,e.time,s*l,n*l);this.readCurve(e,i,h);h++}n.push(i);a=Math.max(a,i.frames[(i.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}else{throw new Error("Invalid timeline type for a bone: "+e+" ("+i+")")}}}}if(e.ik){for(let i in e.ik){let s=e.ik[i];let l=r.findIkConstraint(i);let o=new t.IkConstraintTimeline(s.length);o.ikConstraintIndex=r.ikConstraints.indexOf(l);let h=0;for(let t=0;t<s.length;t++){let e=s[t];o.setFrame(h,e.time,this.getValue(e,"mix",1),this.getValue(e,"bendPositive",true)?1:-1);this.readCurve(e,o,h);h++}n.push(o);a=Math.max(a,o.frames[(o.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}}if(e.transform){for(let i in e.transform){let s=e.transform[i];let l=r.findTransformConstraint(i);let o=new t.TransformConstraintTimeline(s.length);o.transformConstraintIndex=r.transformConstraints.indexOf(l);let h=0;for(let t=0;t<s.length;t++){let e=s[t];o.setFrame(h,e.time,this.getValue(e,"rotateMix",1),this.getValue(e,"translateMix",1),this.getValue(e,"scaleMix",1),this.getValue(e,"shearMix",1));this.readCurve(e,o,h);h++}n.push(o);a=Math.max(a,o.frames[(o.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}}if(e.paths){for(let i in e.paths){let l=e.paths[i];let o=r.findPathConstraintIndex(i);if(o==-1){throw new Error("Path constraint not found: "+i)}let h=r.pathConstraints[o];for(let e in l){let i=l[e];if(e==="position"||e==="spacing"){let r=null;let l=1;if(e==="spacing"){r=new t.PathConstraintSpacingTimeline(i.length);if(h.spacingMode==t.SpacingMode.Length||h.spacingMode==t.SpacingMode.Fixed){l=s}}else{r=new t.PathConstraintPositionTimeline(i.length);if(h.positionMode==t.PositionMode.Fixed){l=s}}r.pathConstraintIndex=o;let u=0;for(let t=0;t<i.length;t++){let s=i[t];r.setFrame(u,s.time,this.getValue(s,e,0)*l);this.readCurve(s,r,u);u++}n.push(r);a=Math.max(a,r.frames[(r.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if(e==="mix"){let e=new t.PathConstraintMixTimeline(i.length);e.pathConstraintIndex=o;let r=0;for(let t=0;t<i.length;t++){let s=i[t];e.setFrame(r,s.time,this.getValue(s,"rotateMix",1),this.getValue(s,"translateMix",1));this.readCurve(s,e,r);r++}n.push(e);a=Math.max(a,e.frames[(e.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}}if(e.deform){for(let i in e.deform){let l=e.deform[i];let o=r.findSkin(i);if(o==null){throw new Error("Skin not found: "+i)}for(let e in l){let i=l[e];let h=r.findSlotIndex(e);if(h==-1){throw new Error("Slot not found: "+i.name)}for(let e in i){let r=i[e];let l=o.getAttachment(h,e);if(l==null){throw new Error("Deform attachment not found: "+r.name)}let u=l.bones!=null;let c=l.vertices;let d=u?c.length/3*2:c.length;let f=new t.DeformTimeline(r.length);f.slotIndex=h;f.attachment=l;let p=0;for(let e=0;e<r.length;e++){let i=r[e];let n;let a=this.getValue(i,"vertices",null);if(a==null){n=u?t.Utils.newFloatArray(d):c}else{n=t.Utils.newFloatArray(d);let e=this.getValue(i,"offset",0);t.Utils.arrayCopy(a,0,n,e,a.length);if(s!=1){for(let t=e,i=t+a.length;t<i;t++){n[t]*=s}}if(!u){for(let t=0;t<d;t++){n[t]+=c[t]}}}f.setFrame(p,i.time,n);this.readCurve(i,f,p);p++}n.push(f);a=Math.max(a,f.frames[f.getFrameCount()-1])}}}}let l=e.drawOrder;if(l==null){l=e.draworder}if(l!=null&&l.length>0){let e=new t.DrawOrderTimeline(l.length);let i=r.slots.length;let s=0;for(let n=0;n<l.length;n++){let a=l[n];let o=null;let h=this.getValue(a,"offsets",null);if(h!=null){o=t.Utils.newArray(i,-1);let e=t.Utils.newArray(i-h.length,0);let s=0,n=0;for(let t=0;t<h.length;t++){let i=h[t];let a=r.findSlotIndex(i.slot);if(a==-1){throw new Error("Slot not found: "+i.slot)}while(s!=a){e[n++]=s++}o[s+i.offset]=s++}while(s<i){e[n++]=s++}for(let t=i-1;t>=0;t--){if(o[t]==-1){o[t]=e[--n]}}}e.setFrame(s++,a.time,o)}n.push(e);a=Math.max(a,e.frames[e.getFrameCount()-1])}let o;if(e.events&&e.events.length>0){o=new t.EventTimeline(e.events.length);let i=0;for(let s=0;s<e.events.length;s++){let n=e.events[s];let a=r.findEvent(n.name);if(a==null){throw new Error("Event not found: "+n.name)}let l=new t.Event(t.Utils.toSinglePrecision(n.time),a);l.intValue=this.getValue(n,"int",a.intValue);l.floatValue=this.getValue(n,"float",a.floatValue);l.stringValue=this.getValue(n,"string",a.stringValue);o.setFrame(i++,l)}n.push(o);a=Math.max(a,o.frames[o.getFrameCount()-1])}if(isNaN(a)){throw new Error("Error while parsing animation, duration is NaN")}r.addAnimation(new t.Animation(i,n,a,o))}readCurve(t,e,i){if(!t.curve){return}if(t.curve==="stepped"){e.setStepped(i)}else if(Object.prototype.toString.call(t.curve)==="[object Array]"){let r=t.curve;e.setCurve(i,r[0],r[1],r[2],r[3])}}getValue(t,e,i){return t[e]!==undefined?t[e]:i}static blendModeFromString(e){if(typeof e=="string"){e=e.toString().toLowerCase();if(e=="normal"){return t.BlendMode.Normal}if(e=="additive"){return t.BlendMode.Additive}if(e=="multiply"){return t.BlendMode.Multiply}if(e=="screen"){return t.BlendMode.Screen}throw new Error(`Unknown blend mode: ${e}`)}else{if(e==0){return t.BlendMode.Normal}if(e==1){return t.BlendMode.Additive}if(e==2){return t.BlendMode.Multiply}if(e==3){return t.BlendMode.Screen}throw new Error(`Unknown blend mode: ${e}`)}}static positionModeFromString(e){if(typeof e=="string"){e=e.toString().toLowerCase();if(e=="fixed"){return t.PositionMode.Fixed}if(e=="percent"){return t.PositionMode.Percent}throw new Error(`Unknown position mode: ${e}`)}else{if(e==0){return t.PositionMode.Fixed}if(e==1){return t.PositionMode.Percent}throw new Error(`Unknown position mode: ${e}`)}}static spacingModeFromString(e){if(typeof e=="string"){e=e.toString().toLowerCase();if(e=="length"){return t.SpacingMode.Length}if(e=="fixed"){return t.SpacingMode.Fixed}if(e=="percent"){return t.SpacingMode.Percent}throw new Error(`Unknown position mode: ${e}`)}else{if(e==0){return t.SpacingMode.Length}if(e==1){return t.SpacingMode.Fixed}if(e==2){return t.SpacingMode.Percent}throw new Error(`Unknown position mode: ${e}`)}}static rotateModeFromString(e){if(typeof e=="string"){e=e.toString().toLowerCase();if(e=="tangent"){return t.RotateMode.Tangent}if(e=="chain"){return t.RotateMode.Chain}if(e=="chainscale"){return t.RotateMode.ChainScale}throw new Error(`Unknown rotate mode: ${e}`)}else{if(e==0){return t.RotateMode.Tangent}if(e==1){return t.RotateMode.Chain}if(e==2){return t.RotateMode.ChainScale}throw new Error(`Unknown rotate mode: ${e}`)}}static transformModeFromString(e){if(typeof e=="string"){e=e.toString().toLowerCase();if(e=="normal"){return t.TransformMode.Normal}if(e=="onlytranslation"){return t.TransformMode.OnlyTranslation}if(e=="norotationorreflection"){return t.TransformMode.NoRotationOrReflection}if(e=="noscale"){return t.TransformMode.NoScale}if(e=="noscaleorreflection"){return t.TransformMode.NoScaleOrReflection}throw new Error(`Unknown transform mode: ${e}`)}else{if(e==0){return t.TransformMode.Normal}if(e==1){return t.TransformMode.OnlyTranslation}if(e==2){return t.TransformMode.NoRotationOrReflection}if(e==3){return t.TransformMode.NoScale}if(e==4){return t.TransformMode.NoScaleOrReflection}throw new Error(`Unknown transform mode: ${e}`)}}}t.SkeletonJson=e;class i{constructor(t,e,i,r){this.mesh=t;this.skin=e;this.slotIndex=i;this.parent=r}}})(spine||(spine={}));var spine;(function(t){class e{constructor(){this.bones=new Array;this.slots=new Array;this.skins=new Array;this.events=new Array;this.animations=new Array;this.ikConstraints=new Array;this.transformConstraints=new Array;this.pathConstraints=new Array;this.animationsArr=[];this.fps=0;this.animationsMaps=new ds.StringMap}findBone(t){if(t==null){throw new Error("boneName cannot be null.")}let e=this.bones;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findBoneIndex(t){if(t==null){throw new Error("boneName cannot be null.")}let e=this.bones;for(let i=0,r=e.length;i<r;i++){if(e[i].name==t){return i}}return-1}findSlot(t){if(t==null){throw new Error("slotName cannot be null.")}let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findSlotIndex(t){if(t==null){throw new Error("slotName cannot be null.")}let e=this.slots;for(let i=0,r=e.length;i<r;i++){if(e[i].name==t){return i}}return-1}findSkin(t){if(t==null){throw new Error("skinName cannot be null.")}let e=this.skins;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findEvent(t){if(t==null){throw new Error("eventDataName cannot be null.")}let e=this.events;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findAnimation(t){if(t==null){throw new Error("animationName cannot be null.")}return this.animationsMaps.get(t)}findIkConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.ikConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findTransformConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.transformConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findPathConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.pathConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t){return r}}return null}findPathConstraintIndex(t){if(t==null){throw new Error("pathConstraintName cannot be null.")}let e=this.pathConstraints;for(let i=0,r=e.length;i<r;i++){if(e[i].name==t){return i}}return-1}addAnimation(t){this.animations.push(t);this.animationsMaps.put(t.name,t);this.animationsArr.push(t.name)}dispose(){this.bones.length=0;this.bones=null;this.slots.length=0;this.slots=null;this.skins.length=0;this.skins=null;this.events.length=0;this.events=null;this.animations.length=0;this.animations=null;this.ikConstraints.length=0;this.ikConstraints=null;this.transformConstraints.length=0;this.transformConstraints=null;this.pathConstraints.length=0;this.pathConstraints=null;this.animationsMaps.clear();this.animationsMaps=null;this.animationsArr.length=0;this.animationsArr=null}}t.SkeletonData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(e){this.triangulator=new t.Triangulator;this.clippingPolygon=new Array;this.clipOutput=new Array;this.clippedVertices=new Array;this.clippedTriangles=new Array;this.scratch=new Array;this._resName=e}clipStart(i,r){if(this.clipAttachment!=null){return 0}this.clipAttachment=r;let s=r.worldVerticesLength;let n=t.Utils.setArraySize(this.clippingPolygon,s);r.computeWorldVertices(i,0,s,n,0,2);let a=this.clippingPolygon;e.makeClockwise(a);let l=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a));for(let t=0,i=l.length;t<i;t++){let i=l[t];e.makeClockwise(i);i.push(i[0]);i.push(i[1])}return l.length}clipEndWithSlot(t){if(this.clipAttachment!=null&&this.clipAttachment.endSlot==t.data){this.clipEnd()}}clipEnd(){if(this.clipAttachment==null){return}this.clipAttachment=null;this.clippingPolygons=null;this.clippedVertices.length=0;this.clippedTriangles.length=0;this.clippingPolygon.length=0}isClipping(){if(t.FlypineSetting.isOpenClipping==false){return false}return this.clipAttachment!=null}clipTriangles(e,i,r,s,n,a,l,o){if(t.FlypineSetting.isOpenClipping==false){return}if(t.FlypineSetting.clipReturn){this.clippedVertices.length=0;this.clippedTriangles.length=0;return true}let h=this.clipOutput;let u=this.clippedVertices;let c=this.clippedTriangles;let d=this.clippingPolygons;let f=this.clippingPolygons.length;let p=o?12:8;let g=0;u.length=0;c.length=0;t:for(let i=0;i<s;i+=3){let s=r[i]<<1;let m=e[s],_=e[s+1];let M=n[s],y=n[s+1];s=r[i+1]<<1;let w=e[s],v=e[s+1];let E=n[s],T=n[s+1];s=r[i+2]<<1;let A=e[s],x=e[s+1];let b=n[s],S=n[s+1];for(let e=0;e<f;e++){let i=u.length;if(this.clip(m,_,w,v,A,x,d[e],h)){let e=h.length;if(e==0){continue}let r=v-x,s=A-w,n=m-A,d=x-_;let f=1/(r*n+s*(_-x));let I=e>>1;let C=this.clipOutput;let R=t.Utils.setArraySize(u,i+I*p);for(let t=0;t<e;t+=2){let e=C[t],h=C[t+1];R[i]=e;R[i+1]=h;R[i+2]=a.r;R[i+3]=a.g;R[i+4]=a.b;R[i+5]=a.a;let u=e-A,c=h-x;let g=(r*u+s*c)*f;let m=(d*u+n*c)*f;let _=1-g-m;R[i+6]=M*g+E*m+b*_;R[i+7]=y*g+T*m+S*_;if(o){R[i+8]=l.r;R[i+9]=l.g;R[i+10]=l.b;R[i+11]=l.a}i+=p}i=c.length;let L=t.Utils.setArraySize(c,i+3*(I-2));I--;for(let t=1;t<I;t++){L[i]=g;L[i+1]=g+t;L[i+2]=g+t+1;i+=3}g+=I+1}else{let e=t.Utils.setArraySize(u,i+3*p);e[i]=m;e[i+1]=_;e[i+2]=a.r;e[i+3]=a.g;e[i+4]=a.b;e[i+5]=a.a;if(!o){e[i+6]=M;e[i+7]=y;e[i+8]=w;e[i+9]=v;e[i+10]=a.r;e[i+11]=a.g;e[i+12]=a.b;e[i+13]=a.a;e[i+14]=E;e[i+15]=T;e[i+16]=A;e[i+17]=x;e[i+18]=a.r;e[i+19]=a.g;e[i+20]=a.b;e[i+21]=a.a;e[i+22]=b;e[i+23]=S}else{e[i+6]=M;e[i+7]=y;e[i+8]=l.r;e[i+9]=l.g;e[i+10]=l.b;e[i+11]=l.a;e[i+12]=w;e[i+13]=v;e[i+14]=a.r;e[i+15]=a.g;e[i+16]=a.b;e[i+17]=a.a;e[i+18]=E;e[i+19]=T;e[i+20]=l.r;e[i+21]=l.g;e[i+22]=l.b;e[i+23]=l.a;e[i+24]=A;e[i+25]=x;e[i+26]=a.r;e[i+27]=a.g;e[i+28]=a.b;e[i+29]=a.a;e[i+30]=b;e[i+31]=S;e[i+32]=l.r;e[i+33]=l.g;e[i+34]=l.b;e[i+35]=l.a}i=c.length;let r=t.Utils.setArraySize(c,i+3);r[i]=g;r[i+1]=g+1;r[i+2]=g+2;g+=3;continue t}}}}clip(e,i,r,s,n,a,l,o){if(t.FlypineSetting.clipReturn){return true}let h=o;let u=false;let c=null;if(l.length%4>=2){c=o;o=this.scratch}else{c=this.scratch}c.length=0;c.push(e);c.push(i);c.push(r);c.push(s);c.push(n);c.push(a);c.push(e);c.push(i);o.length=0;let d=l;let f=l.length-4;for(let t=0;;t+=2){let e=d[t],i=d[t+1];let r=d[t+2],s=d[t+3];let n=e-r,a=i-s;let l=c;let p=c.length-2,g=o.length;for(let t=0;t<p;t+=2){let h=l[t],c=l[t+1];let d=l[t+2],f=l[t+3];let p=n*(f-s)-a*(d-r)>0;if(n*(c-s)-a*(h-r)>0){if(p){o.push(d);o.push(f);continue}let t=f-c,n=d-h;let a=(n*(i-c)-t*(e-h))/(t*(r-e)-n*(s-i));o.push(e+(r-e)*a);o.push(i+(s-i)*a)}else if(p){let t=f-c,n=d-h;let a=(n*(i-c)-t*(e-h))/(t*(r-e)-n*(s-i));o.push(e+(r-e)*a);o.push(i+(s-i)*a);o.push(d);o.push(f)}u=true}if(g==o.length){h.length=0;return true}o.push(o[0]);o.push(o[1]);if(t==f){break}let m=o;o=c;o.length=0;c=m}if(h!=o){h.length=0;for(let t=0,e=o.length-2;t<e;t++){h[t]=o[t]}}else{h.length=h.length-2}return u}static makeClockwise(t){let e=t;let i=t.length;let r=e[i-2]*e[1]-e[0]*e[i-1],s=0,n=0,a=0,l=0;for(let t=0,o=i-3;t<o;t+=2){s=e[t];n=e[t+1];a=e[t+2];l=e[t+3];r+=s*l-a*n}if(r<0){return}for(let t=0,r=i-2,s=i>>1;t<s;t+=2){let i=e[t],s=e[t+1];let n=r-t;e[t]=e[n];e[t+1]=e[n+1];e[n]=i;e[n+1]=s}}}t.SkeletonClipping=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){this.minX=0;this.minY=0;this.maxX=0;this.maxY=0;this.boundingBoxes=new Array;this.polygons=new Array;this.polygonPool=new t.Pool(()=>{return t.Utils.newFloatArray(16)})}update(e,i){if(e==null){throw new Error("skeleton cannot be null.")}let r=this.boundingBoxes;let s=this.polygons;let n=this.polygonPool;let a=e.slots;let l=a.length;r.length=0;n.freeAll(s);s.length=0;for(let e=0;e<l;e++){let i=a[e];let l=i.getAttachment();if(l instanceof t.BoundingBoxAttachment){let e=l;r.push(e);let a=n.obtain();if(a.length!=e.worldVerticesLength){a=t.Utils.newFloatArray(e.worldVerticesLength)}s.push(a);e.computeWorldVertices(i,0,e.worldVerticesLength,a,0,2)}}if(i){this.aabbCompute()}else{this.minX=Number.POSITIVE_INFINITY;this.minY=Number.POSITIVE_INFINITY;this.maxX=Number.NEGATIVE_INFINITY;this.maxY=Number.NEGATIVE_INFINITY}}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;let s=this.polygons;for(let n=0,a=s.length;n<a;n++){let a=s[n];let l=a;for(let s=0,n=a.length;s<n;s+=2){let n=l[s];let a=l[s+1];t=Math.min(t,n);e=Math.min(e,a);i=Math.max(i,n);r=Math.max(r,a)}}this.minX=t;this.minY=e;this.maxX=i;this.maxY=r}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,r){let s=this.minX;let n=this.minY;let a=this.maxX;let l=this.maxY;if(t<=s&&i<=s||e<=n&&r<=n||t>=a&&i>=a||e>=l&&r>=l){return false}let o=(r-e)/(i-t);let h=o*(s-t)+e;if(h>n&&h<l){return true}h=o*(a-t)+e;if(h>n&&h<l){return true}let u=(n-e)/o+t;if(u>s&&u<a){return true}u=(l-e)/o+t;if(u>s&&u<a){return true}return false}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let r=0,s=i.length;r<s;r++){if(this.containsPointPolygon(i[r],t,e)){return this.boundingBoxes[r]}}return null}containsPointPolygon(t,e,i){let r=t;let s=t.length;let n=s-2;let a=false;for(let t=0;t<s;t+=2){let s=r[t+1];let l=r[n+1];if(s<i&&l>=i||l<i&&s>=i){let o=r[t];if(o+(i-s)/(l-s)*(r[n]-o)<e){a=!a}}n=t}return a}intersectsSegment(t,e,i,r){let s=this.polygons;for(let n=0,a=s.length;n<a;n++){if(this.intersectsSegmentPolygon(s[n],t,e,i,r)){return this.boundingBoxes[n]}}return null}intersectsSegmentPolygon(t,e,i,r,s){let n=t;let a=t.length;let l=e-r,o=i-s;let h=e*s-i*r;let u=n[a-2],c=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],d=n[t+1];let f=u*d-c*a;let p=u-a,g=c-d;let m=l*g-o*p;let _=(h*p-l*f)/m;if((_>=u&&_<=a||_>=a&&_<=u)&&(_>=e&&_<=r||_>=r&&_<=e)){let t=(h*g-o*f)/m;if((t>=c&&t<=d||t>=d&&t<=c)&&(t>=i&&t<=s||t>=s&&t<=i)){return true}}u=a;c=d}return false}getPolygon(t){if(t==null){throw new Error("boundingBox cannot be null.")}let e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}t.SkeletonBounds=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.scale=1;this.linkedMeshes=new Array;this._isHaveClip=false;this.attachmentLoader=t}get isHaveClip(){return this._isHaveClip}readSkeletonData(r){let s=this.scale;let n=new t.SkeletonData;n.name="";let a=new i(r);n.hash=a.readString();n.version=a.readString();n.width=a.readFloat();n.height=a.readFloat();let l=a.readBoolean();if(l){n.fps=a.readFloat();n.imagesPath=a.readString();if(n.imagesPath==""){n.imagesPath=null}}let o=0;o=a.readInt(true);for(let i=0;i<o;i++){let r=a.readString();let o=i==0?null:n.bones[a.readInt(true)];let h=new t.BoneData(i,r,o);h.rotation=a.readFloat();h.x=a.readFloat()*s;h.y=a.readFloat()*s;h.scaleX=a.readFloat();h.scaleY=a.readFloat();h.shearX=a.readFloat();h.shearY=a.readFloat();h.length=a.readFloat()*s;h.transformMode=e.TransformModeValues[a.readInt(true)];if(l){t.Color.rgba8888ToColor(h.color,a.readInt32())}n.bones.push(h)}o=a.readInt(true);for(let i=0;i<o;i++){let r=a.readString();let s=n.bones[a.readInt(true)];let l=new t.SlotData(i,r,s);t.Color.rgba8888ToColor(l.color,a.readInt32());let o=a.readInt32();if(o!=-1){t.Color.rgb888ToColor(l.darkColor=new t.Color,o)}l.attachmentName=a.readString();var h=a.readInt(true);if(t.FlypineSetting.isOpenBlend==false){h=0}l.blendMode=e.BlendModeValues[h];if(l.blendMode!=t.BlendMode.Normal){}n.slots.push(l)}o=a.readInt(true);for(let e=0,i;e<o;e++){let e=new t.IkConstraintData(a.readString());e.order=a.readInt(true);i=a.readInt(true);for(let t=0;t<i;t++){e.bones.push(n.bones[a.readInt(true)])}e.target=n.bones[a.readInt(true)];e.mix=a.readFloat();e.bendDirection=a.readByte();n.ikConstraints.push(e)}o=a.readInt(true);for(let e=0,i;e<o;e++){let e=new t.TransformConstraintData(a.readString());e.order=a.readInt(true);i=a.readInt(true);for(let t=0;t<i;t++){e.bones.push(n.bones[a.readInt(true)])}e.target=n.bones[a.readInt(true)];e.local=a.readBoolean();e.relative=a.readBoolean();e.offsetRotation=a.readFloat();e.offsetX=a.readFloat()*s;e.offsetY=a.readFloat()*s;e.offsetScaleX=a.readFloat();e.offsetScaleY=a.readFloat();e.offsetShearY=a.readFloat();e.rotateMix=a.readFloat();e.translateMix=a.readFloat();e.scaleMix=a.readFloat();e.shearMix=a.readFloat();n.transformConstraints.push(e)}o=a.readInt(true);for(let i=0,r;i<o;i++){let i=new t.PathConstraintData(a.readString());i.order=a.readInt(true);r=a.readInt(true);for(let t=0;t<r;t++){i.bones.push(n.bones[a.readInt(true)])}i.target=n.slots[a.readInt(true)];i.positionMode=e.PositionModeValues[a.readInt(true)];i.spacingMode=e.SpacingModeValues[a.readInt(true)];i.rotateMode=e.RotateModeValues[a.readInt(true)];i.offsetRotation=a.readFloat();i.position=a.readFloat();if(i.positionMode==t.PositionMode.Fixed){i.position*=s}i.spacing=a.readFloat();if(i.spacingMode==t.SpacingMode.Length||i.spacingMode==t.SpacingMode.Fixed){i.spacing*=s}i.rotateMix=a.readFloat();i.translateMix=a.readFloat();n.pathConstraints.push(i)}var u=this.readSkin(a,n,"default",l);if(u!=null){n.defaultSkin=u;n.skins.push(u)}for(let t=0,e=a.readInt(true);t<e;t++){n.skins.push(this.readSkin(a,n,a.readString(),l))}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t];let i=e.skin==null?n.defaultSkin:n.findSkin(e.skin);if(i==null){throw new Error("Skin not found: "+e.skin)}let r=i.getAttachment(e.slotIndex,e.parent);if(r==null){throw new Error("Parent mesh not found: "+e.parent)}e.mesh.setParentMesh(r);e.mesh.updateUVs()}this.linkedMeshes.length=0;o=a.readInt(true);for(let e=0;e<o;e++){let e=new t.EventData(a.readString());e.intValue=a.readInt(false);e.floatValue=a.readFloat();e.stringValue=a.readString();n.events.push(e)}o=a.readInt(true);for(let t=0;t<o;t++){var c=this.readAnimation(a,a.readString(),n);n.addAnimation(c)}return n}readSkin(e,i,r,s){let n=e.readInt(true);if(n==0){return null}var a=new t.Skin(r);for(let t=0;t<n;t++){let t=e.readInt(true);for(let r=0,n=e.readInt(true);r<n;r++){let r=e.readString();if(r.indexOf("lx")!=-1){let t=1}var l=this.readAttachment(e,i,a,t,r,s);if(l!=null){a.addAttachment(t,r,l)}}}return a}readAttachment(i,s,n,a,l,o){let h=this.scale;let u=i.readString();if(u==null){u=l}let c=i.readByte();let d=e.AttachmentTypeValues[c];switch(d){case t.AttachmentType.Region:{let e=i.readStringRef();let r=i.readFloat();let s=i.readFloat();let a=i.readFloat();let l=i.readFloat();let o=i.readFloat();let c=i.readFloat();let d=i.readFloat();let f=i.readInt32();if(e==null){e=u}let p=this.attachmentLoader.newRegionAttachment(n,u,e);if(p==null){return null}p.path=e;p.x=s*h;p.y=a*h;p.scaleX=l;p.scaleY=o;p.rotation=r;p.width=c*h;p.height=d*h;t.Color.rgba8888ToColor(p.color,f);p.updateOffset();return p}case t.AttachmentType.BoundingBox:{let e=i.readInt(true);let r=this.readVertices(i,e);let s=o?i.readInt32():0;let a=this.attachmentLoader.newBoundingBoxAttachment(n,u);if(a==null){return null}a.worldVerticesLength=e<<1;a.vertices=r.vertices;a.bones=r.bones;if(o){t.Color.rgba8888ToColor(a.color,s)}return a}case t.AttachmentType.Mesh:{let e=i.readStringRef();if(e==null){e=u}if(e=="effect/shui21"){let t=1}let r=i.readInt32();let s=i.readInt(true);let a=this.readFloatArray(i,s<<1,1);let l=this.readShortArray(i);let c=this.readVertices(i,s);let d=i.readInt(true);let f=null;let p=0,g=0;if(o){f=this.readShortArray(i);p=i.readFloat();g=i.readFloat()}let m=this.attachmentLoader.newMeshAttachment(n,u,e);if(m==null){return null}m.path=e;t.Color.rgba8888ToColor(m.color,r);m.bones=c.bones;m.vertices=c.vertices;m.worldVerticesLength=s<<1;m.triangles=l;m.regionUVs=a;m.updateUVs();m.hullLength=d<<1;if(o){m.edges=f;m.width=p*h;m.height=g*h}return m}case t.AttachmentType.LinkedMesh:{let e=i.readStringRef();let s=i.readInt32();let l=i.readStringRef();let c=i.readStringRef();let d=i.readBoolean();let f=0,p=0;if(o){f=i.readFloat();p=i.readFloat()}if(e==null){e=u}let g=this.attachmentLoader.newMeshAttachment(n,u,e);if(g==null){return null}g.path=e;t.Color.rgba8888ToColor(g.color,s);if(o){g.width=f*h;g.height=p*h}this.linkedMeshes.push(new r(g,l,a,c,d));return g}case t.AttachmentType.Path:{let e=i.readBoolean();let r=i.readBoolean();let s=i.readInt(true);let a=this.readVertices(i,s);let l=t.Utils.newArray(s/3,0);for(let t=0,e=l.length;t<e;t++){l[t]=i.readFloat()*h}let c=o?i.readInt32():0;let d=this.attachmentLoader.newPathAttachment(n,u);if(d==null){return null}d.closed=e;d.constantSpeed=r;d.worldVerticesLength=s<<1;d.vertices=a.vertices;d.bones=a.bones;d.lengths=l;if(o){t.Color.rgba8888ToColor(d.color,c)}return d}case t.AttachmentType.Point:{let e=i.readFloat();let r=i.readFloat();let s=i.readFloat();let a=o?i.readInt32():0;let l=this.attachmentLoader.newPointAttachment(n,u);if(l==null){return null}l.x=r*h;l.y=s*h;l.rotation=e;if(o){t.Color.rgba8888ToColor(l.color,a)}return l}case t.AttachmentType.Clipping:{let e=i.readInt(true);let r=i.readInt(true);let a=this.readVertices(i,r);let l=o?i.readInt32():0;let h=this.attachmentLoader.newClippingAttachment(n,u);if(h==null){return null}h.endSlot=s.slots[e];h.worldVerticesLength=r<<1;h.vertices=a.vertices;h.bones=a.bones;if(o){t.Color.rgba8888ToColor(h.color,l)}this._isHaveClip=true;return h}}return null}readVertices(e,i){let r=i<<1;let n=new s;let a=this.scale;if(!e.readBoolean()){n.vertices=this.readFloatArray(e,r,a);return n}let l=new Array;let o=new Array;for(let t=0;t<i;t++){let t=e.readInt(true);o.push(t);for(let i=0;i<t;i++){o.push(e.readInt(true));l.push(e.readFloat()*a);l.push(e.readFloat()*a);l.push(e.readFloat())}}n.vertices=t.Utils.toFloatArray(l);n.bones=o;return n}readFloatArray(t,e,i){let r=new Array(e);if(i==1){for(let i=0;i<e;i++){r[i]=t.readFloat()}}else{for(let s=0;s<e;s++){r[s]=t.readFloat()*i}}return r}readShortArray(t){let e=t.readInt(true);let i=new Array(e);for(let r=0;r<e;r++){i[r]=t.readShort()}return i}readUint16Array(t){let e=t.readInt(true);let i=new Uint16Array(e);for(let r=0;r<e;r++){i[r]=t.readShort()}return i}readAnimation(i,r,s){let n=new Array;let a=this.scale;let l=0;let o=new t.Color;let h=new t.Color;for(let r=0,s=i.readInt(true);r<s;r++){let r=i.readInt(true);for(let s=0,a=i.readInt(true);s<a;s++){let s=i.readByte();let a=i.readInt(true);switch(s){case e.SLOT_ATTACHMENT:{let e=new t.AttachmentTimeline(a);e.slotIndex=r;for(let t=0;t<a;t++){e.setFrame(t,i.readFloat(),i.readStringRef())}n.push(e);l=Math.max(l,e.frames[a-1]);break}case e.SLOT_COLOR:{let e=new t.ColorTimeline(a);e.slotIndex=r;for(let r=0;r<a;r++){let s=i.readFloat();t.Color.rgba8888ToColor(o,i.readInt32());e.setFrame(r,s,o.r,o.g,o.b,o.a);if(r<a-1){this.readCurve(i,r,e)}}n.push(e);l=Math.max(l,e.frames[(a-1)*t.ColorTimeline.ENTRIES]);break}case e.SLOT_TWO_COLOR:{let e=new t.TwoColorTimeline(a);e.slotIndex=r;for(let r=0;r<a;r++){let s=i.readFloat();t.Color.rgba8888ToColor(o,i.readInt32());t.Color.rgb888ToColor(h,i.readInt32());e.setFrame(r,s,o.r,o.g,o.b,o.a,h.r,h.g,h.b);if(r<a-1){this.readCurve(i,r,e)}}n.push(e);l=Math.max(l,e.frames[(a-1)*t.TwoColorTimeline.ENTRIES]);break}}}}for(let r=0,s=i.readInt(true);r<s;r++){let r=i.readInt(true);for(let s=0,o=i.readInt(true);s<o;s++){let s=i.readByte();let o=i.readInt(true);switch(s){case e.BONE_ROTATE:{let e=new t.RotateTimeline(o);e.boneIndex=r;for(let t=0;t<o;t++){e.setFrame(t,i.readFloat(),i.readFloat());if(t<o-1){this.readCurve(i,t,e)}}n.push(e);l=Math.max(l,e.frames[(o-1)*t.RotateTimeline.ENTRIES]);break}case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:{let h;let u=1;if(s==e.BONE_SCALE){h=new t.ScaleTimeline(o)}else if(s==e.BONE_SHEAR){h=new t.ShearTimeline(o)}else{h=new t.TranslateTimeline(o);u=a}h.boneIndex=r;for(let t=0;t<o;t++){h.setFrame(t,i.readFloat(),i.readFloat()*u,i.readFloat()*u);if(t<o-1){this.readCurve(i,t,h)}}n.push(h);l=Math.max(l,h.frames[(o-1)*t.TranslateTimeline.ENTRIES]);break}}}}for(let e=0,r=i.readInt(true);e<r;e++){let e=i.readInt(true);let r=i.readInt(true);let s=new t.IkConstraintTimeline(r);s.ikConstraintIndex=e;for(let t=0;t<r;t++){s.setFrame(t,i.readFloat(),i.readFloat(),i.readByte());if(t<r-1){this.readCurve(i,t,s)}}n.push(s);l=Math.max(l,s.frames[(r-1)*t.IkConstraintTimeline.ENTRIES])}for(let e=0,r=i.readInt(true);e<r;e++){let e=i.readInt(true);let r=i.readInt(true);let s=new t.TransformConstraintTimeline(r);s.transformConstraintIndex=e;for(let t=0;t<r;t++){s.setFrame(t,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat());if(t<r-1){this.readCurve(i,t,s)}}n.push(s);l=Math.max(l,s.frames[(r-1)*t.TransformConstraintTimeline.ENTRIES])}for(let r=0,o=i.readInt(true);r<o;r++){let r=i.readInt(true);let o=s.pathConstraints[r];for(let s=0,h=i.readInt(true);s<h;s++){let s=i.readByte();let h=i.readInt(true);switch(s){case e.PATH_POSITION:case e.PATH_SPACING:{let u;let c=1;if(s==e.PATH_SPACING){u=new t.PathConstraintSpacingTimeline(h);if(o.spacingMode==t.SpacingMode.Length||o.spacingMode==t.SpacingMode.Fixed){c=a}}else{u=new t.PathConstraintPositionTimeline(h);if(o.positionMode==t.PositionMode.Fixed){c=a}}u.pathConstraintIndex=r;for(let t=0;t<h;t++){u.setFrame(t,i.readFloat(),i.readFloat()*c);if(t<h-1){this.readCurve(i,t,u)}}n.push(u);l=Math.max(l,u.frames[(h-1)*t.PathConstraintPositionTimeline.ENTRIES]);break}case e.PATH_MIX:{let e=new t.PathConstraintMixTimeline(h);e.pathConstraintIndex=r;for(let t=0;t<h;t++){e.setFrame(t,i.readFloat(),i.readFloat(),i.readFloat());if(t<h-1){this.readCurve(i,t,e)}}n.push(e);l=Math.max(l,e.frames[(h-1)*t.PathConstraintMixTimeline.ENTRIES]);break}}}}for(let e=0,r=i.readInt(true);e<r;e++){let e=s.skins[i.readInt(true)];for(let r=0,s=i.readInt(true);r<s;r++){let r=i.readInt(true);for(let s=0,o=i.readInt(true);s<o;s++){var u=i.readString();let s=e.getAttachment(r,u);let o=s.bones!=null;let h=s.vertices;let c=o?h.length/3*2:h.length;let d=i.readInt(true);let f=new t.DeformTimeline(d);f.slotIndex=r;f.attachment=s;for(let e=0;e<d;e++){let r=i.readFloat();let s;let n=i.readInt(true);if(n==0){s=o?t.Utils.newFloatArray(c):h}else{s=t.Utils.newFloatArray(c);let e=i.readInt(true);n+=e;if(a==1){for(let t=e;t<n;t++){s[t]=i.readFloat()}}else{for(let t=e;t<n;t++){s[t]=i.readFloat()*a}}if(!o){for(let t=0,e=s.length;t<e;t++){s[t]+=h[t]}}}f.setFrame(e,r,s);if(e<d-1){this.readCurve(i,e,f)}}n.push(f);l=Math.max(l,f.frames[d-1])}}}let c=i.readInt(true);if(c>0){let e=new t.DrawOrderTimeline(c);let r=s.slots.length;for(let s=0;s<c;s++){let n=i.readFloat();let a=i.readInt(true);let l=t.Utils.newArray(r,0);for(let t=r-1;t>=0;t--){l[t]=-1}let o=t.Utils.newArray(r-a,0);let h=0,u=0;for(let t=0;t<a;t++){let t=i.readInt(true);while(h!=t){o[u++]=h++}l[h+i.readInt(true)]=h++}while(h<r){o[u++]=h++}for(let t=r-1;t>=0;t--){if(l[t]==-1){l[t]=o[--u]}}e.setFrame(s,n,l)}n.push(e);l=Math.max(l,e.frames[c-1])}let d=i.readInt(true);let f;if(d>0){f=new t.EventTimeline(d);for(let e=0;e<d;e++){let r=i.readFloat();let n=s.events[i.readInt(true)];let a=new t.Event(r,n);a.intValue=i.readInt(false);a.floatValue=i.readFloat();a.stringValue=i.readBoolean()?i.readString():n.stringValue;f.setFrame(e,a)}n.push(f);l=Math.max(l,f.frames[d-1])}return new t.Animation(r,n,l,f)}readCurve(t,i,r){switch(t.readByte()){case e.CURVE_STEPPED:r.setStepped(i);break;case e.CURVE_BEZIER:this.setCurve(r,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}}setCurve(t,e,i,r,s,n){t.setCurve(e,i,r,s,n)}}e.AttachmentTypeValues=[0,1,2,3,4,5,6];e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection];e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent];e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent];e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale];e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen];e.BONE_ROTATE=0;e.BONE_TRANSLATE=1;e.BONE_SCALE=2;e.BONE_SHEAR=3;e.SLOT_ATTACHMENT=0;e.SLOT_COLOR=1;e.SLOT_TWO_COLOR=2;e.PATH_POSITION=0;e.PATH_SPACING=1;e.PATH_MIX=2;e.CURVE_LINEAR=0;e.CURVE_STEPPED=1;e.CURVE_BEZIER=2;t.SkeletonBinary=e;class i{constructor(t){this.strings=new Array;this.index=0;this.buffer=new DataView(t.buffer);this.index=t.byteOffset}readByte(){return this.buffer.getInt8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);this.index+=2;return t}readInt32(){let t=this.buffer.getInt32(this.index);this.index+=4;return t}readInt(t){let e=this.readByte();let i=e&127;if((e&128)!=0){e=this.readByte();i|=(e&127)<<7;if((e&128)!=0){e=this.readByte();i|=(e&127)<<14;if((e&128)!=0){e=this.readByte();i|=(e&127)<<21;if((e&128)!=0){e=this.readByte();i|=(e&127)<<28}}}}return t?i:i>>>1^-(i&1)}readStringRef(){return this.readString()}readString(){let t=this.readInt(true);switch(t){case 0:return null;case 1:return""}t--;let e="";let i=0;for(let i=0;i<t;){let t=this.readByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((t&31)<<6|this.readByte()&63);i+=2;break;case 14:e+=String.fromCharCode((t&15)<<12|(this.readByte()&63)<<6|this.readByte()&63);i+=3;break;default:e+=String.fromCharCode(t);i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);this.index+=4;return t}readBoolean(){return this.readByte()!=0}}class r{constructor(t,e,i,r,s){this.mesh=t;this.skin=e;this.slotIndex=i;this.parent=r;this.inheritDeform=s}}class s{constructor(t=null,e=null){this.bones=t;this.vertices=e}}})(spine||(spine={}));var spine;(function(t){class e{constructor(e){this._updateCache=new Array;this.updateCacheReset=new Array;this.time=0;this.flipX=false;this.flipY=false;this.x=0;this.y=0;if(e==null){throw new Error("data cannot be null.")}this.data=e;this.bones=new Array;for(let i=0;i<e.bones.length;i++){let r=e.bones[i];let s;if(r.parent==null){s=new t.Bone(r,this,null)}else{let e=this.bones[r.parent.index];s=new t.Bone(r,this,e);e.children.push(s)}this.bones.push(s)}this.slots=new Array;this.drawOrder=new Array;for(let i=0;i<e.slots.length;i++){let r=e.slots[i];let s=this.bones[r.boneData.index];let n=new t.Slot(r,s);this.slots.push(n);this.drawOrder.push(n)}this.ikConstraints=new Array;for(let i=0;i<e.ikConstraints.length;i++){let r=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(r,this))}this.transformConstraints=new Array;for(let i=0;i<e.transformConstraints.length;i++){let r=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(r,this))}this.pathConstraints=new Array;for(let i=0;i<e.pathConstraints.length;i++){let r=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(r,this))}this.color=new t.Color(1,1,1,1);this.updateCache()}updateCache(){let t=this._updateCache;t.length=0;this.updateCacheReset.length=0;let e=this.bones;for(let t=0,i=e.length;t<i;t++){e[t].sorted=false}let i=this.ikConstraints;let r=this.transformConstraints;let s=this.pathConstraints;let n=i.length,a=r.length,l=s.length;let o=n+a+l;t:for(let t=0;t<o;t++){for(let e=0;e<n;e++){let r=i[e];if(r.data.order==t){this.sortIkConstraint(r);continue t}}for(let e=0;e<a;e++){let i=r[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<l;e++){let i=s[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}}for(let t=0,i=e.length;t<i;t++){this.sortBone(e[t])}}sortIkConstraint(t){let e=t.target;this.sortBone(e);let i=t.bones;let r=i[0];this.sortBone(r);if(i.length>1){let t=i[i.length-1];if(!(this._updateCache.indexOf(t)>-1)){this.updateCacheReset.push(t)}}this._updateCache.push(t);this.sortReset(r.children);i[i.length-1].sorted=true}sortPathConstraint(e){let i=e.target;let r=i.data.index;let s=i.bone;if(this.skin!=null){this.sortPathConstraintAttachment(this.skin,r,s)}if(this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin){this.sortPathConstraintAttachment(this.data.defaultSkin,r,s)}for(let t=0,e=this.data.skins.length;t<e;t++){this.sortPathConstraintAttachment(this.data.skins[t],r,s)}let n=i.getAttachment();if(n instanceof t.PathAttachment){this.sortPathConstraintAttachmentWith(n,s)}let a=e.bones;let l=a.length;for(let t=0;t<l;t++){this.sortBone(a[t])}this._updateCache.push(e);for(let t=0;t<l;t++){this.sortReset(a[t].children)}for(let t=0;t<l;t++){a[t].sorted=true}}sortTransformConstraint(t){this.sortBone(t.target);let e=t.bones;let i=e.length;if(t.data.local){for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent);if(!(this._updateCache.indexOf(i)>-1)){this.updateCacheReset.push(i)}}}else{for(let t=0;t<i;t++){this.sortBone(e[t])}}this._updateCache.push(t);for(let t=0;t<i;t++){this.sortReset(e[t].children)}for(let t=0;t<i;t++){e[t].sorted=true}}sortPathConstraintAttachment(t,e,i){let r=t.attachments[e];if(!r){return}for(let t in r){this.sortPathConstraintAttachmentWith(r[t],i)}}sortPathConstraintAttachmentWith(e,i){if(!(e instanceof t.PathAttachment)){return}let r=e.bones;if(r==null){this.sortBone(i)}else{let t=this.bones;let e=0;while(e<r.length){let i=r[e++];for(let s=e+i;e<s;e++){let i=r[e];this.sortBone(t[i])}}}}sortBone(t){if(t.sorted){return}let e=t.parent;if(e!=null){this.sortBone(e)}t.sorted=true;this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i.sorted){this.sortReset(i.children)}i.sorted=false}}updateWorldTransform(){let t=this.updateCacheReset;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.ax=i.x;i.ay=i.y;i.arotation=i.rotation;i.ascaleX=i.scaleX;i.ascaleY=i.scaleY;i.ashearX=i.shearX;i.ashearY=i.shearY;i.appliedValid=true}let e=this._updateCache;for(let t=0,i=e.length;t<i;t++){e[t].update()}}setToSetupPose(){this.setBonesToSetupPose();this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,i=t.length;e<i;e++){t[e].setToSetupPose()}let e=this.ikConstraints;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.bendDirection=i.data.bendDirection;i.mix=i.data.mix}let i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t];let r=e.data;e.rotateMix=r.rotateMix;e.translateMix=r.translateMix;e.scaleMix=r.scaleMix;e.shearMix=r.shearMix}let r=this.pathConstraints;for(let t=0,e=r.length;t<e;t++){let e=r[t];let i=e.data;e.position=i.position;e.spacing=i.spacing;e.rotateMix=i.rotateMix;e.translateMix=i.translateMix}}setSlotsToSetupPose(){let e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,i=e.length;t<i;t++){e[t].setToSetupPose()}}getRootBone(){if(this.bones.length==0){return null}return this.bones[0]}findBone(t){if(t==null){throw new Error("boneName cannot be null.")}let e=this.bones;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t){return r}}return null}findBoneIndex(t){if(t==null){throw new Error("boneName cannot be null.")}let e=this.bones;for(let i=0,r=e.length;i<r;i++){if(e[i].data.name==t){return i}}return-1}findSlot(t){if(t==null){throw new Error("slotName cannot be null.")}let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t){return r}}return null}findSlotIndex(t){if(t==null){throw new Error("slotName cannot be null.")}let e=this.slots;for(let i=0,r=e.length;i<r;i++){if(e[i].data.name==t){return i}}return-1}setSkinByName(t){let e=this.data.findSkin(t);if(e==null){throw new Error("Skin not found: "+t)}this.setSkin(e)}setSkin(t){if(t!=null){if(this.skin!=null){t.attachAll(this,this.skin)}else{let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i];let s=r.data.attachmentName;if(s!=null){let e=t.getAttachment(i,s);if(e!=null){r.setAttachment(e)}}}}}this.skin=t}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null){throw new Error("attachmentName cannot be null.")}if(this.skin!=null){let i=this.skin.getAttachment(t,e);if(i!=null){return i}}if(this.data.defaultSkin!=null){return this.data.defaultSkin.getAttachment(t,e)}return null}setAttachment(t,e){if(t==null){throw new Error("slotName cannot be null.")}let i=this.slots;for(let r=0,s=i.length;r<s;r++){let s=i[r];if(s.data.name==t){let i=null;if(e!=null){i=this.getAttachment(r,e);if(i==null){throw new Error("Attachment not found: "+e+", for slot: "+t)}}s.setAttachment(i);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.ikConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t){return r}}return null}findTransformConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.transformConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t){return r}}return null}findPathConstraint(t){if(t==null){throw new Error("constraintName cannot be null.")}let e=this.pathConstraints;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t){return r}}return null}getBounds(e,i,r){if(e==null){throw new Error("offset cannot be null.")}if(i==null){throw new Error("size cannot be null.")}let s=this.drawOrder;let n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let e=0,i=s.length;e<i;e++){let i=s[e];let h=0;let u=null;let c=i.getAttachment();if(c instanceof t.RegionAttachment){h=8;u=t.Utils.setArraySize(r,h,0);c.computeWorldVertices(i.bone,u,0,2)}else if(c instanceof t.MeshAttachment){let e=c;h=e.worldVerticesLength;u=t.Utils.setArraySize(r,h,0);e.computeWorldVertices(i,0,h,u,0,2)}if(u!=null){for(let t=0,e=u.length;t<e;t+=2){let e=u[t],i=u[t+1];n=Math.min(n,e);a=Math.min(a,i);l=Math.max(l,e);o=Math.max(o,i)}}}e.set(n,a);i.set(l-n,o-a)}update(t){this.time+=t}dispose(){this.data=null;this.bones.length=0;this.slots.length=0;this.drawOrder.length=0;this.ikConstraints.length=0;this.transformConstraints.length=0;this.pathConstraints.length=0;this._updateCache.length=0;this.updateCacheReset.length=0}}t.Skeleton=e})(spine||(spine={}));(()=>{if(!Math.fround){Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1))}})();var spine;(function(t){class e{constructor(t){this.name=t}}t.EventData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){if(e==null){throw new Error("data cannot be null.")}this.time=t;this.data=e}}t.Event=e})(spine||(spine={}));var spine;(function(t){let e;(function(t){t[t["Region"]=0]="Region";t[t["BoundingBox"]=1]="BoundingBox";t[t["Mesh"]=2]="Mesh";t[t["LinkedMesh"]=3]="LinkedMesh";t[t["Path"]=4]="Path";t[t["Point"]=5]="Point";t[t["Clipping"]=6]="Clipping"})(e=t.AttachmentType||(t.AttachmentType={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.animationToMixTime={};this.defaultMix=0;if(t==null){throw new Error("skeletonData cannot be null.")}this.skeletonData=t}dispose(){this.animationToMixTime=null;this.skeletonData=null}setMix(t,e,i){let r=this.skeletonData.findAnimation(t);if(r==null){throw new Error("Animation not found: "+t)}let s=this.skeletonData.findAnimation(e);if(s==null){throw new Error("Animation not found: "+e)}this.setMixWith(r,s,i)}setMixWith(t,e,i){if(t==null){throw new Error("from cannot be null.")}if(e==null){throw new Error("to cannot be null.")}let r=t.name+"."+e.name;this.animationToMixTime[r]=i}getMix(t,e){let i=t.name+"."+e.name;let r=this.animationToMixTime[i];return r===undefined?this.defaultMix:r}}t.AnimationStateData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e,i,r){if(t==null){throw new Error("name cannot be null.")}if(e==null){throw new Error("timelines cannot be null.")}this.name=t;this.timelines=e;this.duration=i;this.initEventFrame(r)}initEventFrame(e){this.eventMap=new ds.StringMap;if(e){for(let r=0;r<e.events.length;r++){const s=e.events[r];var i=t.FlypineSetting.timeToFrame(s.time);this.eventMap.put(i,s)}}}getFreamEvent(t){return this.eventMap.get(t)}apply(t,e,i,r,s,n,a,l){if(t==null){throw new Error("skeleton cannot be null.")}if(r&&this.duration!=0){i%=this.duration;if(e>0){e%=this.duration}}let o=this.timelines;for(let r=0,h=o.length;r<h;r++){o[r].apply(t,e,i,s,n,a,l)}}static binarySearch(t,e,i=1){let r=0;let s=t.length/i-2;if(s==0){return i}let n=s>>>1;while(true){if(t[(n+1)*i]<=e){r=n+1}else{s=n}if(r==s){return(r+1)*i}n=r+s>>>1}}static linearSearch(t,e,i){for(let r=0,s=t.length-i;r<=s;r+=i){if(t[r]>e){return r}}return-1}}t.Animation=e;let i;(function(t){t[t["setup"]=0]="setup";t[t["current"]=1]="current";t[t["currentLayered"]=2]="currentLayered"})(i=t.MixPose||(t.MixPose={}));let r;(function(t){t[t["in"]=0]="in";t[t["out"]=1]="out"})(r=t.MixDirection||(t.MixDirection={}));let s;(function(t){t[t["rotate"]=0]="rotate";t[t["translate"]=1]="translate";t[t["scale"]=2]="scale";t[t["shear"]=3]="shear";t[t["attachment"]=4]="attachment";t[t["color"]=5]="color";t[t["deform"]=6]="deform";t[t["event"]=7]="event";t[t["drawOrder"]=8]="drawOrder";t[t["ikConstraint"]=9]="ikConstraint";t[t["transformConstraint"]=10]="transformConstraint";t[t["pathConstraintPosition"]=11]="pathConstraintPosition";t[t["pathConstraintSpacing"]=12]="pathConstraintSpacing";t[t["pathConstraintMix"]=13]="pathConstraintMix";t[t["twoColor"]=14]="twoColor"})(s=t.TimelineType||(t.TimelineType={}));class n{constructor(e){if(e<=0){throw new Error("frameCount must be > 0: "+e)}this.curves=t.Utils.newFloatArray((e-1)*n.BEZIER_SIZE)}getFrameCount(){return this.curves.length/n.BEZIER_SIZE+1}setLinear(t){this.curves[t*n.BEZIER_SIZE]=n.LINEAR}setStepped(t){this.curves[t*n.BEZIER_SIZE]=n.STEPPED}getCurveType(t){let e=t*n.BEZIER_SIZE;if(e==this.curves.length){return n.LINEAR}let i=this.curves[e];if(i==n.LINEAR){return n.LINEAR}if(i==n.STEPPED){return n.STEPPED}return n.BEZIER}setCurve(t,e,i,r,s){let a=(-e*2+r)*.03,l=(-i*2+s)*.03;let o=((e-r)*3+1)*.006,h=((i-s)*3+1)*.006;let u=a*2+o,c=l*2+h;let d=e*.3+a+o*.16666667,f=i*.3+l+h*.16666667;let p=t*n.BEZIER_SIZE;let g=this.curves;g[p++]=n.BEZIER;let m=d,_=f;for(let t=p+n.BEZIER_SIZE-1;p<t;p+=2){g[p]=m;g[p+1]=_;d+=u;f+=c;u+=o;c+=h;m+=d;_+=f}}getCurvePercent(e,i){i=t.MathUtils.clamp(i,0,1);let r=this.curves;let s=e*n.BEZIER_SIZE;let a=r[s];if(a==n.LINEAR){return i}if(a==n.STEPPED){return 0}s++;let l=0;for(let t=s,e=s+n.BEZIER_SIZE-1;s<e;s+=2){l=r[s];if(l>=i){let e,n;if(s==t){e=0;n=0}else{e=r[s-2];n=r[s-1]}return n+(r[s+1]-n)*(i-e)/(l-e)}}let o=r[s-1];return o+(1-o)*(i-l)/(1-l)}}n.LINEAR=0;n.STEPPED=1;n.BEZIER=2;n.BEZIER_SIZE=10*2-1;t.CurveTimeline=n;class a extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e<<1)}getPropertyId(){return(s.rotate<<24)+this.boneIndex}setFrame(t,e,i){t<<=1;this.frames[t]=e;this.frames[t+a.ROTATION]=i}apply(t,r,s,n,l,o,h){let u=this.frames;let c=t.bones[this.boneIndex];if(s<u[0]){switch(o){case i.setup:c.rotation=c.data.rotation;return;case i.current:let t=c.data.rotation-c.rotation;t-=(16384-(16384.499999999996-t/360|0))*360;c.rotation+=t*l}return}if(s>=u[u.length-a.ENTRIES]){if(o==i.setup){c.rotation=c.data.rotation+u[u.length+a.PREV_ROTATION]*l}else{let t=c.data.rotation+u[u.length+a.PREV_ROTATION]-c.rotation;t-=(16384-(16384.499999999996-t/360|0))*360;c.rotation+=t*l}return}let d=e.binarySearch(u,s,a.ENTRIES);let f=u[d+a.PREV_ROTATION];let p=u[d];let g=this.getCurvePercent((d>>1)-1,1-(s-p)/(u[d+a.PREV_TIME]-p));let m=u[d+a.ROTATION]-f;m-=(16384-(16384.499999999996-m/360|0))*360;m=f+m*g;if(o==i.setup){m-=(16384-(16384.499999999996-m/360|0))*360;c.rotation=c.data.rotation+m*l}else{m=c.data.rotation+m-c.rotation;m-=(16384-(16384.499999999996-m/360|0))*360;c.rotation+=m*l}}}a.ENTRIES=2;a.PREV_TIME=-2;a.PREV_ROTATION=-1;a.ROTATION=1;t.RotateTimeline=a;class l extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*l.ENTRIES)}getPropertyId(){return(s.translate<<24)+this.boneIndex}setFrame(t,e,i,r){t*=l.ENTRIES;this.frames[t]=e;this.frames[t+l.X]=i;this.frames[t+l.Y]=r}apply(t,r,s,n,a,o,h){let u=this.frames;let c=t.bones[this.boneIndex];if(s<u[0]){switch(o){case i.setup:c.x=c.data.x;c.y=c.data.y;return;case i.current:c.x+=(c.data.x-c.x)*a;c.y+=(c.data.y-c.y)*a}return}let d=0,f=0;if(s>=u[u.length-l.ENTRIES]){d=u[u.length+l.PREV_X];f=u[u.length+l.PREV_Y]}else{let t=e.binarySearch(u,s,l.ENTRIES);d=u[t+l.PREV_X];f=u[t+l.PREV_Y];let i=u[t];let r=this.getCurvePercent(t/l.ENTRIES-1,1-(s-i)/(u[t+l.PREV_TIME]-i));d+=(u[t+l.X]-d)*r;f+=(u[t+l.Y]-f)*r}if(o==i.setup){c.x=c.data.x+d*a;c.y=c.data.y+f*a}else{c.x+=(c.data.x+d-c.x)*a;c.y+=(c.data.y+f-c.y)*a}}}l.ENTRIES=3;l.PREV_TIME=-3;l.PREV_X=-2;l.PREV_Y=-1;l.X=1;l.Y=2;t.TranslateTimeline=l;class o extends l{constructor(t){super(t)}getPropertyId(){return(s.scale<<24)+this.boneIndex}apply(s,n,a,l,h,u,c){let d=this.frames;let f=s.bones[this.boneIndex];if(a<d[0]){switch(u){case i.setup:f.scaleX=f.data.scaleX;f.scaleY=f.data.scaleY;return;case i.current:f.scaleX+=(f.data.scaleX-f.scaleX)*h;f.scaleY+=(f.data.scaleY-f.scaleY)*h}return}let p=0,g=0;if(a>=d[d.length-o.ENTRIES]){p=d[d.length+o.PREV_X]*f.data.scaleX;g=d[d.length+o.PREV_Y]*f.data.scaleY}else{let t=e.binarySearch(d,a,o.ENTRIES);p=d[t+o.PREV_X];g=d[t+o.PREV_Y];let i=d[t];let r=this.getCurvePercent(t/o.ENTRIES-1,1-(a-i)/(d[t+o.PREV_TIME]-i));p=(p+(d[t+o.X]-p)*r)*f.data.scaleX;g=(g+(d[t+o.Y]-g)*r)*f.data.scaleY}if(h==1){f.scaleX=p;f.scaleY=g}else{let e=0,s=0;if(u==i.setup){e=f.data.scaleX;s=f.data.scaleY}else{e=f.scaleX;s=f.scaleY}if(c==r.out){p=Math.abs(p)*t.MathUtils.signum(e);g=Math.abs(g)*t.MathUtils.signum(s)}else{e=Math.abs(e)*t.MathUtils.signum(p);s=Math.abs(s)*t.MathUtils.signum(g)}f.scaleX=e+(p-e)*h;f.scaleY=s+(g-s)*h}}}t.ScaleTimeline=o;class h extends l{constructor(t){super(t)}getPropertyId(){return(s.shear<<24)+this.boneIndex}apply(t,r,s,n,a,l,o){let u=this.frames;let c=t.bones[this.boneIndex];if(s<u[0]){switch(l){case i.setup:c.shearX=c.data.shearX;c.shearY=c.data.shearY;return;case i.current:c.shearX+=(c.data.shearX-c.shearX)*a;c.shearY+=(c.data.shearY-c.shearY)*a}return}let d=0,f=0;if(s>=u[u.length-h.ENTRIES]){d=u[u.length+h.PREV_X];f=u[u.length+h.PREV_Y]}else{let t=e.binarySearch(u,s,h.ENTRIES);d=u[t+h.PREV_X];f=u[t+h.PREV_Y];let i=u[t];let r=this.getCurvePercent(t/h.ENTRIES-1,1-(s-i)/(u[t+h.PREV_TIME]-i));d=d+(u[t+h.X]-d)*r;f=f+(u[t+h.Y]-f)*r}if(l==i.setup){c.shearX=c.data.shearX+d*a;c.shearY=c.data.shearY+f*a}else{c.shearX+=(c.data.shearX+d-c.shearX)*a;c.shearY+=(c.data.shearY+f-c.shearY)*a}}}t.ShearTimeline=h;class u extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*u.ENTRIES)}getPropertyId(){return(s.color<<24)+this.slotIndex}setFrame(t,e,i,r,s,n){t*=u.ENTRIES;this.frames[t]=e;this.frames[t+u.R]=i;this.frames[t+u.G]=r;this.frames[t+u.B]=s;this.frames[t+u.A]=n}apply(t,r,s,n,a,l,o){let h=t.slots[this.slotIndex];let c=this.frames;if(s<c[0]){switch(l){case i.setup:h.color.setFromColor(h.data.color);return;case i.current:let t=h.color,e=h.data.color;t.add((e.r-t.r)*a,(e.g-t.g)*a,(e.b-t.b)*a,(e.a-t.a)*a)}return}let d=0,f=0,p=0,g=0;if(s>=c[c.length-u.ENTRIES]){let t=c.length;d=c[t+u.PREV_R];f=c[t+u.PREV_G];p=c[t+u.PREV_B];g=c[t+u.PREV_A]}else{let t=e.binarySearch(c,s,u.ENTRIES);d=c[t+u.PREV_R];f=c[t+u.PREV_G];p=c[t+u.PREV_B];g=c[t+u.PREV_A];let i=c[t];let r=this.getCurvePercent(t/u.ENTRIES-1,1-(s-i)/(c[t+u.PREV_TIME]-i));d+=(c[t+u.R]-d)*r;f+=(c[t+u.G]-f)*r;p+=(c[t+u.B]-p)*r;g+=(c[t+u.A]-g)*r}if(a==1){h.color.set(d,f,p,g)}else{let t=h.color;if(l==i.setup){t.setFromColor(h.data.color)}t.add((d-t.r)*a,(f-t.g)*a,(p-t.b)*a,(g-t.a)*a)}}}u.ENTRIES=5;u.PREV_TIME=-5;u.PREV_R=-4;u.PREV_G=-3;u.PREV_B=-2;u.PREV_A=-1;u.R=1;u.G=2;u.B=3;u.A=4;t.ColorTimeline=u;class c extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*c.ENTRIES)}getPropertyId(){return(s.twoColor<<24)+this.slotIndex}setFrame(t,e,i,r,s,n,a,l,o){t*=c.ENTRIES;this.frames[t]=e;this.frames[t+c.R]=i;this.frames[t+c.G]=r;this.frames[t+c.B]=s;this.frames[t+c.A]=n;this.frames[t+c.R2]=a;this.frames[t+c.G2]=l;this.frames[t+c.B2]=o}apply(t,r,s,n,a,l,o){let h=t.slots[this.slotIndex];let u=this.frames;if(s<u[0]){switch(l){case i.setup:h.color.setFromColor(h.data.color);h.darkColor.setFromColor(h.data.darkColor);return;case i.current:let t=h.color,e=h.darkColor,r=h.data.color,s=h.data.darkColor;t.add((r.r-t.r)*a,(r.g-t.g)*a,(r.b-t.b)*a,(r.a-t.a)*a);e.add((s.r-e.r)*a,(s.g-e.g)*a,(s.b-e.b)*a,0)}return}let d=0,f=0,p=0,g=0,m=0,_=0,M=0;if(s>=u[u.length-c.ENTRIES]){let t=u.length;d=u[t+c.PREV_R];f=u[t+c.PREV_G];p=u[t+c.PREV_B];g=u[t+c.PREV_A];m=u[t+c.PREV_R2];_=u[t+c.PREV_G2];M=u[t+c.PREV_B2]}else{let t=e.binarySearch(u,s,c.ENTRIES);d=u[t+c.PREV_R];f=u[t+c.PREV_G];p=u[t+c.PREV_B];g=u[t+c.PREV_A];m=u[t+c.PREV_R2];_=u[t+c.PREV_G2];M=u[t+c.PREV_B2];let i=u[t];let r=this.getCurvePercent(t/c.ENTRIES-1,1-(s-i)/(u[t+c.PREV_TIME]-i));d+=(u[t+c.R]-d)*r;f+=(u[t+c.G]-f)*r;p+=(u[t+c.B]-p)*r;g+=(u[t+c.A]-g)*r;m+=(u[t+c.R2]-m)*r;_+=(u[t+c.G2]-_)*r;M+=(u[t+c.B2]-M)*r}if(a==1){h.color.set(d,f,p,g);h.darkColor.set(m,_,M,1)}else{let t=h.color,e=h.darkColor;if(l==i.setup){t.setFromColor(h.data.color);e.setFromColor(h.data.darkColor)}t.add((d-t.r)*a,(f-t.g)*a,(p-t.b)*a,(g-t.a)*a);e.add((m-e.r)*a,(_-e.g)*a,(M-e.b)*a,0)}}}c.ENTRIES=8;c.PREV_TIME=-8;c.PREV_R=-7;c.PREV_G=-6;c.PREV_B=-5;c.PREV_A=-4;c.PREV_R2=-3;c.PREV_G2=-2;c.PREV_B2=-1;c.R=1;c.G=2;c.B=3;c.A=4;c.R2=5;c.G2=6;c.B2=7;t.TwoColorTimeline=c;class d{constructor(e){this.frames=t.Utils.newFloatArray(e);this.attachmentNames=new Array(e)}getPropertyId(){return(s.attachment<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e;this.attachmentNames[t]=i}apply(t,s,n,a,l,o,h){let u=t.slots[this.slotIndex];if(h==r.out&&o==i.setup){let e=u.data.attachmentName;u.setAttachment(e==null?null:t.getAttachment(this.slotIndex,e));return}let c=this.frames;if(n<c[0]){if(o==i.setup){let e=u.data.attachmentName;u.setAttachment(e==null?null:t.getAttachment(this.slotIndex,e))}return}let d=0;if(n>=c[c.length-1]){d=c.length-1}else{d=e.binarySearch(c,n,1)-1}let f=this.attachmentNames[d];t.slots[this.slotIndex].setAttachment(f==null?null:t.getAttachment(this.slotIndex,f))}}t.AttachmentTimeline=d;var f=null;class p extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e);this.frameVertices=new Array(e);if(f==null){f=t.Utils.newFloatArray(64)}}getPropertyId(){return(s.deform<<27)+ +this.attachment.id+this.slotIndex}setFrame(t,e,i){this.frames[t]=e;this.frameVertices[t]=i}apply(r,s,n,a,l,o,h){let u=r.slots[this.slotIndex];let c=u.getAttachment();if(!(c instanceof t.VertexAttachment)||!c.applyDeform(this.attachment)){return}let d=u.attachmentVertices;if(d.length==0){l=1}let f=this.frameVertices;let p=f[0].length;let g=this.frames;if(n<g[0]){let e=c;switch(o){case i.setup:d.length=0;return;case i.current:if(l==1){d.length=0;break}let r=t.Utils.setArraySize(d,p);if(e.bones==null){var m=e.vertices;for(let t=0;t<p;t++){r[t]+=(m[t]-r[t])*l}}else{l=1-l;for(let t=0;t<p;t++){r[t]*=l}}}return}let _=t.Utils.setArraySize(d,p);if(n>=g[g.length-1]){let e=f[g.length-1];if(l==1){t.Utils.arrayCopy(e,0,_,0,p)}else if(o==i.setup){let t=c;if(t.bones==null){let i=t.vertices;for(let t=0;t<p;t++){let r=i[t];_[t]=r+(e[t]-r)*l}}else{for(let t=0;t<p;t++){_[t]=e[t]*l}}}else{for(let t=0;t<p;t++){_[t]+=(e[t]-_[t])*l}}return}let M=e.binarySearch(g,n);let y=f[M-1];let w=f[M];let v=g[M];let E=this.getCurvePercent(M-1,1-(n-v)/(g[M-1]-v));if(l==1){for(let t=0;t<p;t++){let e=y[t];_[t]=e+(w[t]-e)*E}}else if(o==i.setup){let t=c;if(t.bones==null){let e=t.vertices;for(let t=0;t<p;t++){let i=y[t],r=e[t];_[t]=r+(i+(w[t]-i)*E-r)*l}}else{for(let t=0;t<p;t++){let e=y[t];_[t]=(e+(w[t]-e)*E)*l}}}else{for(let t=0;t<p;t++){let e=y[t];_[t]+=(e+(w[t]-e)*E-_[t])*l}}}}t.DeformTimeline=p;class g{constructor(e){this.frames=t.Utils.newFloatArray(e);this.events=new Array(e)}getPropertyId(){return s.event<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time;this.events[t]=e}apply(t,i,r,s,n,a,l){if(s==null){return}let o=this.frames;let h=this.frames.length;if(i>r){this.apply(t,i,Number.MAX_VALUE,s,n,a,l);i=-1}else if(i>=o[h-1]){return}if(r<o[0]){return}let u=0;if(i<o[0]){u=0}else{u=e.binarySearch(o,i);let t=o[u];while(u>0){if(o[u-1]!=t){break}u--}}for(;u<h&&r>=o[u];u++){s.push(this.events[u])}}}t.EventTimeline=g;class m{constructor(e){this.frames=t.Utils.newFloatArray(e);this.drawOrders=new Array(e)}getPropertyId(){return s.drawOrder<<24}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e;this.drawOrders[t]=i}apply(s,n,a,l,o,h,u){let c=s.drawOrder;let d=s.slots;if(u==r.out&&h==i.setup){t.Utils.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length);return}let f=this.frames;if(a<f[0]){if(h==i.setup){t.Utils.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length)}return}let p=0;if(a>=f[f.length-1]){p=f.length-1}else{p=e.binarySearch(f,a)-1}let g=this.drawOrders[p];if(g==null){t.Utils.arrayCopy(d,0,c,0,d.length)}else{for(let t=0,e=g.length;t<e;t++){c[t]=d[g[t]]}}}}t.DrawOrderTimeline=m;class _ extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*_.ENTRIES)}getPropertyId(){return(s.ikConstraint<<24)+this.ikConstraintIndex}setFrame(t,e,i,r){t*=_.ENTRIES;this.frames[t]=e;this.frames[t+_.MIX]=i;this.frames[t+_.BEND_DIRECTION]=r}apply(t,s,n,a,l,o,h){let u=this.frames;let c=t.ikConstraints[this.ikConstraintIndex];if(n<u[0]){switch(o){case i.setup:c.mix=c.data.mix;c.bendDirection=c.data.bendDirection;return;case i.current:c.mix+=(c.data.mix-c.mix)*l;c.bendDirection=c.data.bendDirection}return}if(n>=u[u.length-_.ENTRIES]){if(o==i.setup){c.mix=c.data.mix+(u[u.length+_.PREV_MIX]-c.data.mix)*l;c.bendDirection=h==r.out?c.data.bendDirection:u[u.length+_.PREV_BEND_DIRECTION]}else{c.mix+=(u[u.length+_.PREV_MIX]-c.mix)*l;if(h==r.in){c.bendDirection=u[u.length+_.PREV_BEND_DIRECTION]}}return}let d=e.binarySearch(u,n,_.ENTRIES);let f=u[d+_.PREV_MIX];let p=u[d];let g=this.getCurvePercent(d/_.ENTRIES-1,1-(n-p)/(u[d+_.PREV_TIME]-p));if(o==i.setup){c.mix=c.data.mix+(f+(u[d+_.MIX]-f)*g-c.data.mix)*l;c.bendDirection=h==r.out?c.data.bendDirection:u[d+_.PREV_BEND_DIRECTION]}else{c.mix+=(f+(u[d+_.MIX]-f)*g-c.mix)*l;if(h==r.in){c.bendDirection=u[d+_.PREV_BEND_DIRECTION]}}}}_.ENTRIES=3;_.PREV_TIME=-3;_.PREV_MIX=-2;_.PREV_BEND_DIRECTION=-1;_.MIX=1;_.BEND_DIRECTION=2;t.IkConstraintTimeline=_;class M extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*M.ENTRIES)}getPropertyId(){return(s.transformConstraint<<24)+this.transformConstraintIndex}setFrame(t,e,i,r,s,n){t*=M.ENTRIES;this.frames[t]=e;this.frames[t+M.ROTATE]=i;this.frames[t+M.TRANSLATE]=r;this.frames[t+M.SCALE]=s;this.frames[t+M.SHEAR]=n}apply(t,r,s,n,a,l,o){let h=this.frames;let u=t.transformConstraints[this.transformConstraintIndex];if(s<h[0]){let t=u.data;switch(l){case i.setup:u.rotateMix=t.rotateMix;u.translateMix=t.translateMix;u.scaleMix=t.scaleMix;u.shearMix=t.shearMix;return;case i.current:u.rotateMix+=(t.rotateMix-u.rotateMix)*a;u.translateMix+=(t.translateMix-u.translateMix)*a;u.scaleMix+=(t.scaleMix-u.scaleMix)*a;u.shearMix+=(t.shearMix-u.shearMix)*a}return}let c=0,d=0,f=0,p=0;if(s>=h[h.length-M.ENTRIES]){let t=h.length;c=h[t+M.PREV_ROTATE];d=h[t+M.PREV_TRANSLATE];f=h[t+M.PREV_SCALE];p=h[t+M.PREV_SHEAR]}else{let t=e.binarySearch(h,s,M.ENTRIES);c=h[t+M.PREV_ROTATE];d=h[t+M.PREV_TRANSLATE];f=h[t+M.PREV_SCALE];p=h[t+M.PREV_SHEAR];let i=h[t];let r=this.getCurvePercent(t/M.ENTRIES-1,1-(s-i)/(h[t+M.PREV_TIME]-i));c+=(h[t+M.ROTATE]-c)*r;d+=(h[t+M.TRANSLATE]-d)*r;f+=(h[t+M.SCALE]-f)*r;p+=(h[t+M.SHEAR]-p)*r}if(l==i.setup){let t=u.data;u.rotateMix=t.rotateMix+(c-t.rotateMix)*a;u.translateMix=t.translateMix+(d-t.translateMix)*a;u.scaleMix=t.scaleMix+(f-t.scaleMix)*a;u.shearMix=t.shearMix+(p-t.shearMix)*a}else{u.rotateMix+=(c-u.rotateMix)*a;u.translateMix+=(d-u.translateMix)*a;u.scaleMix+=(f-u.scaleMix)*a;u.shearMix+=(p-u.shearMix)*a}}}M.ENTRIES=5;M.PREV_TIME=-5;M.PREV_ROTATE=-4;M.PREV_TRANSLATE=-3;M.PREV_SCALE=-2;M.PREV_SHEAR=-1;M.ROTATE=1;M.TRANSLATE=2;M.SCALE=3;M.SHEAR=4;t.TransformConstraintTimeline=M;class y extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*y.ENTRIES)}getPropertyId(){return(s.pathConstraintPosition<<24)+this.pathConstraintIndex}setFrame(t,e,i){t*=y.ENTRIES;this.frames[t]=e;this.frames[t+y.VALUE]=i}apply(t,r,s,n,a,l,o){let h=this.frames;let u=t.pathConstraints[this.pathConstraintIndex];if(s<h[0]){switch(l){case i.setup:u.position=u.data.position;return;case i.current:u.position+=(u.data.position-u.position)*a}return}let c=0;if(s>=h[h.length-y.ENTRIES]){c=h[h.length+y.PREV_VALUE]}else{let t=e.binarySearch(h,s,y.ENTRIES);c=h[t+y.PREV_VALUE];let i=h[t];let r=this.getCurvePercent(t/y.ENTRIES-1,1-(s-i)/(h[t+y.PREV_TIME]-i));c+=(h[t+y.VALUE]-c)*r}if(l==i.setup){u.position=u.data.position+(c-u.data.position)*a}else{u.position+=(c-u.position)*a}}}y.ENTRIES=2;y.PREV_TIME=-2;y.PREV_VALUE=-1;y.VALUE=1;t.PathConstraintPositionTimeline=y;class w extends y{constructor(t){super(t)}getPropertyId(){return(s.pathConstraintSpacing<<24)+this.pathConstraintIndex}apply(t,r,s,n,a,l,o){let h=this.frames;let u=t.pathConstraints[this.pathConstraintIndex];if(s<h[0]){switch(l){case i.setup:u.spacing=u.data.spacing;return;case i.current:u.spacing+=(u.data.spacing-u.spacing)*a}return}let c=0;if(s>=h[h.length-w.ENTRIES]){c=h[h.length+w.PREV_VALUE]}else{let t=e.binarySearch(h,s,w.ENTRIES);c=h[t+w.PREV_VALUE];let i=h[t];let r=this.getCurvePercent(t/w.ENTRIES-1,1-(s-i)/(h[t+w.PREV_TIME]-i));c+=(h[t+w.VALUE]-c)*r}if(l==i.setup){u.spacing=u.data.spacing+(c-u.data.spacing)*a}else{u.spacing+=(c-u.spacing)*a}}}t.PathConstraintSpacingTimeline=w;class v extends n{constructor(e){super(e);this.frames=t.Utils.newFloatArray(e*v.ENTRIES)}getPropertyId(){return(s.pathConstraintMix<<24)+this.pathConstraintIndex}setFrame(t,e,i,r){t*=v.ENTRIES;this.frames[t]=e;this.frames[t+v.ROTATE]=i;this.frames[t+v.TRANSLATE]=r}apply(t,r,s,n,a,l,o){let h=this.frames;let u=t.pathConstraints[this.pathConstraintIndex];if(s<h[0]){switch(l){case i.setup:u.rotateMix=u.data.rotateMix;u.translateMix=u.data.translateMix;return;case i.current:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*a;u.translateMix+=(u.data.translateMix-u.translateMix)*a}return}let c=0,d=0;if(s>=h[h.length-v.ENTRIES]){c=h[h.length+v.PREV_ROTATE];d=h[h.length+v.PREV_TRANSLATE]}else{let t=e.binarySearch(h,s,v.ENTRIES);c=h[t+v.PREV_ROTATE];d=h[t+v.PREV_TRANSLATE];let i=h[t];let r=this.getCurvePercent(t/v.ENTRIES-1,1-(s-i)/(h[t+v.PREV_TIME]-i));c+=(h[t+v.ROTATE]-c)*r;d+=(h[t+v.TRANSLATE]-d)*r}if(l==i.setup){u.rotateMix=u.data.rotateMix+(c-u.data.rotateMix)*a;u.translateMix=u.data.translateMix+(d-u.data.translateMix)*a}else{u.rotateMix+=(c-u.rotateMix)*a;u.translateMix+=(d-u.translateMix)*a}}}v.ENTRIES=3;v.PREV_TIME=-3;v.PREV_ROTATE=-2;v.PREV_TRANSLATE=-1;v.ROTATE=1;v.TRANSLATE=2;t.PathConstraintMixTimeline=v})(spine||(spine={}));var spine;(function(t){class e{constructor(e){this.trackEntryArr=new Array;this.events=new Array;this.listeners=new Array;this.eventQueue=new t.EventQueue(this);this.propertyIDs=new t.IntSet;this.mixingTo=new Array;this.animationsChanged=false;this.timeScale=1;this.trackEntryPool=new t.Pool(()=>new t.TrackEntry);this.data=e}dispose(){this.data=null;this.trackEntryArr.length=0;this.events.length=0;this.listeners.length=0;this.eventQueue=null;this.mixingTo.length=0}setPlayTime(t){let e=this.trackEntryArr;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r==null){continue}r.animationLast=r.nextAnimationLast;r.trackLast=r.nextTrackLast;r.trackTime=t}this.eventQueue.drain()}update(t){t*=this.timeScale;let e=this.trackEntryArr;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r==null){continue}r.animationLast=r.nextAnimationLast;r.trackLast=r.nextTrackLast;let s=t*r.timeScale;if(r.delay>0){r.delay-=s;if(r.delay>0){continue}s=-r.delay;r.delay=0}let n=r.next;if(n!=null){let e=r.trackLast-n.delay;if(e>=0){n.delay=0;n.trackTime=e+t*n.timeScale;r.trackTime+=s;this.setCurrent(i,n,true);while(n.mixingFrom!=null){n.mixTime+=s;n=n.mixingFrom}continue}}else if(r.trackLast>=r.trackEnd&&r.mixingFrom==null){e[i]=null;this.eventQueue.end(r);this.disposeNext(r);continue}if(r.mixingFrom!=null&&this.updateMixingFrom(r,t)){let t=r.mixingFrom;r.mixingFrom=null;while(t!=null){this.eventQueue.end(t);t=t.mixingFrom}}r.trackTime+=s}this.eventQueue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(i==null){return true}let r=this.updateMixingFrom(i,e);if(t.mixTime>0&&(t.mixTime>=t.mixDuration||t.timeScale==0)){if(i.totalAlpha==0||t.mixDuration==0){t.mixingFrom=i.mixingFrom;t.interruptAlpha=i.interruptAlpha;this.eventQueue.end(i)}return r}i.animationLast=i.nextAnimationLast;i.trackLast=i.nextTrackLast;i.trackTime+=e*i.timeScale;t.mixTime+=e*t.timeScale;return false}apply(i){if(i==null){throw new Error("skeleton cannot be null.")}if(this.animationsChanged){this._animationsChanged()}let r=this.events;let s=this.trackEntryArr;let n=false;for(let a=0,l=s.length;a<l;a++){let l=s[a];if(l==null||l.delay>0){continue}n=true;let o=a==0?t.MixPose.current:t.MixPose.currentLayered;let h=l.alpha;if(l.mixingFrom!=null){h*=this.applyMixingFrom(l,i,o);if(l.mixingFrom){this.trackEntryPool.free(l.mixingFrom);l.mixingFrom=null}}else if(l.trackTime>=l.trackEnd&&l.next==null){h=0}let u=l.animationLast,c=l.getAnimationTime();let d=l.animation.timelines.length;let f=l.animation.timelines;if(h==1){for(let e=0;e<d;e++){f[e].apply(i,u,c,r,1,t.MixPose.setup,t.MixDirection.in)}}else{let s=l.timelineData;let n=l.timelinesRotation.length==0;if(n){t.Utils.setArraySize(l.timelinesRotation,d<<1,null)}let a=l.timelinesRotation;for(let l=0;l<d;l++){let d=f[l];let p=s[l]>=e.FIRST?t.MixPose.setup:o;if(d instanceof t.RotateTimeline){this.applyRotateTimeline(d,i,c,h,p,a,l<<1,n)}else{d.apply(i,u,c,r,h,p,t.MixDirection.in)}}}this.queueEvents(l,c);r.length=0;l.nextAnimationLast=c;l.nextTrackLast=l.trackTime}this.eventQueue.drain();return n}applyMixingFrom(i,r,s){let n=i.mixingFrom;if(n.mixingFrom!=null){this.applyMixingFrom(n,r,s)}let a=0;if(i.mixDuration==0){a=1;s=t.MixPose.setup}else{a=i.mixTime/i.mixDuration;if(a>1){a=1}}let l=a<n.eventThreshold?this.events:null;let o=a<n.attachmentThreshold,h=a<n.drawOrderThreshold;let u=n.animationLast,c=n.getAnimationTime();let d=n.animation.timelines.length;let f=n.animation.timelines;let p=n.timelineData;let g=n.timelineDipMix;let m=n.timelinesRotation.length==0;if(m){t.Utils.setArraySize(n.timelinesRotation,d<<1,null)}let _=n.timelinesRotation;let M;let y=n.alpha*i.interruptAlpha,w=y*(1-a),v=0;n.totalAlpha=0;for(var E=0;E<d;E++){let i=f[E];switch(p[E]){case e.SUBSEQUENT:if(!o&&i instanceof t.AttachmentTimeline){continue}if(!h&&i instanceof t.DrawOrderTimeline){continue}M=s;v=w;break;case e.FIRST:M=t.MixPose.setup;v=w;break;case e.DIP:M=t.MixPose.setup;v=y;break;default:M=t.MixPose.setup;v=y;let r=g[E];v*=Math.max(0,1-r.mixTime/r.mixDuration);break}n.totalAlpha+=v;if(i instanceof t.RotateTimeline){this.applyRotateTimeline(i,r,c,v,M,_,E<<1,m)}else{i.apply(r,u,c,l,v,M,t.MixDirection.out)}}if(i.mixDuration>0){this.queueEvents(n,c)}this.events.length=0;n.nextAnimationLast=c;n.nextTrackLast=n.trackTime;return a}applyRotateTimeline(e,i,r,s,n,a,l,o){if(o){a[l]=0}if(s==1){e.apply(i,0,r,null,1,n,t.MixDirection.in);return}let h=e;let u=h.frames;let c=i.bones[h.boneIndex];if(r<u[0]){if(n==t.MixPose.setup){c.rotation=c.data.rotation}return}let d=0;if(r>=u[u.length-t.RotateTimeline.ENTRIES]){d=c.data.rotation+u[u.length+t.RotateTimeline.PREV_ROTATION]}else{let e=t.Animation.binarySearch(u,r,t.RotateTimeline.ENTRIES);let i=u[e+t.RotateTimeline.PREV_ROTATION];let s=u[e];let n=h.getCurvePercent((e>>1)-1,1-(r-s)/(u[e+t.RotateTimeline.PREV_TIME]-s));d=u[e+t.RotateTimeline.ROTATION]-i;d-=(16384-(16384.499999999996-d/360|0))*360;d=i+d*n+c.data.rotation;d-=(16384-(16384.499999999996-d/360|0))*360}let f=n==t.MixPose.setup?c.data.rotation:c.rotation;let p=0,g=d-f;if(g==0){p=a[l]}else{g-=(16384-(16384.499999999996-g/360|0))*360;let e=0,i=0;if(o){e=0;i=g}else{e=a[l];i=a[l+1]}let r=g>0,s=e>=0;if(t.MathUtils.signum(i)!=t.MathUtils.signum(g)&&Math.abs(i)<=90){if(Math.abs(e)>180){e+=360*t.MathUtils.signum(e)}s=r}p=g+e-e%360;if(s!=r){p+=360*t.MathUtils.signum(e)}a[l]=p}a[l+1]=g;f+=p*s;c.rotation=f-(16384-(16384.499999999996-f/360|0))*360}queueEvents(t,e){let i=t.animationStart,r=t.animationEnd;let s=r-i;let n=t.trackLast%s;let a=this.events;let l=0,o=a.length;for(;l<o;l++){let e=a[l];if(e.time<n){break}if(e.time>r){continue}this.eventQueue.event(t,e)}if(t.loop?n>t.trackTime%s:e>=r&&t.animationLast<r){this.eventQueue.complete(t)}for(;l<o;l++){let e=a[l];if(e.time<i){continue}this.eventQueue.event(t,a[l])}}clearTracks(){let t=this.eventQueue.drainDisabled;this.eventQueue.drainDisabled=true;for(let t=0,e=this.trackEntryArr.length;t<e;t++){this.clearTrack(t)}this.trackEntryArr.length=0;this.eventQueue.drainDisabled=t;this.eventQueue.drain()}clearTrack(t){if(t>=this.trackEntryArr.length){return}let e=this.trackEntryArr[t];if(e==null){return}this.eventQueue.end(e);this.disposeNext(e);let i=e;while(true){let t=i.mixingFrom;if(t==null){break}this.eventQueue.end(t);i.mixingFrom=null;i=t}this.trackEntryArr[e.trackIndex]=null;this.eventQueue.drain()}setCurrent(t,e,i){let r=this.expandToIndex(t);this.trackEntryArr[t]=e;if(r!=null){if(i){this.eventQueue.interrupt(r)}e.mixingFrom=r;e.mixTime=0;if(r.mixingFrom!=null&&r.mixDuration>0){e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)}r.timelinesRotation.length=0}this.eventQueue.start(e)}setAnimation(t,e,i){let r=this.data.skeletonData.findAnimation(e);if(r==null){logW("无"+e+"动作");return null}return this.setAnimationWith(t,r,i)}setAnimationWith(t,e,i){if(e==null){throw new Error("animation cannot be null.")}let r=true;let s=this.expandToIndex(t);if(s!=null){if(s.nextTrackLast==-1){this.trackEntryArr[t]=s.mixingFrom;this.eventQueue.interrupt(s);this.eventQueue.end(s);this.disposeNext(s);s=s.mixingFrom;r=false}else{this.disposeNext(s)}}let n=this.trackEntry(t,e,i,s);this.setCurrent(t,n,r);this.eventQueue.drain();return n}addAnimation(t,e,i,r){let s=this.data.skeletonData.findAnimation(e);if(s==null){throw new Error("Animation not found: "+e)}return this.addAnimationWith(t,s,i,r)}addAnimationWith(t,e,i,r){if(e==null){throw new Error("animation cannot be null.")}let s=this.expandToIndex(t);if(s!=null){while(s.next!=null){s=s.next}}let n=this.trackEntry(t,e,i,s);if(s==null){this.setCurrent(t,n,true);this.eventQueue.drain()}else{s.next=n;if(r<=0){let t=s.animationEnd-s.animationStart;if(t!=0){if(s.loop){r+=t*(1+(s.trackTime/t|0))}else{r+=t}r-=this.data.getMix(s.animation,e)}else{r=0}}}n.delay=r;return n}setEmptyAnimation(t,i){let r=this.setAnimationWith(t,e.emptyAnimation,false);r.mixDuration=i;r.trackEnd=i;return r}addEmptyAnimation(t,i,r){if(r<=0){r-=i}let s=this.addAnimationWith(t,e.emptyAnimation,false,r);s.mixDuration=i;s.trackEnd=i;return s}setEmptyAnimations(t){let e=this.eventQueue.drainDisabled;this.eventQueue.drainDisabled=true;for(let e=0,i=this.trackEntryArr.length;e<i;e++){let i=this.trackEntryArr[e];if(i!=null){this.setEmptyAnimation(i.trackIndex,t)}}this.eventQueue.drainDisabled=e;this.eventQueue.drain()}expandToIndex(e){if(e<this.trackEntryArr.length){return this.trackEntryArr[e]}t.Utils.ensureArrayCapacity(this.trackEntryArr,e-this.trackEntryArr.length+1,null);this.trackEntryArr.length=e+1;return null}trackEntry(t,e,i,r){let s=this.trackEntryPool.obtain();s.trackIndex=t;s.animation=e;s.loop=i;s.eventThreshold=0;s.attachmentThreshold=0;s.drawOrderThreshold=0;s.animationStart=0;s.animationEnd=e.duration;s.animationLast=-1;s.nextAnimationLast=-1;s.delay=0;s.trackTime=0;s.trackLast=-1;s.nextTrackLast=-1;s.trackEnd=Number.MAX_VALUE;s.timeScale=1;s.alpha=1;s.interruptAlpha=1;s.mixTime=0;s.mixDuration=r==null?0:this.data.getMix(r.animation,e);s.tracekName=e.name;return s}disposeNext(t){let e=t.next;while(e!=null){this.eventQueue.dispose(e);e=e.next}t.next=null}_animationsChanged(){this.animationsChanged=false;let t=this.propertyIDs;t.clear();let e=this.mixingTo;for(var i=0,r=this.trackEntryArr.length;i<r;i++){let r=this.trackEntryArr[i];if(r!=null){r.setTimelineData(null,e,t)}}}getCurrent(t){if(t>=this.trackEntryArr.length){return null}return this.trackEntryArr[t]}addListener(t){if(t==null){throw new Error("listener cannot be null.")}this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);if(e>=0){this.listeners.splice(e,1)}}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.eventQueue.clear()}}e.emptyAnimation=new t.Animation("<empty>",[],0,null);e.SUBSEQUENT=0;e.FIRST=1;e.DIP=2;e.DIP_MIX=3;t.AnimationState=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){this.array=new Array}add(t){let e=this.contains(t);this.array[t|0]=t|0;return!e}contains(t){return this.array[t|0]!=undefined}remove(t){this.array[t|0]=undefined}clear(){this.array.length=0}}t.IntSet=e;class i{constructor(t=0,e=0,i=0,r=0){this.r=t;this.g=e;this.b=i;this.a=r}set(t,e,i,r){this.r=t;this.g=e;this.b=i;this.a=r;this.clamp();return this}setFromColor(t){this.r=t.r;this.g=t.g;this.b=t.b;this.a=t.a;return this}setFromString(t){t=t.charAt(0)=="#"?t.substr(1):t;this.r=parseInt(t.substr(0,2),16)/255;this.g=parseInt(t.substr(2,2),16)/255;this.b=parseInt(t.substr(4,2),16)/255;this.a=(t.length!=8?255:parseInt(t.substr(6,2),16))/255;return this}add(t,e,i,r){this.r+=t;this.g+=e;this.b+=i;this.a+=r;this.clamp();return this}clamp(){if(this.r<0){this.r=0}else if(this.r>1){this.r=1}if(this.g<0){this.g=0}else if(this.g>1){this.g=1}if(this.b<0){this.b=0}else if(this.b>1){this.b=1}if(this.a<0){this.a=0}else if(this.a>1){this.a=1}return this}static rgba8888ToColor(t,e){t.r=((e&4278190080)>>>24)/255;t.g=((e&16711680)>>>16)/255;t.b=((e&65280)>>>8)/255;t.a=(e&255)/255}static rgb888ToColor(t,e){t.r=((e&16711680)>>>16)/255;t.g=((e&65280)>>>8)/255;t.b=(e&255)/255}}i.WHITE=new i(1,1,1,1);i.RED=new i(1,0,0,1);i.GREEN=new i(0,1,0,1);i.BLUE=new i(0,0,1,1);i.MAGENTA=new i(1,0,1,1);t.Color=i;class r{static clamp(t,e,i){if(t<e){return e}if(t>i){return i}return t}static cosDeg(t){return Math.cos(t*r.degRad)}static sinDeg(t){return Math.sin(t*r.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return r.randomTriangularWith(t,e,(t+e)*.5)}static randomTriangularWith(t,e,i){let r=Math.random();let s=e-t;if(r<=(i-t)/s){return t+Math.sqrt(r*s*(i-t))}return e-Math.sqrt((1-r)*s*(e-i))}}r.PI=3.1415927;r.PI2=r.PI*2;r.radiansToDegrees=180/r.PI;r.radDeg=r.radiansToDegrees;r.degreesToRadians=r.PI/180;r.degRad=r.degreesToRadians;t.MathUtils=r;class s{apply(t,e,i){return t+(e-t)*this.applyInternal(i)}}t.Interpolation=s;class n extends s{constructor(t){super();this.power=2;this.power=t}applyInternal(t){if(t<=.5){return Math.pow(t*2,this.power)/2}return Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}}t.Pow=n;class a extends n{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}t.PowOut=a;class l{static arrayCopy(t,e,i,r,s){for(let n=e,a=r;n<e+s;n++,a++){i[a]=t[n]}}static setArraySize(t,e,i=0){let r=t.length;if(r==e){return t}t.length=e;if(r<e){for(let s=r;s<e;s++){t[s]=i}}return t}static ensureArrayCapacity(t,e,i=0){if(t.length>=e){return t}return l.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let r=0;r<t;r++){i[r]=e}return i}static newFloatArray(t){if(l.SUPPORTS_TYPED_ARRAYS){return new Float32Array(t)}else{let e=new Array(t);for(let t=0;t<e.length;t++){e[t]=0}return e}}static newShortArray(t){if(l.SUPPORTS_TYPED_ARRAYS){return new Int16Array(t)}else{let e=new Array(t);for(let t=0;t<e.length;t++){e[t]=0}return e}}static toFloatArray(t){return l.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return l.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}}l.SUPPORTS_TYPED_ARRAYS=typeof Float32Array!=="undefined";t.Utils=l;class o{static logBones(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e];console.log(i.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.worldX+", "+i.worldY)}}}t.DebugUtils=o;class h{constructor(t){this.items=new Array;this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){if(t.reset){t.reset()}this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++){if(t[e].reset){t[e].reset()}this.items[e]=t[e]}}clear(){this.items.length=0}}t.Pool=h;class u{constructor(t=0,e=0){this.x=t;this.y=e}set(t,e){this.x=t;this.y=e;return this}length(){let t=this.x;let e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();if(t!=0){this.x/=t;this.y/=t}return this}}t.Vector2=u;class c{constructor(){this.maxDelta=64;this.framesPerSecond=0;this.delta=0;this.totalTime=0;this.lastTime=Date.now();this.frameCount=0;this.frameTime=0}update(){var t=Date.now();this.delta=t-this.lastTime;this.frameTime+=this.delta;this.totalTime+=this.delta;if(this.delta>this.maxDelta){this.delta=this.maxDelta}this.lastTime=t;this.frameCount++;if(this.frameTime>1){this.framesPerSecond=this.frameCount/this.frameTime;this.frameTime=0;this.frameCount=0}}}t.TimeKeeper=c;class d{constructor(t=32){this.addedValues=0;this.lastValue=0;this.mean=0;this.dirty=true;this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){if(this.addedValues<this.values.length){this.addedValues++}this.values[this.lastValue++]=t;if(this.lastValue>this.values.length-1){this.lastValue=0}this.dirty=true}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++){t+=this.values[e]}this.mean=t/this.values.length;this.dirty=false}return this.mean}else{return 0}}}t.WindowedMean=d})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e=""){this.assets={};this.errors={};this.toLoad=0;this.loaded=0;this.textureLoader=t;this.pathPrefix=e}get(t){t=this.pathPrefix+t;return this.assets[t]}remove(t){t=this.pathPrefix+t;let e=this.assets[t];if(e.dispose){e.dispose()}this.assets[t]=null}removeAll(){for(let t in this.assets){let e=this.assets[t];if(e.dispose){e.dispose()}}this.assets={}}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}}t.AssetManager=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.atlas=t}newRegionAttachment(e,i,r){let s=this.atlas.findRegion(r);if(s==null){throw new Error("Region not found in atlas: "+r+" (region attachment: "+i+")")}s.renderObject=s;let n=new t.RegionAttachment(i);n.setRegion(s);return n}newMeshAttachment(e,i,r){let s=this.atlas.findRegion(r);if(s==null){return null}s.renderObject=s;let n=new t.MeshAttachment(i);n.region=s;return n}newBoundingBoxAttachment(e,i){return new t.BoundingBoxAttachment(i)}newPathAttachment(e,i){return new t.PathAttachment(i)}newPointAttachment(e,i){return new t.PointAttachment(i)}newClippingAttachment(e,i){return new t.ClippingAttachment(i)}}t.AtlasAttachmentLoader=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){if(t==null){throw new Error("name cannot be null.")}this.name=t}}t.Attachment=e;class i extends e{constructor(t){super(t);this.id=(i.nextID++&65535)<<11;this.worldVerticesLength=0}computeWorldVertices(t,e,i,r,s,n){i=s+(i>>1)*n;let a=t.bone.skeleton;let l=t.attachmentVertices;let o=this.vertices;let h=this.bones;if(h==null){if(l.length>0){o=l}let a=t.bone;let h=a.worldX;let u=a.worldY;let c=a.a,d=a.b,f=a.c,p=a.d;for(let t=e,a=s;a<i;t+=2,a+=n){let e=o[t],i=o[t+1];r[a]=e*c+i*d+h;r[a+1]=e*f+i*p+u}return}let u=0,c=0;for(let t=0;t<e;t+=2){let t=h[u];u+=t+1;c+=t}let d=a.bones;if(l.length==0){for(let t=s,e=c*3;t<i;t+=n){let i=0,s=0;let n=h[u++];n+=u;for(;u<n;u++,e+=3){let t=d[h[u]];let r=o[e],n=o[e+1],a=o[e+2];i+=(r*t.a+n*t.b+t.worldX)*a;s+=(r*t.c+n*t.d+t.worldY)*a}r[t]=i;r[t+1]=s}}else{let t=l;for(let e=s,a=c*3,l=c<<1;e<i;e+=n){let i=0,s=0;let n=h[u++];n+=u;for(;u<n;u++,a+=3,l+=2){let e=d[h[u]];let r=o[a]+t[l],n=o[a+1]+t[l+1],c=o[a+2];i+=(r*e.a+n*e.b+e.worldX)*c;s+=(r*e.c+n*e.d+e.worldY)*c}r[e]=i;r[e+1]=s}}}applyDeform(t){return this==t}}i.nextID=0;t.VertexAttachment=i})(spine||(spine={}));var spine;(function(t){class e extends t.VertexAttachment{constructor(e){super(e);this.color=new t.Color(1,1,1,1)}}t.BoundingBoxAttachment=e})(spine||(spine={}));var spine;(function(t){class e extends t.VertexAttachment{constructor(e){super(e);this.color=new t.Color(.2275,.2275,.8078,1)}}t.ClippingAttachment=e})(spine||(spine={}));var spine;(function(t){class e extends t.VertexAttachment{constructor(e){super(e);this.color=new t.Color(1,1,1,1);this.inheritDeform=false;this.tempColor=new t.Color(0,0,0,0)}updateUVs(){let e=0,i=0,r=0,s=0;if(this.region==null){e=i=0;r=s=1}else{e=this.region.u;i=this.region.v;r=this.region.u2-e;s=this.region.v2-i}let n=this.regionUVs;if(this.uvs==null||this.uvs.length!=n.length){this.uvs=t.Utils.newFloatArray(n.length)}let a=this.uvs;if(this.region.rotate){for(let t=0,l=a.length;t<l;t+=2){a[t]=e+n[t+1]*r;a[t+1]=i+s-n[t]*s}}else{for(let t=0,l=a.length;t<l;t+=2){a[t]=e+n[t]*r;a[t+1]=i+n[t+1]*s}}}applyDeform(t){return this==t||this.inheritDeform&&this.parentMesh==t}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t;if(t!=null){this.bones=t.bones;this.vertices=t.vertices;this.worldVerticesLength=t.worldVerticesLength;this.regionUVs=t.regionUVs;this.triangles=t.triangles;this.hullLength=t.hullLength;this.worldVerticesLength=t.worldVerticesLength}}}t.MeshAttachment=e})(spine||(spine={}));var spine;(function(t){class e extends t.VertexAttachment{constructor(e){super(e);this.closed=false;this.constantSpeed=false;this.color=new t.Color(1,1,1,1)}}t.PathAttachment=e})(spine||(spine={}));var spine;(function(t){class e extends t.VertexAttachment{constructor(e){super(e);this.color=new t.Color(.38,.94,0,1)}computeWorldPosition(t,e){e.x=this.x*t.a+this.y*t.b+t.worldX;e.y=this.x*t.c+this.y*t.d+t.worldY;return e}computeWorldRotation(e){let i=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation);let s=i*e.a+r*e.b;let n=i*e.c+r*e.d;return Math.atan2(n,s)*t.MathUtils.radDeg}}t.PointAttachment=e})(spine||(spine={}));var spine;(function(t){class e extends t.Attachment{constructor(e){super(e);this.x=0;this.y=0;this.scaleX=1;this.scaleY=1;this.rotation=0;this.width=0;this.height=0;this.color=new t.Color(1,1,1,1);this.offset=t.Utils.newFloatArray(8);this.uvs=t.Utils.newFloatArray(8);this.tempColor=new t.Color(1,1,1,1)}updateOffset(){let t=this.width/this.region.originalWidth*this.scaleX;let i=this.height/this.region.originalHeight*this.scaleY;let r=-this.width/2*this.scaleX+this.region.offsetX*t;let s=-this.height/2*this.scaleY+this.region.offsetY*i;let n=r+this.region.width*t;let a=s+this.region.height*i;let l=this.rotation*Math.PI/180;let o=Math.cos(l);let h=Math.sin(l);let u=r*o+this.x;let c=r*h;let d=s*o+this.y;let f=s*h;let p=n*o+this.x;let g=n*h;let m=a*o+this.y;let _=a*h;let M=this.offset;M[e.OX1]=u-f;M[e.OY1]=d+c;M[e.OX2]=u-_;M[e.OY2]=m+c;M[e.OX3]=p-_;M[e.OY3]=m+g;M[e.OX4]=p-f;M[e.OY4]=d+g}setRegion(t){this.region=t;let e=this.uvs;if(t.rotate){e[2]=t.u;e[3]=t.v2;e[4]=t.u;e[5]=t.v;e[6]=t.u2;e[7]=t.v;e[0]=t.u2;e[1]=t.v2}else{e[0]=t.u;e[1]=t.v2;e[2]=t.u;e[3]=t.v;e[4]=t.u2;e[5]=t.v;e[6]=t.u2;e[7]=t.v2}}computeWorldVertices(t,i,r,s){let n=this.offset;let a=t.worldX,l=t.worldY;let o=t.a,h=t.b,u=t.c,c=t.d;let d=0,f=0;d=n[e.OX1];f=n[e.OY1];i[r]=d*o+f*h+a;i[r+1]=d*u+f*c+l;r+=s;d=n[e.OX2];f=n[e.OY2];i[r]=d*o+f*h+a;i[r+1]=d*u+f*c+l;r+=s;d=n[e.OX3];f=n[e.OY3];i[r]=d*o+f*h+a;i[r+1]=d*u+f*c+l;r+=s;d=n[e.OX4];f=n[e.OY4];i[r]=d*o+f*h+a;i[r+1]=d*u+f*c+l}}e.OX1=0;e.OY1=1;e.OX2=2;e.OY2=3;e.OX3=4;e.OY3=5;e.OX4=6;e.OY4=7;e.X1=0;e.Y1=1;e.C1R=2;e.C1G=3;e.C1B=4;e.C1A=5;e.U1=6;e.V1=7;e.X2=8;e.Y2=9;e.C2R=10;e.C2G=11;e.C2B=12;e.C2A=13;e.U2=14;e.V2=15;e.X3=16;e.Y3=17;e.C3R=18;e.C3G=19;e.C3B=20;e.C3A=21;e.U3=22;e.V3=23;e.X4=24;e.Y4=25;e.C4R=26;e.C4G=27;e.C4B=28;e.C4A=29;e.U4=30;e.V4=31;t.RegionAttachment=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e,i){this.children=new Array;this.x=0;this.y=0;this.rotation=0;this.scaleX=0;this.scaleY=0;this.shearX=0;this.shearY=0;this.ax=0;this.ay=0;this.arotation=0;this.ascaleX=0;this.ascaleY=0;this.ashearX=0;this.ashearY=0;this.appliedValid=false;this.a=0;this.b=0;this.worldX=0;this.c=0;this.d=0;this.worldY=0;this.sorted=false;if(t==null){throw new Error("data cannot be null.")}if(e==null){throw new Error("skeleton cannot be null.")}this.data=t;this.skeleton=e;this.parent=i;this.setToSetupPose()}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,i,r,s,n,a,l){this.ax=e;this.ay=i;this.arotation=r;this.ascaleX=s;this.ascaleY=n;this.ashearX=a;this.ashearY=l;this.appliedValid=true;let o=this.parent;if(o==null){let o=r+90+l;let h=t.MathUtils.cosDeg(r+a)*s;let u=t.MathUtils.cosDeg(o)*n;let c=t.MathUtils.sinDeg(r+a)*s;let d=t.MathUtils.sinDeg(o)*n;let f=this.skeleton;if(f.flipX){e=-e;h=-h;u=-u}if(f.flipY){i=-i;c=-c;d=-d}this.a=h;this.b=u;this.c=c;this.d=d;this.worldX=e+f.x;this.worldY=i+f.y;return}let h=o.a,u=o.b,c=o.c,d=o.d;this.worldX=h*e+u*i+o.worldX;this.worldY=c*e+d*i+o.worldY;switch(this.data.transformMode){case t.TransformMode.Normal:{let e=r+90+l;let i=t.MathUtils.cosDeg(r+a)*s;let o=t.MathUtils.cosDeg(e)*n;let f=t.MathUtils.sinDeg(r+a)*s;let p=t.MathUtils.sinDeg(e)*n;this.a=h*i+u*f;this.b=h*o+u*p;this.c=c*i+d*f;this.d=c*o+d*p;return}case t.TransformMode.OnlyTranslation:{let e=r+90+l;this.a=t.MathUtils.cosDeg(r+a)*s;this.b=t.MathUtils.cosDeg(e)*n;this.c=t.MathUtils.sinDeg(r+a)*s;this.d=t.MathUtils.sinDeg(e)*n;break}case t.TransformMode.NoRotationOrReflection:{let e=h*h+c*c;let i=0;if(e>1e-4){e=Math.abs(h*d-u*c)/e;u=c*e;d=h*e;i=Math.atan2(c,h)*t.MathUtils.radDeg}else{h=0;c=0;i=90-Math.atan2(d,u)*t.MathUtils.radDeg}let o=r+a-i;let f=r+l-i+90;let p=t.MathUtils.cosDeg(o)*s;let g=t.MathUtils.cosDeg(f)*n;let m=t.MathUtils.sinDeg(o)*s;let _=t.MathUtils.sinDeg(f)*n;this.a=h*p-u*m;this.b=h*g-u*_;this.c=c*p+d*m;this.d=c*g+d*_;break}case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:{let e=t.MathUtils.cosDeg(r);let i=t.MathUtils.sinDeg(r);let o=h*e+u*i;let f=c*e+d*i;let p=Math.sqrt(o*o+f*f);if(p>1e-5){p=1/p}o*=p;f*=p;p=Math.sqrt(o*o+f*f);let g=Math.PI/2+Math.atan2(f,o);let m=Math.cos(g)*p;let _=Math.sin(g)*p;let M=t.MathUtils.cosDeg(a)*s;let y=t.MathUtils.cosDeg(90+l)*n;let w=t.MathUtils.sinDeg(a)*s;let v=t.MathUtils.sinDeg(90+l)*n;if(this.data.transformMode!=t.TransformMode.NoScaleOrReflection?h*d-u*c<0:this.skeleton.flipX!=this.skeleton.flipY){m=-m;_=-_}this.a=o*M+m*w;this.b=o*y+m*v;this.c=f*M+_*w;this.d=f*y+_*v;return}}if(this.skeleton.flipX){this.a=-this.a;this.b=-this.b}if(this.skeleton.flipY){this.c=-this.c;this.d=-this.d}}setToSetupPose(){let t=this.data;this.x=t.x;this.y=t.y;this.rotation=t.rotation;this.scaleX=t.scaleX;this.scaleY=t.scaleY;this.shearX=t.shearX;this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){this.appliedValid=true;let e=this.parent;if(e==null){this.ax=this.worldX;this.ay=this.worldY;this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg;this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c);this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d);this.ashearX=0;this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg;return}let i=e.a,r=e.b,s=e.c,n=e.d;let a=1/(i*n-r*s);let l=this.worldX-e.worldX,o=this.worldY-e.worldY;this.ax=l*n*a-o*r*a;this.ay=o*i*a-l*s*a;let h=a*n;let u=a*i;let c=a*r;let d=a*s;let f=h*this.a-c*this.c;let p=h*this.b-c*this.d;let g=u*this.c-d*this.a;let m=u*this.d-d*this.b;this.ashearX=0;this.ascaleX=Math.sqrt(f*f+g*g);if(this.ascaleX>1e-4){let e=f*m-p*g;this.ascaleY=e/this.ascaleX;this.ashearY=Math.atan2(f*p+g*m,e)*t.MathUtils.radDeg;this.arotation=Math.atan2(g,f)*t.MathUtils.radDeg}else{this.ascaleX=0;this.ascaleY=Math.sqrt(p*p+m*m);this.ashearY=0;this.arotation=90-Math.atan2(m,p)*t.MathUtils.radDeg}}worldToLocal(t){let e=this.a,i=this.b,r=this.c,s=this.d;let n=1/(e*s-i*r);let a=t.x-this.worldX,l=t.y-this.worldY;t.x=a*s*n-l*i*n;t.y=l*e*n-a*r*n;return t}localToWorld(t){let e=t.x,i=t.y;t.x=e*this.a+i*this.b+this.worldX;t.y=e*this.c+i*this.d+this.worldY;return t}worldToLocalRotation(e){let i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e);return Math.atan2(this.a*i-this.c*r,this.d*r-this.b*i)*t.MathUtils.radDeg}localToWorldRotation(e){let i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e);return Math.atan2(r*this.c+i*this.d,r*this.a+i*this.b)*t.MathUtils.radDeg}rotateWorld(e){let i=this.a,r=this.b,s=this.c,n=this.d;let a=t.MathUtils.cosDeg(e),l=t.MathUtils.sinDeg(e);this.a=a*i-l*s;this.b=a*r-l*n;this.c=l*i+a*s;this.d=l*r+a*n;this.appliedValid=false}}t.Bone=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){this.mix=1;this.bendDirection=0;if(t==null){throw new Error("data cannot be null.")}if(e==null){throw new Error("skeleton cannot be null.")}this.data=t;this.mix=t.mix;this.bendDirection=t.bendDirection;this.bones=new Array;for(let i=0;i<t.bones.length;i++){this.bones.push(e.findBone(t.bones[i].name))}this.target=e.findBone(t.target.name)}getOrder(){return this.data.order}apply(){this.update()}update(){let t=this.target;let e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix);break}}apply1(e,i,r,s){if(!e.appliedValid){e.updateAppliedTransform()}let n=e.parent;let a=1/(n.a*n.d-n.b*n.c);let l=i-n.worldX,o=r-n.worldY;let h=(l*n.d-o*n.b)*a-e.ax,u=(o*n.a-l*n.c)*a-e.ay;let c=Math.atan2(u,h)*t.MathUtils.radDeg-e.ashearX-e.arotation;if(e.ascaleX<0){c+=180}if(c>180){c-=360}else if(c<-180){c+=360}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*s,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}apply2(e,i,r,s,n,a){if(a==0){i.updateWorldTransform();return}if(!e.appliedValid){e.updateAppliedTransform()}if(!i.appliedValid){i.updateAppliedTransform()}let l=e.ax,o=e.ay,h=e.ascaleX,u=e.ascaleY,c=i.ascaleX;let d=0,f=0,p=0;if(h<0){h=-h;d=180;p=-1}else{d=0;p=1}if(u<0){u=-u;p=-p}if(c<0){c=-c;f=180}else{f=0}let g=i.ax,m=0,_=0,M=0,y=e.a,w=e.b,v=e.c,E=e.d;let T=Math.abs(h-u)<=1e-4;if(!T){m=0;_=y*g+e.worldX;M=v*g+e.worldY}else{m=i.ay;_=y*g+w*m+e.worldX;M=v*g+E*m+e.worldY}let A=e.parent;y=A.a;w=A.b;v=A.c;E=A.d;let x=1/(y*E-w*v),b=r-A.worldX,S=s-A.worldY;let I=(b*E-S*w)*x-l,C=(S*y-b*v)*x-o;b=_-A.worldX;S=M-A.worldY;let R=(b*E-S*w)*x-l,L=(S*y-b*v)*x-o;let P=Math.sqrt(R*R+L*L),D=i.data.length*c,F=0,k=0;t:if(T){D*=h;let t=(I*I+C*C-P*P-D*D)/(2*P*D);if(t<-1){t=-1}else if(t>1){t=1}k=Math.acos(t)*n;y=P+D*t;w=D*Math.sin(k);F=Math.atan2(C*y-I*w,I*y+C*w)}else{y=h*D;w=u*D;let e=y*y,i=w*w,r=I*I+C*C,s=Math.atan2(C,I);v=i*P*P+e*r-e*i;let a=-2*i*P,l=i-e;E=a*a-4*l*v;if(E>=0){let t=Math.sqrt(E);if(a<0){t=-t}t=-(a+t)/2;let e=t/l,i=v/t;let o=Math.abs(e)<Math.abs(i)?e:i;if(o*o<=r){S=Math.sqrt(r-o*o)*n;F=s-Math.atan2(S,o);k=Math.atan2(S/u,(o-P)/h);break t}}let o=t.MathUtils.PI,c=P-y,d=c*c,f=0;let p=0,g=P+y,m=g*g,_=0;v=-y*P/(e-i);if(v>=-1&&v<=1){v=Math.acos(v);b=y*Math.cos(v)+P;S=w*Math.sin(v);E=b*b+S*S;if(E<d){o=v;d=E;c=b;f=S}if(E>m){p=v;m=E;g=b;_=S}}if(r<=(d+m)/2){F=s-Math.atan2(f*n,c);k=o*n}else{F=s-Math.atan2(_*n,g);k=p*n}}let U=Math.atan2(m,g)*p;let N=e.arotation;F=(F-U)*t.MathUtils.radDeg+d-N;if(F>180){F-=360}else if(F<-180){F+=360}e.updateWorldTransformWith(l,o,N+F*a,e.ascaleX,e.ascaleY,0,0);N=i.arotation;k=((k+U)*t.MathUtils.radDeg-i.ashearX)*p+f-N;if(k>180){k-=360}else if(k<-180){k+=360}i.updateWorldTransformWith(g,m,N+k*a,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}}t.IkConstraint=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.order=0;this.bones=new Array;this.bendDirection=1;this.mix=1;this.name=t}}t.IkConstraintData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){this.position=0;this.spacing=0;this.rotateMix=0;this.translateMix=0;this.spaces=new Array;this.positions=new Array;this.world=new Array;this.curves=new Array;this.lengths=new Array;this.segments=new Array;if(t==null){throw new Error("data cannot be null.")}if(e==null){throw new Error("skeleton cannot be null.")}this.data=t;this.bones=new Array;for(let i=0,r=t.bones.length;i<r;i++){this.bones.push(e.findBone(t.bones[i].name))}this.target=e.findSlot(t.target.name);this.position=t.position;this.spacing=t.spacing;this.rotateMix=t.rotateMix;this.translateMix=t.translateMix}apply(){this.update()}update(){let i=this.target.getAttachment();if(!(i instanceof t.PathAttachment)){return}let r=this.rotateMix,s=this.translateMix;let n=s>0,a=r>0;if(!n&&!a){return}let l=this.data;let o=l.spacingMode;let h=o==t.SpacingMode.Length;let u=l.rotateMode;let c=u==t.RotateMode.Tangent,d=u==t.RotateMode.ChainScale;let f=this.bones.length,p=c?f:f+1;let g=this.bones;let m=t.Utils.setArraySize(this.spaces,p),_=null;let M=this.spacing;if(d||h){if(d){_=t.Utils.setArraySize(this.lengths,f)}for(let t=0,i=p-1;t<i;){let i=g[t];let r=i.data.length;if(r<e.epsilon){if(d){_[t]=0}m[++t]=0}else{let e=r*i.a,s=r*i.c;let n=Math.sqrt(e*e+s*s);if(d){_[t]=n}m[++t]=(h?r+M:M)*n/r}}}else{for(let t=1;t<p;t++){m[t]=M}}let y=this.computeWorldPositions(i,p,c,l.positionMode==t.PositionMode.Percent,o==t.SpacingMode.Percent);let w=y[0],v=y[1],E=l.offsetRotation;let T=false;if(E==0){T=u==t.RotateMode.Chain}else{T=false;let e=this.target.bone;E*=e.a*e.d-e.b*e.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}for(let e=0,i=3;e<f;e++,i+=3){let n=g[e];n.worldX+=(w-n.worldX)*s;n.worldY+=(v-n.worldY)*s;let l=y[i],o=y[i+1],h=l-w,u=o-v;if(d){let t=_[e];if(t!=0){let e=(Math.sqrt(h*h+u*u)/t-1)*r+1;n.a*=e;n.c*=e}}w=l;v=o;if(a){let s=n.a,a=n.b,l=n.c,o=n.d,d=0,f=0,p=0;if(c){d=y[i-1]}else if(m[e+1]==0){d=y[i+2]}else{d=Math.atan2(u,h)}d-=Math.atan2(l,s);if(T){f=Math.cos(d);p=Math.sin(d);let t=n.data.length;w+=(t*(f*s-p*l)-h)*r;v+=(t*(p*s+f*l)-u)*r}else{d+=E}if(d>t.MathUtils.PI){d-=t.MathUtils.PI2}else if(d<-t.MathUtils.PI){d+=t.MathUtils.PI2}d*=r;f=Math.cos(d);p=Math.sin(d);n.a=f*s-p*l;n.b=f*a-p*o;n.c=p*s+f*l;n.d=p*a+f*o}n.appliedValid=false}}computeWorldPositions(i,r,s,n,a){let l=this.target;let o=this.position;let h=this.spaces,u=t.Utils.setArraySize(this.positions,r*3+2),c=null;let d=i.closed;let f=i.worldVerticesLength,p=f/6,g=e.NONE;if(!i.constantSpeed){let m=i.lengths;p-=d?1:2;let _=m[p];if(n){o*=_}if(a){for(let t=0;t<r;t++){h[t]*=_}}c=t.Utils.setArraySize(this.world,8);for(let t=0,n=0,a=0;t<r;t++,n+=3){let r=h[t];o+=r;let M=o;if(d){M%=_;if(M<0){M+=_}a=0}else if(M<0){if(g!=e.BEFORE){g=e.BEFORE;i.computeWorldVertices(l,2,4,c,0,2)}this.addBeforePosition(M,c,0,u,n);continue}else if(M>_){if(g!=e.AFTER){g=e.AFTER;i.computeWorldVertices(l,f-6,4,c,0,2)}this.addAfterPosition(M-_,c,0,u,n);continue}for(;;a++){let t=m[a];if(M>t){continue}if(a==0){M/=t}else{let e=m[a-1];M=(M-e)/(t-e)}break}if(a!=g){g=a;if(d&&a==p){i.computeWorldVertices(l,f-4,4,c,0,2);i.computeWorldVertices(l,0,4,c,4,2)}else{i.computeWorldVertices(l,a*6+2,8,c,0,2)}}this.addCurvePosition(M,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],u,n,s||t>0&&r==0)}return u}if(d){f+=2;c=t.Utils.setArraySize(this.world,f);i.computeWorldVertices(l,2,f-4,c,0,2);i.computeWorldVertices(l,0,2,c,f-4,2);c[f-2]=c[0];c[f-1]=c[1]}else{p--;f-=4;c=t.Utils.setArraySize(this.world,f);i.computeWorldVertices(l,2,f,c,0,2)}let m=t.Utils.setArraySize(this.curves,p);let _=0;let M=c[0],y=c[1],w=0,v=0,E=0,T=0,A=0,x=0;let b=0,S=0,I=0,C=0,R=0,L=0,P=0,D=0;for(let t=0,e=2;t<p;t++,e+=6){w=c[e];v=c[e+1];E=c[e+2];T=c[e+3];A=c[e+4];x=c[e+5];b=(M-w*2+E)*.1875;S=(y-v*2+T)*.1875;I=((w-E)*3-M+A)*.09375;C=((v-T)*3-y+x)*.09375;R=b*2+I;L=S*2+C;P=(w-M)*.75+b+I*.16666667;D=(v-y)*.75+S+C*.16666667;_+=Math.sqrt(P*P+D*D);P+=R;D+=L;R+=I;L+=C;_+=Math.sqrt(P*P+D*D);P+=R;D+=L;_+=Math.sqrt(P*P+D*D);P+=R+I;D+=L+C;_+=Math.sqrt(P*P+D*D);m[t]=_;M=A;y=x}if(n){o*=_}if(a){for(let t=0;t<r;t++){h[t]*=_}}let F=this.segments;let k=0;for(let t=0,e=0,i=0,n=0;t<r;t++,e+=3){let r=h[t];o+=r;let a=o;if(d){a%=_;if(a<0){a+=_}i=0}else if(a<0){this.addBeforePosition(a,c,0,u,e);continue}else if(a>_){this.addAfterPosition(a-_,c,f-4,u,e);continue}for(;;i++){let t=m[i];if(a>t){continue}if(i==0){a/=t}else{let e=m[i-1];a=(a-e)/(t-e)}break}if(i!=g){g=i;let t=i*6;M=c[t];y=c[t+1];w=c[t+2];v=c[t+3];E=c[t+4];T=c[t+5];A=c[t+6];x=c[t+7];b=(M-w*2+E)*.03;S=(y-v*2+T)*.03;I=((w-E)*3-M+A)*.006;C=((v-T)*3-y+x)*.006;R=b*2+I;L=S*2+C;P=(w-M)*.3+b+I*.16666667;D=(v-y)*.3+S+C*.16666667;k=Math.sqrt(P*P+D*D);F[0]=k;for(t=1;t<8;t++){P+=R;D+=L;R+=I;L+=C;k+=Math.sqrt(P*P+D*D);F[t]=k}P+=R;D+=L;k+=Math.sqrt(P*P+D*D);F[8]=k;P+=R+I;D+=L+C;k+=Math.sqrt(P*P+D*D);F[9]=k;n=0}a*=k;for(;;n++){let t=F[n];if(a>t){continue}if(n==0){a/=t}else{let e=F[n-1];a=n+(a-e)/(t-e)}break}this.addCurvePosition(a*.1,M,y,w,v,E,T,A,x,u,e,s||t>0&&r==0)}return u}addBeforePosition(t,e,i,r,s){let n=e[i],a=e[i+1],l=e[i+2]-n,o=e[i+3]-a,h=Math.atan2(o,l);r[s]=n+t*Math.cos(h);r[s+1]=a+t*Math.sin(h);r[s+2]=h}addAfterPosition(t,e,i,r,s){let n=e[i+2],a=e[i+3],l=n-e[i],o=a-e[i+1],h=Math.atan2(o,l);r[s]=n+t*Math.cos(h);r[s+1]=a+t*Math.sin(h);r[s+2]=h}addCurvePosition(t,e,i,r,s,n,a,l,o,h,u,c){if(t==0||isNaN(t)){t=1e-4}let d=t*t,f=d*t,p=1-t,g=p*p,m=g*p;let _=p*t,M=_*3,y=p*M,w=M*t;let v=e*m+r*y+n*w+l*f,E=i*m+s*y+a*w+o*f;h[u]=v;h[u+1]=E;if(c){h[u+2]=Math.atan2(E-(i*g+s*_*2+a*d),v-(e*g+r*_*2+n*d))}}getOrder(){return this.data.order}}e.NONE=-1;e.BEFORE=-2;e.AFTER=-3;e.epsilon=1e-5;t.PathConstraint=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.toLoad=new Array;this.assets={};this.clientId=t}loaded(){var t=0;for(var e in this.assets){t++}return t}}class i{constructor(t=""){this.clientAssets={};this.queuedAssets={};this.rawAssets={};this.errors={};this.pathPrefix=t}queueAsset(t,i,r){var s=this.clientAssets[t];if(s===null||s===undefined){s=new e(t);this.clientAssets[t]=s}if(i!==null){s.textureLoader=i}s.toLoad.push(r);if(this.queuedAssets[r]===r){return false}else{this.queuedAssets[r]=r;return true}}loadText(t,e){e=this.pathPrefix+e;if(!this.queueAsset(t,null,e)){return}Laya.loader.load([{type:Laya.Loader.TEXT,url:e}],Laya.Handler.create(this,t=>{if(t){this.rawAssets[e]=Laya.loader.getRes(e)}else{this.errors[e]=`Couldn't load text ${e}`}}))}loadJson(t,e){e=this.pathPrefix+e;if(!this.queueAsset(t,null,e)){return}Laya.loader.load([{type:Laya.Loader.JSON,url:e}],Laya.Handler.create(this,t=>{if(t){this.rawAssets[e]=Laya.loader.getRes(e)}else{this.errors[e]=`Couldn't load text ${e}`}}))}loadTexture(t,e,i){i=this.pathPrefix+i;if(!this.queueAsset(t,e,i)){return}Laya.loader.load([{type:Laya.Loader.IMAGE,url:i}],Laya.Handler.create(this,t=>{if(t){this.rawAssets[i]=Laya.loader.getRes(i)}else{this.errors[i]=`Couldn't load text ${i}`}}))}loadBinary(t,e){e=this.pathPrefix+e;if(!this.queueAsset(t,null,e)){return}Laya.loader.load([{type:Laya.Loader.BUFFER,url:e}],Laya.Handler.create(this,t=>{if(t){var i=Laya.loader.getRes(e);var r=new Uint8Array(i);this.rawAssets[e]=r}else{this.errors[e]=`Couldn't load text ${e}`}}))}get(t,e){e=this.pathPrefix+e;var i=this.clientAssets[t];if(i===null||i===undefined){return true}return i.assets[e]}updateClientAssets(t){for(var e=0;e<t.toLoad.length;e++){var i=t.toLoad[e];var r=t.assets[i];if(r===null||r===undefined){var s=this.rawAssets[i];if(s===null||s===undefined){continue}if(typeof s=="object"&&!!s._bitmap){t.assets[i]=t.textureLoader(s)}else{t.assets[i]=s}}}}isLoadingComplete(t){var e=this.clientAssets[t];if(e===null||e===undefined){return true}this.updateClientAssets(e);return e.toLoad.length==e.loaded()}dispose(){}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){var t="";for(var e in this.errors){var i=this.errors[e];t+=i}return t}}t.SharedAssetManager=i})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this._image=t}getImage(){return this._image}static filterFromString(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${t}`)}}static wrapFromString(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error(`Unknown texture wrap ${t}`)}}}t.Texture=e;let i;(function(t){t[t["Nearest"]=9728]="Nearest";t[t["Linear"]=9729]="Linear";t[t["MipMap"]=9987]="MipMap";t[t["MipMapNearestNearest"]=9984]="MipMapNearestNearest";t[t["MipMapLinearNearest"]=9985]="MipMapLinearNearest";t[t["MipMapNearestLinear"]=9986]="MipMapNearestLinear";t[t["MipMapLinearLinear"]=9987]="MipMapLinearLinear"})(i=t.TextureFilter||(t.TextureFilter={}));let r;(function(t){t[t["MirroredRepeat"]=33648]="MirroredRepeat";t[t["ClampToEdge"]=33071]="ClampToEdge";t[t["Repeat"]=10497]="Repeat"})(r=t.TextureWrap||(t.TextureWrap={}));class s{constructor(){this.u=0;this.v=0;this.u2=0;this.v2=0;this.width=0;this.height=0;this.rotate=false;this.offsetX=0;this.offsetY=0;this.originalWidth=0;this.originalHeight=0}}t.TextureRegion=s})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){this.pages=new Array;this.regions=new Array;this.load(t,e)}load(e,n){if(n==null){throw new Error("textureLoader cannot be null.")}let a=new i(e);let l=new Array(4);let o=null;while(true){let e=a.readLine();if(e==null){break}e=e.trim();if(e.length==0){o=null}else if(!o){o=new r;o.name=e;if(a.readTuple(l)==2){o.width=parseInt(l[0]);o.height=parseInt(l[1]);a.readTuple(l)}a.readTuple(l);o.minFilter=t.Texture.filterFromString(l[0]);o.magFilter=t.Texture.filterFromString(l[1]);let i=a.readValue();o.uWrap=t.TextureWrap.ClampToEdge;o.vWrap=t.TextureWrap.ClampToEdge;if(i=="x"){o.uWrap=t.TextureWrap.Repeat}else if(i=="y"){o.vWrap=t.TextureWrap.Repeat}else if(i=="xy"){o.uWrap=o.vWrap=t.TextureWrap.Repeat}o.texture=n(e);o.texture.setFilters(o.minFilter,o.magFilter);o.texture.setWraps(o.uWrap,o.vWrap);o.width=o.texture.getImage().width;o.height=o.texture.getImage().height;this.pages.push(o)}else{let t=new s;t.name=e;t.page=o;t.rotate=a.readValue()=="true";a.readTuple(l);let i=parseInt(l[0]);let r=parseInt(l[1]);a.readTuple(l);let n=parseInt(l[0]);let h=parseInt(l[1]);t.u=i/o.width;t.v=r/o.height;if(t.rotate){t.u2=(i+h)/o.width;t.v2=(r+n)/o.height}else{t.u2=(i+n)/o.width;t.v2=(r+h)/o.height}t.x=i;t.y=r;t.width=Math.abs(n);t.height=Math.abs(h);if(a.readTuple(l)==4){if(a.readTuple(l)==4){a.readTuple(l)}}t.originalWidth=parseInt(l[0]);t.originalHeight=parseInt(l[1]);a.readTuple(l);t.offsetX=parseInt(l[0]);t.offsetY=parseInt(l[1]);t.index=parseInt(a.readValue());t.texture=o.texture;this.regions.push(t)}}}findRegion(t){for(let e=0;e<this.regions.length;e++){if(this.regions[e].name==t){return this.regions[e]}}return null}dispose(){for(let t=0;t<this.pages.length;t++){this.pages[t].texture.dispose()}}}t.TextureAtlas=e;class i{constructor(t){this.index=0;this.lines=t.split(/\r\n|\r|\n/)}readLine(){if(this.index>=this.lines.length){return null}return this.lines[this.index++]}readValue(){let t=this.readLine();let e=t.indexOf(":");if(e==-1){throw new Error("Invalid line: "+t)}return t.substring(e+1).trim()}readTuple(t){let e=this.readLine();let i=e.indexOf(":");if(i==-1){throw new Error("Invalid line: "+e)}let r=0,s=i+1;for(;r<3;r++){let i=e.indexOf(",",s);if(i==-1){break}t[r]=e.substr(s,i-s).trim();s=i+1}t[r]=e.substring(s).trim();return r+1}}class r{}t.TextureAtlasPage=r;class s extends t.TextureRegion{}t.TextureAtlasRegion=s})(spine||(spine={}));var spine;(function(t){class e{constructor(e,i){this.rotateMix=0;this.translateMix=0;this.scaleMix=0;this.shearMix=0;this.temp=new t.Vector2;if(e==null){throw new Error("data cannot be null.")}if(i==null){throw new Error("skeleton cannot be null.")}this.data=e;this.rotateMix=e.rotateMix;this.translateMix=e.translateMix;this.scaleMix=e.scaleMix;this.shearMix=e.shearMix;this.bones=new Array;for(let t=0;t<e.bones.length;t++){this.bones.push(i.findBone(e.bones[t].name))}this.target=i.findBone(e.target.name)}apply(){this.update()}update(){if(this.data.local){if(this.data.relative){this.applyRelativeLocal()}else{this.applyAbsoluteLocal()}}else{if(this.data.relative){this.applyRelativeWorld()}else{this.applyAbsoluteWorld()}}}applyAbsoluteWorld(){let e=this.rotateMix,i=this.translateMix,r=this.scaleMix,s=this.shearMix;let n=this.target;let a=n.a,l=n.b,o=n.c,h=n.d;let u=a*h-l*o>0?t.MathUtils.degRad:-t.MathUtils.degRad;let c=this.data.offsetRotation*u;let d=this.data.offsetShearY*u;let f=this.bones;for(let u=0,p=f.length;u<p;u++){let p=f[u];let g=false;if(e!=0){let i=p.a,r=p.b,s=p.c,n=p.d;let l=Math.atan2(o,a)-Math.atan2(s,i)+c;if(l>t.MathUtils.PI){l-=t.MathUtils.PI2}else if(l<-t.MathUtils.PI){l+=t.MathUtils.PI2}l*=e;let h=Math.cos(l),u=Math.sin(l);p.a=h*i-u*s;p.b=h*r-u*n;p.c=u*i+h*s;p.d=u*r+h*n;g=true}if(i!=0){let t=this.temp;n.localToWorld(t.set(this.data.offsetX,this.data.offsetY));p.worldX+=(t.x-p.worldX)*i;p.worldY+=(t.y-p.worldY)*i;g=true}if(r>0){let t=Math.sqrt(p.a*p.a+p.c*p.c);let e=Math.sqrt(a*a+o*o);if(t>1e-5){t=(t+(e-t+this.data.offsetScaleX)*r)/t}p.a*=t;p.c*=t;t=Math.sqrt(p.b*p.b+p.d*p.d);e=Math.sqrt(l*l+h*h);if(t>1e-5){t=(t+(e-t+this.data.offsetScaleY)*r)/t}p.b*=t;p.d*=t;g=true}if(s>0){let e=p.b,i=p.d;let r=Math.atan2(i,e);let n=Math.atan2(h,l)-Math.atan2(o,a)-(r-Math.atan2(p.c,p.a));if(n>t.MathUtils.PI){n-=t.MathUtils.PI2}else if(n<-t.MathUtils.PI){n+=t.MathUtils.PI2}n=r+(n+d)*s;let u=Math.sqrt(e*e+i*i);p.b=Math.cos(n)*u;p.d=Math.sin(n)*u;g=true}if(g){p.appliedValid=false}}}applyRelativeWorld(){let e=this.rotateMix,i=this.translateMix,r=this.scaleMix,s=this.shearMix;let n=this.target;let a=n.a,l=n.b,o=n.c,h=n.d;let u=a*h-l*o>0?t.MathUtils.degRad:-t.MathUtils.degRad;let c=this.data.offsetRotation*u,d=this.data.offsetShearY*u;let f=this.bones;for(let u=0,p=f.length;u<p;u++){let p=f[u];let g=false;if(e!=0){let i=p.a,r=p.b,s=p.c,n=p.d;let l=Math.atan2(o,a)+c;if(l>t.MathUtils.PI){l-=t.MathUtils.PI2}else if(l<-t.MathUtils.PI){l+=t.MathUtils.PI2}l*=e;let h=Math.cos(l),u=Math.sin(l);p.a=h*i-u*s;p.b=h*r-u*n;p.c=u*i+h*s;p.d=u*r+h*n;g=true}if(i!=0){let t=this.temp;n.localToWorld(t.set(this.data.offsetX,this.data.offsetY));p.worldX+=t.x*i;p.worldY+=t.y*i;g=true}if(r>0){let t=(Math.sqrt(a*a+o*o)-1+this.data.offsetScaleX)*r+1;p.a*=t;p.c*=t;t=(Math.sqrt(l*l+h*h)-1+this.data.offsetScaleY)*r+1;p.b*=t;p.d*=t;g=true}if(s>0){let e=Math.atan2(h,l)-Math.atan2(o,a);if(e>t.MathUtils.PI){e-=t.MathUtils.PI2}else if(e<-t.MathUtils.PI){e+=t.MathUtils.PI2}let i=p.b,r=p.d;e=Math.atan2(r,i)+(e-t.MathUtils.PI/2+d)*s;let n=Math.sqrt(i*i+r*r);p.b=Math.cos(e)*n;p.d=Math.sin(e)*n;g=true}if(g){p.appliedValid=false}}}applyAbsoluteLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix;let s=this.target;if(!s.appliedValid){s.updateAppliedTransform()}let n=this.bones;for(let a=0,l=n.length;a<l;a++){let l=n[a];if(!l.appliedValid){l.updateAppliedTransform()}let o=l.arotation;if(t!=0){let e=s.arotation-o+this.data.offsetRotation;e-=(16384-(16384.499999999996-e/360|0))*360;o+=e*t}let h=l.ax,u=l.ay;if(e!=0){h+=(s.ax-h+this.data.offsetX)*e;u+=(s.ay-u+this.data.offsetY)*e}let c=l.ascaleX,d=l.ascaleY;if(i>0){if(c>1e-5){c=(c+(s.ascaleX-c+this.data.offsetScaleX)*i)/c}if(d>1e-5){d=(d+(s.ascaleY-d+this.data.offsetScaleY)*i)/d}}let f=l.ashearY;if(r>0){let t=s.ashearY-f+this.data.offsetShearY;t-=(16384-(16384.499999999996-t/360|0))*360;l.shearY+=t*r}l.updateWorldTransformWith(h,u,o,c,d,l.ashearX,f)}}applyRelativeLocal(){let t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix;let s=this.target;if(!s.appliedValid){s.updateAppliedTransform()}let n=this.bones;for(let a=0,l=n.length;a<l;a++){let l=n[a];if(!l.appliedValid){l.updateAppliedTransform()}let o=l.arotation;if(t!=0){o+=(s.arotation+this.data.offsetRotation)*t}let h=l.ax,u=l.ay;if(e!=0){h+=(s.ax+this.data.offsetX)*e;u+=(s.ay+this.data.offsetY)*e}let c=l.ascaleX,d=l.ascaleY;if(i>0){if(c>1e-5){c*=(s.ascaleX-1+this.data.offsetScaleX)*i+1}if(d>1e-5){d*=(s.ascaleY-1+this.data.offsetScaleY)*i+1}}let f=l.ashearY;if(r>0){f+=(s.ashearY+this.data.offsetShearY)*r}l.updateWorldTransformWith(h,u,o,c,d,l.ashearX,f)}}getOrder(){return this.data.order}}t.TransformConstraint=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.order=0;this.bones=new Array;this.rotateMix=0;this.translateMix=0;this.scaleMix=0;this.shearMix=0;this.offsetRotation=0;this.offsetX=0;this.offsetY=0;this.offsetScaleX=0;this.offsetScaleY=0;this.offsetShearY=0;this.relative=false;this.local=false;if(t==null){throw new Error("name cannot be null.")}this.name=t}}t.TransformConstraintData=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){this.jitterX=0;this.jitterY=0;this.jitterX=t;this.jitterY=e}begin(t){}transform(e,i,r,s){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY);e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)}end(){}}t.JitterEffect=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.centerX=0;this.centerY=0;this.radius=0;this.angle=0;this.worldX=0;this.worldY=0;this.radius=t}begin(t){this.worldX=t.x+this.centerX;this.worldY=t.y+this.centerY}transform(i,r,s,n){let a=this.angle*t.MathUtils.degreesToRadians;let l=i.x-this.worldX;let o=i.y-this.worldY;let h=Math.sqrt(l*l+o*o);if(h<this.radius){let t=e.interpolation.apply(0,a,(this.radius-h)/this.radius);let r=Math.cos(t);let s=Math.sin(t);i.x=r*l-s*o+this.worldX;i.y=s*l+r*o+this.worldY}}end(){}}e.interpolation=new t.PowOut(2);t.SwirlEffect=e})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i extends t.AssetManager{constructor(e,i=""){super(i=>{return new t.webgl.GLTexture(e,i)},i)}}e.AssetManager=i})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i extends t.Texture{constructor(t,i,r=false){super(i);this.texture=null;this.boundUnit=0;this.useMipMaps=false;this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t);this.useMipMaps=r;this.restore();this.context.addRestorable(this)}setFilters(t,e){let i=this.context.gl;this.bind();i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e)}setWraps(t,e){let i=this.context.gl;this.bind();i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;if(!this.texture){this.texture=this.context.gl.createTexture()}this.bind();e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);if(t){e.generateMipmap(e.TEXTURE_2D)}}restore(){this.texture=null;this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t;e.activeTexture(e.TEXTURE0+t);e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit);t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteTexture(this.texture)}}e.GLTexture=i})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(e,i,r,s){this.attributes=i;this.verticesLength=0;this.dirtyVertices=false;this.indicesLength=0;this.dirtyIndices=false;this.elementsPerVertex=0;this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e);this.elementsPerVertex=0;for(let t=0;t<i.length;t++){this.elementsPerVertex+=i[t].numElements}this.vertices=new Float32Array(r*this.elementsPerVertex);this.indices=new Uint16Array(s);this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=true;this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=true;this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++){let i=this.attributes[e];t+=i.numElements}return t}setVertices(t){this.dirtyVertices=true;if(t.length>this.vertices.length){throw Error("Mesh can't store more than "+this.maxVertices()+" vertices")}this.vertices.set(t,0);this.verticesLength=t.length}setIndices(t){this.dirtyIndices=true;if(t.length>this.indices.length){throw Error("Mesh can't store more than "+this.maxIndices()+" indices")}this.indices.set(t,0);this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,i,r){let s=this.context.gl;if(this.dirtyVertices||this.dirtyIndices){this.update()}this.bind(t);if(this.indicesLength>0){s.drawElements(e,r,s.UNSIGNED_SHORT,i*2)}else{s.drawArrays(e,i,r)}this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let r=0;r<this.attributes.length;r++){let s=this.attributes[r];let n=t.getAttributeLocation(s.name);e.enableVertexAttribArray(n);e.vertexAttribPointer(n,s.numElements,e.FLOAT,false,this.elementsPerVertex*4,i*4);i+=s.numElements}if(this.indicesLength>0){e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}}unbind(t){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let r=this.attributes[i];let s=t.getAttributeLocation(r.name);e.disableVertexAttribArray(s)}e.bindBuffer(e.ARRAY_BUFFER,null);if(this.indicesLength>0){e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}}update(){let t=this.context.gl;if(this.dirtyVertices){if(!this.verticesBuffer){this.verticesBuffer=t.createBuffer()}t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer);t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW);this.dirtyVertices=false}if(this.dirtyIndices){if(!this.indicesBuffer){this.indicesBuffer=t.createBuffer()}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW);this.dirtyIndices=false}}restore(){this.verticesBuffer=null;this.indicesBuffer=null;this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer);t.deleteBuffer(this.indicesBuffer)}}t.Mesh=e;class i{constructor(t,e,i){this.name=t;this.type=e;this.numElements=i}}t.VertexAttribute=i;class r extends i{constructor(){super(t.Shader.POSITION,o.Float,2)}}t.Position2Attribute=r;class s extends i{constructor(){super(t.Shader.POSITION,o.Float,3)}}t.Position3Attribute=s;class n extends i{constructor(e=0){super(t.Shader.TEXCOORDS+(e==0?"":e),o.Float,2)}}t.TexCoordAttribute=n;class a extends i{constructor(){super(t.Shader.COLOR,o.Float,4)}}t.ColorAttribute=a;class l extends i{constructor(){super(t.Shader.COLOR2,o.Float,4)}}t.Color2Attribute=l;let o;(function(t){t[t["Float"]=0]="Float"})(o=t.VertexAttributeType||(t.VertexAttributeType={}))})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(e,i=true,r=10920){this.isDrawing=false;this.shader=null;this.lastTexture=null;this.verticesLength=0;this.indicesLength=0;if(r>10920){throw new Error("Can't have more than 10920 triangles per batch: "+r)}this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e);let s=i?[new t.Position2Attribute,new t.ColorAttribute,new t.TexCoordAttribute,new t.Color2Attribute]:[new t.Position2Attribute,new t.ColorAttribute,new t.TexCoordAttribute];this.mesh=new t.Mesh(e,s,r,r*3);this.srcBlend=this.context.gl.SRC_ALPHA;this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}begin(t){let e=this.context.gl;if(this.isDrawing){throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()")}this.drawCalls=0;this.shader=t;this.lastTexture=null;this.isDrawing=true;e.enable(e.BLEND);e.blendFunc(this.srcBlend,this.dstBlend)}setBlendMode(t,e){let i=this.context.gl;this.srcBlend=t;this.dstBlend=e;if(this.isDrawing){this.flush();i.blendFunc(this.srcBlend,this.dstBlend)}}draw(t,e,i){if(t!=this.lastTexture){this.flush();this.lastTexture=t}else if(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length){this.flush()}let r=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength);this.verticesLength+=e.length;this.mesh.setVerticesLength(this.verticesLength);let s=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<i.length;t++,e++){s[t]=i[e]+r}this.indicesLength+=i.length;this.mesh.setIndicesLength(this.indicesLength)}flush(){let t=this.context.gl;if(this.verticesLength==0){return}this.lastTexture.bind();this.mesh.draw(this.shader,t.TRIANGLES);this.verticesLength=0;this.indicesLength=0;this.mesh.setVerticesLength(0);this.mesh.setIndicesLength(0);this.drawCalls++}end(){let t=this.context.gl;if(!this.isDrawing){throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()")}if(this.verticesLength>0||this.indicesLength>0){this.flush()}this.shader=null;this.lastTexture=null;this.isDrawing=false;t.disable(t.BLEND)}getDrawCalls(){return this.drawCalls}dispose(){this.mesh.dispose()}}t.PolygonBatcher=e})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(i,r,s=true){this.twoColorTint=false;this.activeRenderer=null;this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0];this.QUAD_TRIANGLES=[0,1,2,2,3,0];this.WHITE=new t.Color(1,1,1,1);this.canvas=i;this.context=r instanceof e.ManagedWebGLRenderingContext?r:new e.ManagedWebGLRenderingContext(r);this.twoColorTint=s;this.camera=new e.OrthoCamera(i.width,i.height);this.batcherShader=s?e.Shader.newTwoColoredTextured(this.context):e.Shader.newColoredTextured(this.context);this.batcher=new e.PolygonBatcher(this.context,s);this.shapesShader=e.Shader.newColored(this.context);this.shapes=new e.ShapeRenderer(this.context);this.skeletonRenderer=new e.SkeletonRenderer(this.context,s);this.skeletonDebugRenderer=new e.SkeletonDebugRenderer(this.context)}begin(){this.camera.update();this.enableRenderer(this.batcher)}drawSkeleton(t,e=false,i=-1,r=-1){this.enableRenderer(this.batcher);this.skeletonRenderer.premultipliedAlpha=e;this.skeletonRenderer.draw(this.batcher,t,i,r)}drawSkeletonDebug(t,e=false,i=null){this.enableRenderer(this.shapes);this.skeletonDebugRenderer.premultipliedAlpha=e;this.skeletonDebugRenderer.draw(this.shapes,t,i)}drawTexture(t,e,i,r,s,n=null){this.enableRenderer(this.batcher);if(n===null){n=this.WHITE}let a=this.QUAD;var l=0;a[l++]=e;a[l++]=i;a[l++]=n.r;a[l++]=n.g;a[l++]=n.b;a[l++]=n.a;a[l++]=0;a[l++]=1;if(this.twoColorTint){a[l++]=0;a[l++]=0;a[l++]=0;a[l++]=0}a[l++]=e+r;a[l++]=i;a[l++]=n.r;a[l++]=n.g;a[l++]=n.b;a[l++]=n.a;a[l++]=1;a[l++]=1;if(this.twoColorTint){a[l++]=0;a[l++]=0;a[l++]=0;a[l++]=0}a[l++]=e+r;a[l++]=i+s;a[l++]=n.r;a[l++]=n.g;a[l++]=n.b;a[l++]=n.a;a[l++]=1;a[l++]=0;if(this.twoColorTint){a[l++]=0;a[l++]=0;a[l++]=0;a[l++]=0}a[l++]=e;a[l++]=i+s;a[l++]=n.r;a[l++]=n.g;a[l++]=n.b;a[l++]=n.a;a[l++]=0;a[l++]=0;if(this.twoColorTint){a[l++]=0;a[l++]=0;a[l++]=0;a[l++]=0}this.batcher.draw(t,a,this.QUAD_TRIANGLES)}drawTextureUV(t,e,i,r,s,n,a,l,o,h=null){this.enableRenderer(this.batcher);if(h===null){h=this.WHITE}let u=this.QUAD;var c=0;u[c++]=e;u[c++]=i;u[c++]=h.r;u[c++]=h.g;u[c++]=h.b;u[c++]=h.a;u[c++]=n;u[c++]=a;if(this.twoColorTint){u[c++]=0;u[c++]=0;u[c++]=0;u[c++]=0}u[c++]=e+r;u[c++]=i;u[c++]=h.r;u[c++]=h.g;u[c++]=h.b;u[c++]=h.a;u[c++]=l;u[c++]=a;if(this.twoColorTint){u[c++]=0;u[c++]=0;u[c++]=0;u[c++]=0}u[c++]=e+r;u[c++]=i+s;u[c++]=h.r;u[c++]=h.g;u[c++]=h.b;u[c++]=h.a;u[c++]=l;u[c++]=o;if(this.twoColorTint){u[c++]=0;u[c++]=0;u[c++]=0;u[c++]=0}u[c++]=e;u[c++]=i+s;u[c++]=h.r;u[c++]=h.g;u[c++]=h.b;u[c++]=h.a;u[c++]=n;u[c++]=o;if(this.twoColorTint){u[c++]=0;u[c++]=0;u[c++]=0;u[c++]=0}this.batcher.draw(t,u,this.QUAD_TRIANGLES)}drawTextureRotated(e,i,r,s,n,a,l,o,h=null,u=false){this.enableRenderer(this.batcher);if(h===null){h=this.WHITE}let c=this.QUAD;let d=i+a;let f=r+l;let p=-a;let g=-l;let m=s-a;let _=n-l;let M=p;let y=g;let w=p;let v=_;let E=m;let T=_;let A=m;let x=g;let b=0;let S=0;let I=0;let C=0;let R=0;let L=0;let P=0;let D=0;if(o!=0){let e=t.MathUtils.cosDeg(o);let i=t.MathUtils.sinDeg(o);b=e*M-i*y;S=i*M+e*y;P=e*w-i*v;D=i*w+e*v;R=e*E-i*T;L=i*E+e*T;I=R+(b-P);C=L+(S-D)}else{b=M;S=y;P=w;D=v;R=E;L=T;I=A;C=x}b+=d;S+=f;I+=d;C+=f;R+=d;L+=f;P+=d;D+=f;var F=0;c[F++]=b;c[F++]=S;c[F++]=h.r;c[F++]=h.g;c[F++]=h.b;c[F++]=h.a;c[F++]=0;c[F++]=1;if(this.twoColorTint){c[F++]=0;c[F++]=0;c[F++]=0;c[F++]=0}c[F++]=I;c[F++]=C;c[F++]=h.r;c[F++]=h.g;c[F++]=h.b;c[F++]=h.a;c[F++]=1;c[F++]=1;if(this.twoColorTint){c[F++]=0;c[F++]=0;c[F++]=0;c[F++]=0}c[F++]=R;c[F++]=L;c[F++]=h.r;c[F++]=h.g;c[F++]=h.b;c[F++]=h.a;c[F++]=1;c[F++]=0;if(this.twoColorTint){c[F++]=0;c[F++]=0;c[F++]=0;c[F++]=0}c[F++]=P;c[F++]=D;c[F++]=h.r;c[F++]=h.g;c[F++]=h.b;c[F++]=h.a;c[F++]=0;c[F++]=0;if(this.twoColorTint){c[F++]=0;c[F++]=0;c[F++]=0;c[F++]=0}this.batcher.draw(e,c,this.QUAD_TRIANGLES)}drawRegion(t,e,i,r,s,n=null,a=false){this.enableRenderer(this.batcher);if(n===null){n=this.WHITE}let l=this.QUAD;var o=0;l[o++]=e;l[o++]=i;l[o++]=n.r;l[o++]=n.g;l[o++]=n.b;l[o++]=n.a;l[o++]=t.u;l[o++]=t.v2;if(this.twoColorTint){l[o++]=0;l[o++]=0;l[o++]=0;l[o++]=0}l[o++]=e+r;l[o++]=i;l[o++]=n.r;l[o++]=n.g;l[o++]=n.b;l[o++]=n.a;l[o++]=t.u2;l[o++]=t.v2;if(this.twoColorTint){l[o++]=0;l[o++]=0;l[o++]=0;l[o++]=0}l[o++]=e+r;l[o++]=i+s;l[o++]=n.r;l[o++]=n.g;l[o++]=n.b;l[o++]=n.a;l[o++]=t.u2;l[o++]=t.v;if(this.twoColorTint){l[o++]=0;l[o++]=0;l[o++]=0;l[o++]=0}l[o++]=e;l[o++]=i+s;l[o++]=n.r;l[o++]=n.g;l[o++]=n.b;l[o++]=n.a;l[o++]=t.u;l[o++]=t.v;if(this.twoColorTint){l[o++]=0;l[o++]=0;l[o++]=0;l[o++]=0}this.batcher.draw(t.texture,l,this.QUAD_TRIANGLES)}line(t,e,i,r,s=null,n=null){this.enableRenderer(this.shapes);this.shapes.line(t,e,i,r,s)}triangle(t,e,i,r,s,n,a,l=null,o=null,h=null){this.enableRenderer(this.shapes);this.shapes.triangle(t,e,i,r,s,n,a,l,o,h)}quad(t,e,i,r,s,n,a,l,o,h=null,u=null,c=null,d=null){this.enableRenderer(this.shapes);this.shapes.quad(t,e,i,r,s,n,a,l,o,h,u,c,d)}rect(t,e,i,r,s,n=null){this.enableRenderer(this.shapes);this.shapes.rect(t,e,i,r,s,n)}rectLine(t,e,i,r,s,n,a=null){this.enableRenderer(this.shapes);this.shapes.rectLine(t,e,i,r,s,n,a)}polygon(t,e,i,r=null){this.enableRenderer(this.shapes);this.shapes.polygon(t,e,i,r)}circle(t,e,i,r,s=null,n=0){this.enableRenderer(this.shapes);this.shapes.circle(t,e,i,r,s,n)}curve(t,e,i,r,s,n,a,l,o,h=null){this.enableRenderer(this.shapes);this.shapes.curve(t,e,i,r,s,n,a,l,o,h)}end(){if(this.activeRenderer===this.batcher){this.batcher.end()}else if(this.activeRenderer===this.shapes){this.shapes.end()}this.activeRenderer=null}resize(t){let e=this.canvas;var i=e.clientWidth;var s=e.clientHeight;if(e.width!=i||e.height!=s){e.width=i;e.height=s}this.context.gl.viewport(0,0,e.width,e.height);if(t===r.Stretch){}else if(t===r.Expand){this.camera.setViewport(i,s)}else if(t===r.Fit){let t=e.width,i=e.height;let r=this.camera.viewportWidth,s=this.camera.viewportHeight;let n=s/r;let a=i/t;let l=n<a?r/t:s/i;this.camera.viewportWidth=t*l;this.camera.viewportHeight=i*l}this.camera.update()}enableRenderer(t){if(this.activeRenderer===t){return}this.end();if(t instanceof e.PolygonBatcher){this.batcherShader.bind();this.batcherShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values);this.batcherShader.setUniformi("u_texture",0);this.batcher.begin(this.batcherShader);this.activeRenderer=this.batcher}else if(t instanceof e.ShapeRenderer){this.shapesShader.bind();this.shapesShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values);this.shapes.begin(this.shapesShader);this.activeRenderer=this.shapes}else{this.activeRenderer=this.skeletonDebugRenderer}}dispose(){this.batcher.dispose();this.batcherShader.dispose();this.shapes.dispose();this.shapesShader.dispose();this.skeletonDebugRenderer.dispose()}}e.SceneRenderer=i;let r;(function(t){t[t["Stretch"]=0]="Stretch";t[t["Expand"]=1]="Expand";t[t["Fit"]=2]="Fit"})(r=e.ResizeMode||(e.ResizeMode={}))})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(e,i,r){this.vertexShader=i;this.fragmentShader=r;this.vs=null;this.fs=null;this.program=null;this.tmp2x2=new Float32Array(2*2);this.tmp3x3=new Float32Array(3*3);this.tmp4x4=new Float32Array(4*4);this.vsSource=i;this.fsSource=r;this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e);this.context.addRestorable(this);this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader);this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader);this.program=this.compileProgram(this.vs,this.fs)}catch(t){this.dispose();throw t}}compileShader(t,e){let i=this.context.gl;let r=i.createShader(t);i.shaderSource(r,e);i.compileShader(r);if(!i.getShaderParameter(r,i.COMPILE_STATUS)){let t="Couldn't compile shader: "+i.getShaderInfoLog(r);i.deleteShader(r);if(!i.isContextLost()){throw new Error(t)}}return r}compileProgram(t,e){let i=this.context.gl;let r=i.createProgram();i.attachShader(r,t);i.attachShader(r,e);i.linkProgram(r);if(!i.getProgramParameter(r,i.LINK_STATUS)){let t="Couldn't compile shader program: "+i.getProgramInfoLog(r);i.deleteProgram(r);if(!i.isContextLost()){throw new Error(t)}}return r}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}setUniform3f(t,e,i,r){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,r)}setUniform4f(t,e,i,r,s){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,r,s)}setUniform2x2f(t,e){let i=this.context.gl;this.tmp2x2.set(e);i.uniformMatrix2fv(this.getUniformLocation(t),false,this.tmp2x2)}setUniform3x3f(t,e){let i=this.context.gl;this.tmp3x3.set(e);i.uniformMatrix3fv(this.getUniformLocation(t),false,this.tmp3x3)}setUniform4x4f(t,e){let i=this.context.gl;this.tmp4x4.set(e);i.uniformMatrix4fv(this.getUniformLocation(t),false,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;let i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost()){throw new Error(`Couldn't find location for uniform ${t}`)}return i}getAttributeLocation(t){let e=this.context.gl;let i=e.getAttribLocation(this.program,t);if(i==-1&&!e.isContextLost()){throw new Error(`Couldn't find location for attribute ${t}`)}return i}dispose(){this.context.removeRestorable(this);let t=this.context.gl;if(this.vs){t.deleteShader(this.vs);this.vs=null}if(this.fs){t.deleteShader(this.fs);this.fs=null}if(this.program){t.deleteProgram(this.program);this.program=null}}static newColoredTextured(t){let i=`\n\t\t\t\tattribute vec4 ${e.POSITION};\n\t\t\t\tattribute vec4 ${e.COLOR};\n\t\t\t\tattribute vec2 ${e.TEXCOORDS};\n\t\t\t\tuniform mat4 ${e.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${e.COLOR};\n\t\t\t\t\tv_texCoords = ${e.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${e.MVP_MATRIX} * ${e.POSITION};\n\t\t\t\t}\n\t\t\t`;let r=`\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t`;return new e(t,i,r)}static newTwoColoredTextured(t){let i=`\n\t\t\t\tattribute vec4 ${e.POSITION};\n\t\t\t\tattribute vec4 ${e.COLOR};\n\t\t\t\tattribute vec4 ${e.COLOR2};\n\t\t\t\tattribute vec2 ${e.TEXCOORDS};\n\t\t\t\tuniform mat4 ${e.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ${e.COLOR};\n\t\t\t\t\tv_dark = ${e.COLOR2};\n\t\t\t\t\tv_texCoords = ${e.TEXCOORDS};\n\t\t\t\t\tgl_Position = ${e.MVP_MATRIX} * ${e.POSITION};\n\t\t\t\t}\n\t\t\t`;let r=`\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t`;return new e(t,i,r)}static newColored(t){let i=`\n\t\t\t\tattribute vec4 ${e.POSITION};\n\t\t\t\tattribute vec4 ${e.COLOR};\n\t\t\t\tuniform mat4 ${e.MVP_MATRIX};\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ${e.COLOR};\n\t\t\t\t\tgl_Position = ${e.MVP_MATRIX} * ${e.POSITION};\n\t\t\t\t}\n\t\t\t`;let r=`\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t`;return new e(t,i,r)}}e.MVP_MATRIX="u_projTrans";e.POSITION="a_position";e.COLOR="a_color";e.COLOR2="a_color2";e.TEXCOORDS="a_texCoords";e.SAMPLER="u_texture";t.Shader=e})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(i,s=10920){this.isDrawing=false;this.shapeType=r.Filled;this.color=new t.Color(1,1,1,1);this.vertexIndex=0;this.tmp=new t.Vector2;if(s>10920){throw new Error("Can't have more than 10920 triangles per batch: "+s)}this.context=i instanceof e.ManagedWebGLRenderingContext?i:new e.ManagedWebGLRenderingContext(i);this.mesh=new e.Mesh(i,[new e.Position2Attribute,new e.ColorAttribute],s,0);this.srcBlend=this.context.gl.SRC_ALPHA;this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing){throw new Error("ShapeRenderer.begin() has already been called")}this.shader=t;this.vertexIndex=0;this.isDrawing=true;let e=this.context.gl;e.enable(e.BLEND);e.blendFunc(this.srcBlend,this.dstBlend)}setBlendMode(t,e){let i=this.context.gl;this.srcBlend=t;this.dstBlend=e;if(this.isDrawing){this.flush();i.blendFunc(this.srcBlend,this.dstBlend)}}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,i,r){this.color.set(t,e,i,r)}point(t,e,i=null){this.check(r.Point,1);if(i===null){i=this.color}this.vertex(t,e,i)}line(t,e,i,s,n=null){this.check(r.Line,2);let a=this.mesh.getVertices();let l=this.vertexIndex;if(n===null){n=this.color}this.vertex(t,e,n);this.vertex(i,s,n)}triangle(t,e,i,s,n,a,l,o=null,h=null,u=null){this.check(t?r.Filled:r.Line,3);let c=this.mesh.getVertices();let d=this.vertexIndex;if(o===null){o=this.color}if(h===null){h=this.color}if(u===null){u=this.color}if(t){this.vertex(e,i,o);this.vertex(s,n,h);this.vertex(a,l,u)}else{this.vertex(e,i,o);this.vertex(s,n,h);this.vertex(s,n,o);this.vertex(a,l,h);this.vertex(a,l,o);this.vertex(e,i,h)}}quad(t,e,i,s,n,a,l,o,h,u=null,c=null,d=null,f=null){this.check(t?r.Filled:r.Line,3);let p=this.mesh.getVertices();let g=this.vertexIndex;if(u===null){u=this.color}if(c===null){c=this.color}if(d===null){d=this.color}if(f===null){f=this.color}if(t){this.vertex(e,i,u);this.vertex(s,n,c);this.vertex(a,l,d);this.vertex(a,l,d);this.vertex(o,h,f);this.vertex(e,i,u)}else{this.vertex(e,i,u);this.vertex(s,n,c);this.vertex(s,n,c);this.vertex(a,l,d);this.vertex(a,l,d);this.vertex(o,h,f);this.vertex(o,h,f);this.vertex(e,i,u)}}rect(t,e,i,r,s,n=null){this.quad(t,e,i,e+r,i,e+r,i+s,e,i+s,n,n,n,n)}rectLine(t,e,i,s,n,a,l=null){this.check(t?r.Filled:r.Line,8);if(l===null){l=this.color}let o=this.tmp.set(n-i,e-s);o.normalize();a*=.5;let h=o.x*a;let u=o.y*a;if(!t){this.vertex(e+h,i+u,l);this.vertex(e-h,i-u,l);this.vertex(s+h,n+u,l);this.vertex(s-h,n-u,l);this.vertex(s+h,n+u,l);this.vertex(e+h,i+u,l);this.vertex(s-h,n-u,l);this.vertex(e-h,i-u,l)}else{this.vertex(e+h,i+u,l);this.vertex(e-h,i-u,l);this.vertex(s+h,n+u,l);this.vertex(s-h,n-u,l);this.vertex(s+h,n+u,l);this.vertex(e-h,i-u,l)}}x(t,e,i){this.line(t-i,e-i,t+i,e+i);this.line(t-i,e+i,t+i,e-i)}polygon(t,e,i,s=null){if(i<3){throw new Error("Polygon must contain at least 3 vertices")}this.check(r.Line,i*2);if(s===null){s=this.color}let n=this.mesh.getVertices();let a=this.vertexIndex;e<<=1;i<<=1;let l=t[e];let o=t[e+1];let h=e+i;for(let r=e,n=e+i-2;r<n;r+=2){let e=t[r];let i=t[r+1];let n=0;let a=0;if(r+2>=h){n=l;a=o}else{n=t[r+2];a=t[r+3]}this.vertex(e,i,s);this.vertex(n,a,s)}}circle(e,i,s,n,a=null,l=0){if(l===0){l=Math.max(1,6*t.MathUtils.cbrt(n)|0)}if(l<=0){throw new Error("segments must be > 0.")}if(a===null){a=this.color}let o=2*t.MathUtils.PI/l;let h=Math.cos(o);let u=Math.sin(o);let c=n,d=0;if(!e){this.check(r.Line,l*2+2);for(let t=0;t<l;t++){this.vertex(i+c,s+d,a);let t=c;c=h*c-u*d;d=u*t+h*d;this.vertex(i+c,s+d,a)}this.vertex(i+c,s+d,a)}else{this.check(r.Filled,l*3+3);l--;for(let t=0;t<l;t++){this.vertex(i,s,a);this.vertex(i+c,s+d,a);let t=c;c=h*c-u*d;d=u*t+h*d;this.vertex(i+c,s+d,a)}this.vertex(i,s,a);this.vertex(i+c,s+d,a)}let f=c;c=n;d=0;this.vertex(i+c,s+d,a)}curve(t,e,i,s,n,a,l,o,h,u=null){this.check(r.Line,h*2+2);if(u===null){u=this.color}let c=1/h;let d=c*c;let f=c*c*c;let p=3*c;let g=3*d;let m=6*d;let _=6*f;let M=t-i*2+n;let y=e-s*2+a;let w=(i-n)*3-t+l;let v=(s-a)*3-e+o;let E=t;let T=e;let A=(i-t)*p+M*g+w*f;let x=(s-e)*p+y*g+v*f;let b=M*m+w*_;let S=y*m+v*_;let I=w*_;let C=v*_;while(h-- >0){this.vertex(E,T,u);E+=A;T+=x;A+=b;x+=S;b+=I;S+=C;this.vertex(E,T,u)}this.vertex(E,T,u);this.vertex(l,o,u)}vertex(t,e,i){let r=this.vertexIndex;let s=this.mesh.getVertices();s[r++]=t;s[r++]=e;s[r++]=i.r;s[r++]=i.g;s[r++]=i.b;s[r++]=i.a;this.vertexIndex=r}end(){if(!this.isDrawing){throw new Error("ShapeRenderer.begin() has not been called")}this.flush();this.context.gl.disable(this.context.gl.BLEND);this.isDrawing=false}flush(){if(this.vertexIndex==0){return}this.mesh.setVerticesLength(this.vertexIndex);this.mesh.draw(this.shader,this.shapeType);this.vertexIndex=0}check(t,e){if(!this.isDrawing){throw new Error("ShapeRenderer.begin() has not been called")}if(this.shapeType==t){if(this.mesh.maxVertices()-this.mesh.numVertices()<e){this.flush()}else{return}}else{this.flush();this.shapeType=t}}dispose(){this.mesh.dispose()}}e.ShapeRenderer=i;let r;(function(t){t[t["Point"]=0]="Point";t[t["Line"]=1]="Line";t[t["Filled"]=4]="Filled"})(r=e.ShapeType||(e.ShapeType={}))})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){var e;(function(e){class i{constructor(i){this.boneLineColor=new t.Color(1,0,0,1);this.boneOriginColor=new t.Color(0,1,0,1);this.attachmentLineColor=new t.Color(0,0,1,.5);this.triangleLineColor=new t.Color(1,.64,0,.5);this.pathColor=(new t.Color).setFromString("FF7F00");this.clipColor=new t.Color(.8,0,0,2);this.aabbColor=new t.Color(0,1,0,.5);this.drawBones=true;this.drawRegionAttachments=true;this.drawBoundingBoxes=true;this.drawMeshHull=true;this.drawMeshTriangles=true;this.drawPaths=true;this.drawSkeletonXY=false;this.drawClipping=true;this.premultipliedAlpha=false;this.scale=1;this.boneWidth=2;this.bounds=new t.SkeletonBounds;this.temp=new Array;this.vertices=t.Utils.newFloatArray(2*1024);this.context=i instanceof e.ManagedWebGLRenderingContext?i:new e.ManagedWebGLRenderingContext(i)}draw(e,r,s=null){let n=r.x;let a=r.y;let l=this.context.gl;let o=this.premultipliedAlpha?l.ONE:l.SRC_ALPHA;e.setBlendMode(o,l.ONE_MINUS_SRC_ALPHA);let h=r.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let t=0,i=h.length;t<i;t++){let i=h[t];if(s&&s.indexOf(i.data.name)>-1){continue}if(i.parent==null){continue}let r=n+i.data.length*i.a+i.worldX;let l=a+i.data.length*i.c+i.worldY;e.rectLine(true,n+i.worldX,a+i.worldY,r,l,this.boneWidth*this.scale)}if(this.drawSkeletonXY){e.x(n,a,4*this.scale)}}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let i=r.slots;for(let r=0,s=i.length;r<s;r++){let s=i[r];let n=s.getAttachment();if(n instanceof t.RegionAttachment){let t=n;let i=this.vertices;t.computeWorldVertices(s.bone,i,0,2);e.line(i[0],i[1],i[2],i[3]);e.line(i[2],i[3],i[4],i[5]);e.line(i[4],i[5],i[6],i[7]);e.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=r.slots;for(let r=0,s=i.length;r<s;r++){let s=i[r];let n=s.getAttachment();if(!(n instanceof t.MeshAttachment)){continue}let a=n;let l=this.vertices;a.computeWorldVertices(s,0,a.worldVerticesLength,l,0,2);let o=a.triangles;let h=a.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let t=0,i=o.length;t<i;t+=3){let i=o[t]*2,r=o[t+1]*2,s=o[t+2]*2;e.triangle(false,l[i],l[i+1],l[r],l[r+1],l[s],l[s+1])}}if(this.drawMeshHull&&h>0){e.setColor(this.attachmentLineColor);h=(h>>1)*2;let t=l[h-2],i=l[h-1];for(let r=0,s=h;r<s;r+=2){let s=l[r],n=l[r+1];e.line(s,n,t,i);t=s;i=n}}}}if(this.drawBoundingBoxes){let t=this.bounds;t.update(r,true);e.setColor(this.aabbColor);e.rect(false,t.minX,t.minY,t.getWidth(),t.getHeight());let i=t.polygons;let s=t.boundingBoxes;for(let t=0,r=i.length;t<r;t++){let r=i[t];e.setColor(s[t].color);e.polygon(r,0,r.length)}}if(this.drawPaths){let s=r.slots;for(let r=0,n=s.length;r<n;r++){let n=s[r];let a=n.getAttachment();if(!(a instanceof t.PathAttachment)){continue}let l=a;let o=l.worldVerticesLength;let h=this.temp=t.Utils.setArraySize(this.temp,o,0);l.computeWorldVertices(n,0,o,h,0,2);let u=this.pathColor;let c=h[2],d=h[3],f=0,p=0;if(l.closed){e.setColor(u);let t=h[0],r=h[1],s=h[o-2],n=h[o-1];f=h[o-4];p=h[o-3];e.curve(c,d,t,r,s,n,f,p,32);e.setColor(i.LIGHT_GRAY);e.line(c,d,t,r);e.line(f,p,s,n)}o-=4;for(let t=4;t<o;t+=6){let r=h[t],s=h[t+1],n=h[t+2],a=h[t+3];f=h[t+4];p=h[t+5];e.setColor(u);e.curve(c,d,r,s,n,a,f,p,32);e.setColor(i.LIGHT_GRAY);e.line(c,d,r,s);e.line(f,p,n,a);c=f;d=p}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let t=0,r=h.length;t<r;t++){let r=h[t];if(s&&s.indexOf(r.data.name)>-1){continue}e.circle(true,n+r.worldX,a+r.worldY,3*this.scale,i.GREEN,8)}}if(this.drawClipping){let i=r.slots;e.setColor(this.clipColor);for(let r=0,s=i.length;r<s;r++){let s=i[r];let n=s.getAttachment();if(!(n instanceof t.ClippingAttachment)){continue}let a=n;let l=a.worldVerticesLength;let o=this.temp=t.Utils.setArraySize(this.temp,l,0);a.computeWorldVertices(s,0,l,o,0,2);for(let t=0,i=o.length;t<i;t+=2){let i=o[t];let r=o[t+1];let s=o[(t+2)%o.length];let n=o[(t+3)%o.length];e.line(i,r,s,n)}}}}dispose(){}}i.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1);i.GREEN=new t.Color(0,1,0,1);e.SkeletonDebugRenderer=i})(e=t.webgl||(t.webgl={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(){this._map={};this._length=0}getValue(t){t=t.toString();return this._map[t]}get(t){return this.getValue(t)}put(t,e){t=t.toString();if(!this.containsKey(t)){this._length++}this._map[t]=e;return e}isEmpty(){return this._length==0}containsKey(t){t=t.toString();return t in this._map}remove(t){if(this.containsKey(t)){this._length--;var e=this.getValue(t);delete this._map[t];return e}return null}getKeys(){var t=[];for(var e in this._map){t.push(e)}return t}containsValue(t){for(var e in this._map){if(this._map[e]==t){return true}}return false}size(){return this._length}clear(){this._length=0;this._map={}}toString(){let t="HashMap Content:\n";for(var e in this._map){t+=e+" -> "+this._map[e]+"\n"}return t}_private_foreachKey(t,e){for(var i in this._map){e.call(t,i)}}_private_foreachValue(t,e){for(var i in this._map){var r=this.getValue(i);e.call(t,r)}}}t.StringMap=e})(spine||(spine={}));var spine;(function(t){class e{}e.rendNum=0;t.SpineStat=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){this._renderArr=[];this._isRender=false;this._gapNum=0;this.tick=(()=>{this._gapNum++;if(this._gapNum%t.FlypineSetting.renderGap==0){this._gapNum=0;t.SpineStat.rendNum=0;this._timeKeeper.update();var e=this._timeKeeper.delta;for(let t=0;t<this._renderArr.length;t++){const i=this._renderArr[t];i.renderUpdate(e)}}if(this._isRender){requestAnimationFrame(this.tick)}});this._timeKeeper=new t.TimeKeeper;this._renderMap=new ds.StringMap}static get ins(){if(this._ins==null){this._ins=new e}return this._ins}start(){if(this._isRender==false){this._isRender=true;this.tick()}}stop(){this._isRender=false}addRender(t){if(this._renderMap.containsKey(t.poolSign.uniqID)){logW("重复添加");return}this._renderMap.put(t.poolSign.uniqID,this._renderArr.length);this._renderArr.push(t)}remove(t){if(!this._renderMap.containsKey(t.poolSign.uniqID)){logW("没添加移除啥？");return}var e=this._renderArr.indexOf(t);if(e!=-1){this._renderArr.splice(e,1)}this._renderMap.remove(t.poolSign.uniqID)}getRenderCnt(){return this._renderArr.length}}t.FlyRender=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){this.timelineData=new Array;this.timelineDipMix=new Array;this.timelinesRotation=new Array}reset(){this.next=null;this.mixingFrom=null;this.animation=null;this.listener=null;this.timelineData.length=0;this.timelineDipMix.length=0;this.timelinesRotation.length=0}setTimelineData(e,i,r){if(e!=null){i.push(e)}let s=this.mixingFrom!=null?this.mixingFrom.setTimelineData(this,i,r):this;if(e!=null){i.pop()}let n=i;let a=i.length-1;let l=this.animation.timelines;let o=this.animation.timelines.length;let h=t.Utils.setArraySize(this.timelineData,o);this.timelineDipMix.length=0;let u=t.Utils.setArraySize(this.timelineDipMix,o);t:for(var c=0;c<o;c++){let i=l[c].getPropertyId();if(!r.add(i)){h[c]=t.AnimationState.SUBSEQUENT}else if(e==null||!e.hasTimeline(i)){h[c]=t.AnimationState.FIRST}else{for(var d=a;d>=0;d--){let e=n[d];if(!e.hasTimeline(i)){if(e.mixDuration>0){h[c]=t.AnimationState.DIP_MIX;u[c]=e;continue t}}}h[c]=t.AnimationState.DIP}}return s}hasTimeline(t){let e=this.animation.timelines;for(var i=0,r=e.length;i<r;i++){if(e[i].getPropertyId()==t){return true}}return false}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;if(t==0){return this.animationStart}return this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t;this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}}t.TrackEntry=e})(spine||(spine={}));var spine;(function(t){let e;(function(t){t[t["start"]=0]="start";t[t["interrupt"]=1]="interrupt";t[t["end"]=2]="end";t[t["dispose"]=3]="dispose";t[t["complete"]=4]="complete";t[t["event"]=5]="event"})(e=t.EventType||(t.EventType={}))})(spine||(spine={}));var spine;(function(t){class e{constructor(t){this.objects=[];this.drainDisabled=false;this.animState=t}start(e){this.objects.push(t.EventType.start);this.objects.push(e);this.animState.animationsChanged=true}interrupt(e){this.objects.push(t.EventType.interrupt);this.objects.push(e)}end(e){this.objects.push(t.EventType.end);this.objects.push(e);this.animState.animationsChanged=true}dispose(e){this.objects.push(t.EventType.dispose);this.objects.push(e)}complete(e){this.objects.push(t.EventType.complete);this.objects.push(e)}event(e,i){this.objects.push(t.EventType.event);this.objects.push(e);this.objects.push(i)}drain(){if(this.drainDisabled){return}this.drainDisabled=true;let e=this.objects;let i=this.animState.listeners;for(let r=0;r<e.length;r+=2){let s=e[r];let n=e[r+1];switch(s){case t.EventType.start:if(n.listener!=null&&n.listener.start){n.listener.start(n)}for(let t=0;t<i.length;t++){if(i[t].start){i[t].start(n)}}break;case t.EventType.interrupt:if(n.listener!=null&&n.listener.interrupt){n.listener.interrupt(n)}for(let t=0;t<i.length;t++){if(i[t].interrupt){i[t].interrupt(n)}}break;case t.EventType.end:if(n.listener!=null&&n.listener.end){n.listener.end(n)}for(let t=0;t<i.length;t++){if(i[t].end){i[t].end(n)}}case t.EventType.dispose:if(n.listener!=null&&n.listener.dispose){n.listener.dispose(n)}for(let t=0;t<i.length;t++){if(i[t].dispose){i[t].dispose(n)}}this.animState.trackEntryPool.free(n);break;case t.EventType.complete:if(n.listener!=null&&n.listener.complete){n.listener.complete(n)}for(let t=0;t<i.length;t++){if(i[t].complete){i[t].complete(n)}}break;case t.EventType.event:let a=e[r+++2];if(n.listener!=null&&n.listener.event){n.listener.event(n,a)}for(let t=0;t<i.length;t++){if(i[t].event){i[t].event(n,a)}}break}}this.clear();this.drainDisabled=false}clear(){this.objects.length=0}}t.EventQueue=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){this._cacheDic=new ds.StringMap;this._templeteDic=new ds.StringMap;this._loadingDic=new ds.StringMap}static get instance(){if(e._instance==null){e._instance=new e}return e._instance}loadSekl(e,i){if(this._cacheDic.containsKey(e)){i.call([e])}else{if(this._loadingDic.containsKey(e)){var r=this._loadingDic.get(e);if(r.indexOf(i)==-1){r.push(i)}}else{var s=new t.SpineTemplet(e);s.on(Laya.Event.COMPLETE,this,this.parseComplete);s.on(Laya.Event.ERROR,this,this.onError);if(e.indexOf(".flysk")!=-1){s.loadFlySk(e)}else if(e.indexOf(".pvrsk")!=-1){s.loadPvr(e)}else{s.loadSkel(e)}this._loadingDic.put(e,[i])}}}parseComplete(t){this._templeteDic.put(t.resName,t);this._cacheDic.put(t.resName,"");this.onLoadComplete(t.resName)}onError(t){console.log("error",t)}onLoadComplete(t){var e=this._loadingDic.get(t);if(e){for(let i=0;i<e.length;i++){const r=e[i];r.call([t])}e.length=0;this._loadingDic.remove(t)}}buildPLayer(t){var e=this.getTemplete(t);if(e){var i=e.buildArmature();return i}return null}relasePLayer(t){if(t==null){logW("你要销毁啥？ item为空");return}var e=this.getTemplete(t.resName);if(e){e.releasePlayer(t)}else{logI(t.resName,"templete未加载")}}createPlayer(){}getTemplete(t){return this._templeteDic.get(t)}getAniDurationByAniName(t,e){var i=this.getTemplete(t);if(i){return i.getAniDurationByAniName(e)}return 0}disposeTemplet(t){var e=this.getTemplete(t);if(e){this._templeteDic.remove(t);this._cacheDic.remove(t);e.destroy()}}checkFreeTempltet(){var t=[];var e=this._templeteDic.getKeys();for(let r=0;r<e.length;r++){const s=e[r];var i=this._templeteDic.get(s);if(i.isFree()){t.push(s)}}return t}getTempleteCnt(){return this._cacheDic.size()}}t.TempletMgr=e})(spine||(spine={}));var spine;(function(t){class e{constructor(e,i=true){this._resName=e;this.vertexEffect=null;this.tempColor=new t.Color;this.tempColor2=new t.Color;this.vertexSize=2+2+4;this.twoColorTint=false;this.renderable=new t.Renderable(null,0,0);this.clipper=new t.SkeletonClipping(e);this.temp=new t.Vector2;this.temp2=new t.Vector2;this.temp3=new t.Color;this.temp4=new t.Color;this.twoColorTint=i;if(i){this.vertexSize+=4}this.vertices=t.Utils.newFloatArray(this.vertexSize*1024)}dispose(){if(this.vertices){this.vertices=null}}draw(i,r=-1,s=-1,n,a){let l=this.clipper;let o=this.premultipliedAlpha;let h=false;let u=this.temp;let c=this.temp2;let d=this.temp3;let f=this.temp4;let p=this.renderable;let g=null;let m=null;let _=i.drawOrder;let M=null;let y=i.color;let w=8;let v=false;if(r==-1){v=true}for(let i=0,E=_.length;i<E;i++){let E=l.isClipping()?2:w;let T=_[i];if(r>=0&&r==T.data.index){v=true}if(!v){l.clipEndWithSlot(T);continue}if(s>=0&&s==T.data.index){v=false}let A=T.getAttachment();let x=null;let b;if(A instanceof t.RegionAttachment){let t=A;p.vertices=this.vertices;p.numVertices=4;p.numFloats=E<<2;t.computeWorldVertices(T.bone,p.vertices,0,E);m=e.QUAD_TRIANGLES;g=t.uvs;x=t.region.renderObject.page.name;b=a.get(x);M=t.color}else if(A instanceof t.MeshAttachment){let e=A;p.vertices=this.vertices;p.numVertices=e.worldVerticesLength>>1;p.numFloats=p.numVertices*E;if(p.numFloats>p.vertices.length){p.vertices=this.vertices=t.Utils.newFloatArray(p.numFloats)}e.computeWorldVertices(T,0,e.worldVerticesLength,p.vertices,0,E);m=e.triangles;x=e.region.renderObject.page.name;b=a.get(x);g=e.uvs;M=e.color}else if(A instanceof t.ClippingAttachment){let t=A;l.clipStart(T,t);continue}else{l.clipEndWithSlot(T);continue}if(b!=null){let t=T.color;let e=this.tempColor;e.r=y.r*t.r*M.r;e.g=y.g*t.g*M.g;e.b=y.b*t.b*M.b;e.a=y.a*t.a*M.a;if(o){e.r*=e.a;e.g*=e.a;e.b*=e.a}let i=T.data.blendMode;if(l.isClipping()){l.clipTriangles(p.vertices,p.numFloats,m,m.length,g,e,null,h);let t=new Float32Array(l.clippedVertices);let r=l.clippedTriangles;let s=[];let a=[];let o=[];if(this.vertexEffect!=null){let e=this.vertexEffect;let i=t;{for(let r=0,n=t.length;r<n;r+=w){u.x=i[r];u.y=i[r+1];d.set(i[r+2],i[r+3],i[r+4],i[r+5]);c.x=i[r+6];c.y=i[r+7];f.set(0,0,0,0);e.transform(u,c,d,f);i[r]=u.x;i[r+1]=u.y;i[r+2]=d.r;i[r+3]=d.g;i[r+4]=d.b;i[r+5]=d.a;i[r+6]=c.x;i[r+7]=c.y;s.push(i[r],-i[r+1]);o.push(i[r+2],i[r+3],i[r+4],i[r+5]);a.push(i[r+6],i[r+7])}}}else{let e=0;while(Number.isFinite(t[e+6])&&Number.isFinite(t[e+7])){s.push(t[e]);s.push(-t[e+1]);o.push(t[e+2]);o.push(t[e+3]);o.push(t[e+4]);o.push(t[e+5]);a.push(t[e+6]);a.push(t[e+7]);e+=this.vertexSize}}let _=1;let M=null;let y=null;let v;switch(i){case 1:v="light";break;case 2:v="multiply";break;case 3:v="screen";break;default:v="normal"}y=(o[3]*255<<24)+o[0]*255|0+(o[1]*255<<8)+(o[2]*255<<16);this.drawTriangles(n.graphics,b,0,0,s,a,new Uint16Array(r),Laya.Matrix.EMPTY,_,M,v,y)}else{let t=p.vertices;let r=[];let s=[];let a=[];if(this.vertexEffect!=null){let i=this.vertexEffect;{for(let n=0,l=0,o=p.numFloats;n<o;n+=w,l+=2){u.x=t[n];u.y=t[n+1];c.x=g[l];c.y=g[l+1];d.setFromColor(e);f.set(0,0,0,0);i.transform(u,c,d,f);t[n]=u.x;t[n+1]=u.y;t[n+2]=d.r;t[n+3]=d.g;t[n+4]=d.b;t[n+5]=d.a;t[n+6]=c.x;t[n+7]=c.y;r.push(t[n],-t[n+1]);a.push(t[n+2],t[n+3],t[n+4],t[n+5]);s.push(t[n+6],t[n+7])}}}else{{for(let i=2,n=0,l=p.numFloats;i<l;i+=w,n+=2){t[i]=e.r;t[i+1]=e.g;t[i+2]=e.b;t[i+3]=e.a;t[i+4]=g[n];t[i+5]=g[n+1];r.push(t[i-2],-t[i-1]);a.push(t[i],t[i+1],t[i+2],t[i+3]);s.push(t[i+4],t[i+5])}}}let l=1;let o=null;let h=null;let _;switch(i){case 1:_="light";break;case 2:_="multiply";break;case 3:_="screen";break;default:_="normal"}h=(a[3]*255<<24)+a[0]*255|0+(a[1]*255<<8)+(a[2]*255<<16);this.drawTriangles(n.graphics,b,0,0,r,s,new Uint16Array(m),Laya.Matrix.EMPTY,l,o,_,h)}}l.clipEndWithSlot(T)}l.clipEnd()}drawTriangles(t,e,i,r,s,n,a,l,o,h,u,c){return t.drawTriangles(e,i,r,s,n,a,l,o,h,u,c)}}e.QUAD_TRIANGLES=[0,1,2,2,3,0];t.SpineSkeletonRenderer=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e,i){this.vertices=t;this.numVertices=e;this.numFloats=i}}t.Renderable=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t=true){this._nativeObj=null;this._nativeObj=new window["_ConchSpineSkeletonRenderer"](t)}get premultipliedAlpha(){return this._nativeObj.premultipliedAlpha}set premultipliedAlpha(t){this._nativeObj.premultipliedAlpha=t}draw(t,e=-1,i=-1,r,s){r.graphics.drawConchSpine(0,0,t,s);this._nativeObj.draw(t,e,i,s)}}t.ConchSpineSkeletonRenderer=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){}static setSkelFrameRate(t){e.skelFrameRate=t;e.frameTimeScend=e.onFrameTime*e.skelFrameRate;e.skelFrameTime=e.frameTimeScend*1e3}static timeToFrame(t){var i=Math.floor(t*1e3/e.skelFrameTime);return i}}e.GLOB_SPEED_SCALE=1;e.IS_LAYA_ONE=false;e.isOpenBlend=true;e.isOpenClipping=true;e.isUseFlySK=false;e.onFrameTime=.016;e.skelFrameRate=3;e.frameTimeScend=e.onFrameTime*e.skelFrameRate;e.skelFrameTime=e.frameTimeScend*1e3;e.noLoopOnClip=false;e.renderGap=1;e.clipReturn=false;t.FlypineSetting=e})(spine||(spine={}));var spine;(function(t){class e{constructor(){}}e.SKEL_COMPLETE="skel_complete";e.START="start";e.END="end";e.COMPLETE="complete";e.EVENT="event";e.DISPOSE="dispose";e.INTERRUPT="interrupt";t.FlypineEvent=e})(spine||(spine={}));var spine;(function(t){class e{constructor(t,e){this.caller=t;this.func=e}call(t){this.func.apply(this.caller,t)}}t.CallBack=e})(spine||(spine={}));var spine;(function(t){var e;(function(t){class e{constructor(){this.classDic={};this._length=0;this._objectEncoding_=0;this._position_=0;this._allocated_=8;this._littleEndian_=false;this.___resizeBuffer(this._allocated_)}clear(){this._strTable=[];this._objTable=[];this._traitsTable=[];this._position_=0;this.length=0}ensureWrite(t){if(this._length<t){this.length=t}}readBoolean(){return this.readByte()!=0}readBytes(t,e=0,i=0){if(e<0||i<0){throw new Error("Read error - Out of bounds"+this.length)}if(i==0){i=this._length-this._position_}t.ensureWrite(e+i);t._byteView_.set(this._byteView_.subarray(this._position_,this._position_+i),e);t.pos=e;this._position_+=i;if(t.pos+i>t.length){t.length=t.pos+i}}readByte_tmp(t=0,e=0){if(t<0||e<0){throw new Error("Read error - Out of bounds"+this.length)}if(e==0){e=this._length-this._position_}var i=this._byteView_.subarray(this._position_,this._position_+e);this._position_+=e;return i}readByte_new(t=0,e=0){if(t<0||e<0){throw new Error("Read error - Out of bounds"+this.length)}if(e==0){e=this._length-this._position_}var i=this._byteView_.buffer.slice(this._position_,this._position_+e);this._position_+=e;return i}readDouble(){var t=this._data_.getFloat64(this._position_,this._littleEndian_);this._position_+=8;return t}readFloat(){var t=this._data_.getFloat32(this._position_,this._littleEndian_);this._position_+=4;return t}readFullBytes(t,e,i){this.ensureWrite(i);for(var r=e;r<e+i;r++){this._data_.setInt8(this._position_++,t.get(r))}}readInt(){var t=this._data_.getInt32(this._position_,this._littleEndian_);this._position_+=4;return t}readShort(){var t=this._data_.getInt16(this._position_,this._littleEndian_);this._position_+=2;return t}readUnsignedByte(){return this._data_.getUint8(this._position_++)}readByte(){return this._data_.getInt8(this._position_++)}readUnsignedInt(){var t=this._data_.getUint32(this._position_,this._littleEndian_);this._position_+=4;return Number(t)}readUnsignedShort(){var t=this._data_.getUint16(this._position_,this._littleEndian_);this._position_+=2;return t}readUTF(){return this.readUTFBytes(this.readUnsignedShort())}readUnicode(t){var e="";var i=this._position_+t;var r,s=0;while(this._position_<i){s=this._byteView_[this._position_++];r=this._byteView_[this._position_++];e+=String.fromCharCode(r<<8|s)}return e}readMultiByte(t,e){if(e=="UNICODE"||e=="unicode"){return this.readUnicode(t)}return this.readUTFBytes(t)}readUTFBytes(t=-1){var e="";var i=this._position_+t;var r,s,n=0;while(this._position_<i){r=this._data_.getUint8(this._position_++);if(r<128){if(r!=0){e+=String.fromCharCode(r)}}else if(r<224){e+=String.fromCharCode((r&63)<<6|this._data_.getUint8(this._position_++)&127)}else if(r<240){s=this._data_.getUint8(this._position_++);e+=String.fromCharCode((r&31)<<12|(s&127)<<6|this._data_.getUint8(this._position_++)&127)}else{s=this._data_.getUint8(this._position_++);n=this._data_.getUint8(this._position_++);e+=String.fromCharCode((r&15)<<18|(s&127)<<12|n<<6&127|this._data_.getUint8(this._position_++)&127)}}return e}toString(){var t=this._position_;this._position_=0;var e=this.readUTFBytes(this.length);this._position_=t;return e}writeBoolean(t){this.writeByte(t?1:0)}writeByte(t){this.ensureWrite(this._position_+1);this._data_.setInt8(this._position_,t);this._position_+=1}writeBytes(t,e=0,i=0){if(e<0||i<0){throw"writeBytes error - Out of bounds"}if(i==0){i=t.length-e}this.ensureWrite(this._position_+i);this._byteView_.set(t._byteView_.subarray(e,e+i),this._position_);this._position_+=i}writeArrayBuffer(t,e=0,i=0){if(e<0||i<0){throw"writeArrayBuffer error - Out of bounds"}if(i==0){i=t.byteLength-e}this.ensureWrite(this._position_+i);var r=new Uint8Array(t);this._byteView_.set(r.subarray(e,e+i),this._position_);this._position_+=i}writeDouble(t){this.ensureWrite(this._position_+8);this._data_.setFloat64(this._position_,t,this._littleEndian_);this._position_+=8}writeFloat(t){this.ensureWrite(this._position_+4);this._data_.setFloat32(this._position_,t,this._littleEndian_);this._position_+=4}writeInt(t){this.ensureWrite(this._position_+4);this._data_.setInt32(this._position_,t,this._littleEndian_);this._position_+=4}writeShort(t){this.ensureWrite(this._position_+2);this._data_.setInt16(this._position_,t,this._littleEndian_);this._position_+=2}writeUnsignedInt(t){this.ensureWrite(this._position_+4);this._data_.setUint32(this._position_,t,this._littleEndian_);this._position_+=4}writeUnsignedShort(t){this.ensureWrite(this._position_+2);this._data_.setUint16(this._position_,t,this._littleEndian_);this._position_+=2}writeUTF(t){t=t+"";this.writeUnsignedShort(this._getUTFBytesCount(t));this.writeUTFBytes(t)}writeUnicode(t){t=t+"";this.ensureWrite(this._position_+t.length*2);var e=0;for(var i=0,r=t.length;i<r;i++){e=t.charCodeAt(i);this._byteView_[this._position_++]=e&255;this._byteView_[this._position_++]=e>>8}}writeMultiByte(t,e){t=t+"";if(e=="UNICODE"||e=="unicode"){return this.writeUnicode(t)}this.writeUTFBytes(t)}writeUTFBytes(t){t=t+"";this.ensureWrite(this._position_+t.length*4);for(var e=0,i=t.length;e<i;e++){var r=t.charCodeAt(e);if(r<=127){this.writeByte(r)}else if(r<=2047){this.writeByte(192|r>>6);this.writeByte(128|r&63)}else if(r<=65535){this.writeByte(224|r>>12);this.writeByte(128|r>>6&63);this.writeByte(128|r&63)}else{this.writeByte(240|r>>18);this.writeByte(128|r>>12&63);this.writeByte(128|r>>6&63);this.writeByte(128|r&63)}}this.length=this._position_}__fromBytes(t){this._byteView_=new Uint8Array(t.getData());this.length=this._byteView_.length;this._allocated_=this.length}__get(t){return this._data_.getUint8(t)}_getUTFBytesCount(t){var e=0;t=t+"";for(var i=0,r=t.length;i<r;i++){var s=t.charCodeAt(i);if(s<=127){e+=1}else if(s<=2047){e+=2}else if(s<=65535){e+=3}else{e+=4}}return e}_byteAt_(t){return this._byteView_[t]}_byteSet_(t,e){this.ensureWrite(t+1);this._byteView_[t]=e}uncompress(t="zlib"){var e=new Zlib.Inflate(this._byteView_);this._byteView_=e.decompress();this._data_=new DataView(this._byteView_.buffer);this._allocated_=this._length=this._byteView_.byteLength;this._position_=0}compress(t="zlib"){var e=new Zlib.Deflate(this._byteView_);this._byteView_=e.compress();this._data_=new DataView(this._byteView_.buffer);this._position_=this._allocated_=this._length=this._byteView_.byteLength}___resizeBuffer(t){try{var e=new Uint8Array(t);if(this._byteView_!=null){if(this._byteView_.length<=t){e.set(this._byteView_)}else{e.set(this._byteView_.subarray(0,t))}}this._byteView_=e;this._data_=new DataView(e.buffer)}catch(e){throw"___resizeBuffer err:"+t}}__getBuffer(){return this._data_.buffer}__set(t,e){this._data_.setUint8(t,e)}static __ofBuffer(t){var i=new e;i.length=i.allocated=t.byteLength;i.data=new DataView(t);i.byteView=new Uint8Array(t);return i}setUint8Array(t){this._byteView_=t;this._data_=new DataView(t.buffer);this._length=t.byteLength;this._position_=0}getUint8Array(){return this._byteView_}get bytesAvailable(){return this.length-this._position_}get endian(){return this._littleEndian_?e.LITTLE_ENDIAN:e.BIG_ENDIAN}set endian(t){this._littleEndian_=t==e.LITTLE_ENDIAN}set length(t){this.___resizeBuffer(this._allocated_=t);this._length=t}get length(){return this._length}get position(){return this.pos}set position(t){this.pos=t}get pos(){return this._position_}set pos(t){if(t<this._length){this._position_=t<0?0:t}else{this._position_=t;this.length=t}}readObject(){this._strTable=[];this._objTable=[];this._traitsTable=[];return this.readObject2()}readObject2(){var t=this.readByte();return this.readObjectValue(t)}readObjectValue(t){var i;switch(t){case e.NULL_TYPE:break;case e.STRING_TYPE:i=this.__readString();break;case e.INTEGER_TYPE:i=this.readInterger();break;case e.FALSE_TYPE:i=false;break;case e.TRUE_TYPE:i=true;break;case e.OBJECT_TYPE:i=this.readScriptObject();break;case e.ARRAY_TYPE:i=this.readArray();break;case e.DOUBLE_TYPE:i=this.readDouble();break;case e.BYTEARRAY_TYPE:i=this.readByteArray();break;default:}return i}readByteArray(){var t=this.readUInt29();if((t&1)==0){return this.getObjRef(t>>1)}else{var i=t>>1;var r=new e;this._objTable.push(r);this.readBytes(r,0,i);return r}}readInterger(){var t=this.readUInt29();t=t<<3>>3;return parseInt(t+"")}getStrRef(t){return this._strTable[t]}getObjRef(t){return this._objTable[t]}__readString(){var t=this.readUInt29();if((t&1)==0){return this.getStrRef(t>>1)}var i=t>>1;if(i==0){return e.EMPTY_STRING}var r=this.readUTFBytes(i);this._strTable.push(r);return r}readTraits(t){var e;if((t&3)==1){e=this.getTraitReference(t>>2);return e.propoties?e:{obj:{}}}else{var i=(t&4)==4;var r=(t&8)==8;var s=t>>4;var n=this.__readString();e={};e.className=n;e.propoties=[];e.dynamic=r;e.externalizable=i;if(s>0){for(var a=0;a<s;a++){var l=this.__readString();e.propoties.push(l)}}this._traitsTable.push(e);return e}}readScriptObject(){var t=this.readUInt29();if((t&1)==0){return this.getObjRef(t>>1)}else{var e=this.readTraits(t);var i=e.className;var r=e.externalizable;var s;var n;var a=e.propoties;if(i&&i!=""){var l;if(l){s=new l}else{s={}}}else{s={}}this._objTable.push(s);if(a){for(var o=0;o<a.length;o++){s[a[o]]=this.readObject2()}}if(e.dynamic){for(;;){n=this.__readString();if(n==null||n.length==0){break}s[n]=this.readObject2()}}return s}}readArray(){var t=this.readUInt29();if((t&1)==0){return this.getObjRef(t>>1)}var e=null;var i=t>>1;var r;for(;;){r=this.__readString();if(r==null||r.length==0){break}if(e==null){e={};this._objTable.push(e)}e[r]=this.readObject2()}if(e==null){e=[];this._objTable.push(e);var s=0;for(s=0;s<i;s++){e.push(this.readObject2())}}else{for(s=0;s<i;s++){e[s.toString()]=this.readObject2()}}return e}readUInt29(){var t=0;var e=this.readByte()&255;if(e<128){return e}t=(e&127)<<7;e=this.readByte()&255;if(e<128){return t|e}t=(t|e&127)<<7;e=this.readByte()&255;if(e<128){return t|e}t=(t|e&127)<<8;e=this.readByte()&255;return t|e}writeObject(t){this._strTable=[];this._objTable=[];this._traitsTable=[];this.writeObject2(t)}writeObject2(t){if(t==null){this.writeAMFNull();return}var i=typeof t;if(i==="string"){this.writeAMFString(t)}else if(i==="boolean"){this.writeAMFBoolean(t)}else if(i==="number"){if(String(t).indexOf(".")!=-1){this.writeAMFDouble(t)}else{this.writeAMFInt(t)}}else if(i==="object"){if(t instanceof Array){this.writeArray(t)}else if(t instanceof e){this.writeAMFByteArray(t)}else{this.writeCustomObject(t)}}}writeAMFNull(){this.writeByte(e.NULL_TYPE)}writeAMFString(t){this.writeByte(e.STRING_TYPE);this.writeStringWithoutType(t)}writeStringWithoutType(t){if(t.length==0){this.writeUInt29(1);return}var e=this._strTable.indexOf(t);if(e>=0){this.writeUInt29(e<<1)}else{var i=this._getUTFBytesCount(t);this.writeUInt29(i<<1|1);this.writeUTFBytes(t);this._strTable.push(t)}}writeAMFInt(t){if(t>=e.INT28_MIN_VALUE&&t<=e.INT28_MAX_VALUE){t=t&e.UINT29_MASK;this.writeByte(e.INTEGER_TYPE);this.writeUInt29(t)}else{this.writeAMFDouble(t)}}writeAMFDouble(t){this.writeByte(e.DOUBLE_TYPE);this.writeDouble(t)}writeAMFBoolean(t){if(t){this.writeByte(e.TRUE_TYPE)}else{this.writeByte(e.FALSE_TYPE)}}writeCustomObject(t){this.writeByte(e.OBJECT_TYPE);var i=this._objTable.indexOf(t);if(i!=-1){this.writeUInt29(i<<1)}else{this._objTable.push(t);var r={};r.className=this.getAliasByObj(t);r.dynamic=false;r.externalizable=false;r.properties=[];for(var s in t){if(t[s]instanceof Function){continue}r.properties.push(s);r.properties.sort()}var n=e.getTraitsInfoRef(this._traitsTable,r);var a=r.properties.length;var l=0;if(n>=0){this.writeUInt29(n<<2|1)}else{this._traitsTable.push(r);this.writeUInt29(3|(r.externalizable?4:0)|(r.dynamic?8:0)|a<<4);this.writeStringWithoutType(r.className);for(l=0;l<a;l++){this.writeStringWithoutType(r.properties[l])}}for(l=0;l<a;l++){this.writeObject2(t[r.properties[l]])}}}static getTraitsInfoRef(t,i){var r,s=t.length;for(r=0;r<s;r++){if(e.equalsTraitsInfo(i,t[r])){return r}}return-1}static equalsTraitsInfo(t,e){if(t==e){return true}if(!t.className===e.className){return false}if(t.properties.length!=e.properties.length){return false}var i=t.properties.length;var r;t.properties.sort();e.properties.sort();for(var s=0;s<i;s++){if(t.properties[s]!=e.properties[s]){return false}}return true}getAliasByObj(t){return""}writeArray(t){this.writeByte(e.ARRAY_TYPE);var i=t.length;var r=this._objTable.indexOf(t);if(r>-1){this.writeUInt29(i<<1)}else{this.writeUInt29(i<<1|1);this.writeStringWithoutType(e.EMPTY_STRING);for(var s=0;s<i;s++){this.writeObject2(t[s])}this._objTable.push(t)}}writeAMFByteArray(t){this.writeByte(e.BYTEARRAY_TYPE);var i=this._objTable.indexOf(t);if(i>=0){this.writeUInt29(i<<1)}else{var r=t.length;this.writeUInt29(r<<1|1);this.writeBytes(t,0,r)}}writeMapAsECMAArray(t){this.writeByte(e.ARRAY_TYPE);this.writeUInt29(0<<1|1);var i,r;for(r in t){i++;this.writeStringWithoutType(r);this.writeObject2(t[r])}this.writeStringWithoutType(e.EMPTY_STRING)}writeUInt29(t){if(t<128){this.writeByte(t)}else if(t<16384){this.writeByte(t>>7&127|128);this.writeByte(t&127)}else if(t<2097152){this.writeByte(t>>14&127|128);this.writeByte(t>>7&127|128);this.writeByte(t&127)}else if(t<1073741824){this.writeByte(t>>22&127|128);this.writeByte(t>>15&127|128);this.writeByte(t>>8&127|128);this.writeByte(t&255)}else{}}getTraitReference(t){return this._traitsTable[t]}}e.BIG_ENDIAN="bigEndian";e.LITTLE_ENDIAN="littleEndian";e.UNDEFINED_TYPE=0;e.NULL_TYPE=1;e.FALSE_TYPE=2;e.TRUE_TYPE=3;e.INTEGER_TYPE=4;e.DOUBLE_TYPE=5;e.STRING_TYPE=6;e.XML_TYPE=7;e.DATE_TYPE=8;e.ARRAY_TYPE=9;e.OBJECT_TYPE=10;e.AVMPLUSXML_TYPE=11;e.BYTEARRAY_TYPE=12;e.EMPTY_STRING="";e.UINT29_MASK=536870911;e.INT28_MAX_VALUE=268435455;e.INT28_MIN_VALUE=-268435456;t.ByteArray=e})(e=t.utils||(t.utils={}))})(spine||(spine={}));var spine;(function(t){class e extends Laya.Sprite{constructor(){super()}addSkel(t){super.addChild(t)}addSkelAt(t,e){super.addChildAt(t,e)}removeSkel(t){return super.removeChild(t)}}t.SkelLayaLayer=e})(spine||(spine={}));var spine;(function(t){class e extends Laya.Resource{constructor(e,i=true,r=false){super();this._textureMap=new ds.StringMap;this._poolInfo=new common.PoolInfo(e,t.SpineSkeleton,100);this._pool=common.PoolMgr.createPool(this._poolInfo);this._isDestroyed=false;this._layaPremultipliedAlpha=i;this._spinePremultipliedAlpha=r}get textureMap(){return this._textureMap}buildArmature(){var t=this._pool.create();t.init(this);return t}releasePlayer(t){this._pool.releaseItem(t)}getAniNameByIndex(t){var e=this.skeletonData.animations[t];if(e){return e.name}return null}getAniDurationByAniName(t){var e=this.skeletonData.findAnimation(t);if(e){return e.duration}return 0}getAniNameArr(){return this.skeletonData.animationsArr}getSkinIndexByName(t){var e=this.skeletonData.skins;var i;for(var r=0,s=e.length;r<s;r++){i=e[r];if(i.name==t){return r}}return-1}isHaveClip(){return this.skeletonData.isHaveClip}destroy(){this._isDestroyed=true;var t=this._textureMap.getKeys();for(let i=0;i<t.length;i++){const r=t[i];var e=this._textureMap.get(r);e.destroy()}this._textureMap.clear();this.skeletonData.dispose();this.skeletonData=null;common.PoolMgr.dispose(this._poolInfo);this._pool=null;super.destroy()}isFree(){return this._pool.isAllFee()}}t.BaseTemplete=e})(spine||(spine={}));var spine;(function(t){class e extends Laya.Texture{constructor(t){super(t)}getImage(){return{width:this.sourceWidth,height:this.sourceHeight}}setFilters(t,e){}setWraps(t,e){}}t.SpineGLTexture=e})(spine||(spine={}));var spine;(function(t){class e extends Laya.Sprite{constructor(){super();this.pause=true;this._currAniName=null;this._currentClipIndex=0;this._playbackRate=1;this.renderGap=0;this._gapNum=0;this.poolSign=new common.PoolSign;this._defaultGraphics=this.graphics}get isFree(){return this.poolSign.isFree}setTimeScale(t){this.playbackRate(t)}init(e){if(this._templet==null){this.resName=e.resName;this._templet=e;this.skeleton=new t.Skeleton(this._templet.skeletonData);this.stateData=new t.AnimationStateData(this.skeleton.data);this.state=new t.AnimationState(this.stateData);this.skeletonRenderer=new t.SpineSkeletonRenderer(this.resName,false);this.skeletonRenderer.premultipliedAlpha=this._templet._spinePremultipliedAlpha}}playByIndex(t,e,i,r){var s=this.getAniNameByIndex(t);if(s&&s!=""){this.play(s,e,i,r)}}play(e,i,r,s){this._userCahce=s;var n=e;this._loop=i;if(this.pause||r||this._currAniName!=n){this._currAniName=n;var a=this.state.setAnimation(0,n,i);if(a==null){logW(this.resName+" 没有这个动画->"+e);n=this.getAniNameByIndex(0);this._currAniName=n;a=this.state.setAnimation(0,n,i);if(a==null){return}}if(this.templet.isHaveClip()&&t.FlypineSetting.noLoopOnClip){i=false}this._currAnimation=this.stateData.skeletonData.findAnimation(n);var l=this.state.getCurrent(0).animation.duration;this._maxFrame=t.FlypineSetting.timeToFrame(l);this.renderGap=fly.ZMath.randomInt(0,t.FlypineSetting.skelFrameRate-1)*t.FlypineSetting.onFrameTime;this._currentClipIndex=0;if(this.pause){this.startPlay()}if(this._maxFrame>31){this._userCahce=s=false}if(s){}else{}}}startPlay(){this.pause=false;t.FlyRender.ins.addRender(this)}stopPlay(){this.pause=true;t.FlyRender.ins.remove(this)}renderUpdate(t){this._update(t)}stopTo(t){this.pause=true;t<=0?1:t;t>=this._maxFrame?1:t;this._currentClipIndex=t;this.renderFrame()}_update(e){this.renderGap+=e;if(this.renderGap<t.FlypineSetting.skelFrameTime){return}this._gapNum++;if(this._gapNum%2!=0&&this.templet.isHaveClip()){return}this._gapNum=0;this.updateFrame(this.renderGap);this._currentClipIndex+=this._playbackRate;this.renderGap=0;if(!this.isNeedRender()){return}t.SpineStat.rendNum++;this.renderFrame()}renderFrame(){this.state.setPlayTime(this._currentClipIndex*t.FlypineSetting.frameTimeScend);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();this._defaultGraphics.clear();this.graphics=this._defaultGraphics;this.skeletonRenderer.draw(this.skeleton,-1,-1,this,this._templet.textureMap)}updateFrame(t){for(var e=1;e<=this._playbackRate;e++){var i=this._currAnimation.getFreamEvent(this._currentClipIndex+e);if(i){var r={floatValue:i.floatValue,intValue:i.intValue,name:i.data.name,stringValue:i.stringValue,time:i.time};this.event(Laya.Event.LABEL,r)}}if(this._currentClipIndex>this._maxFrame){if(!this._loop){this.stop();this.event(Laya.Event.STOPPED)}else{this.event(Laya.Event.COMPLETE)}this._currentClipIndex=0}}isNeedRender(){if(this._currAniName==null||this._currAniName==""){return false}if(!this.state||!this.skeleton){return false}if(this.pause){return false}if(!Laya.stage.contains(this)){return false}var t=this.parent;if(t==null){return false}while(t!=null){if(t.visible==false){return false}if(t.alpha==0){return false}t=t.parent}return true}getAnimNum(){return this._templet.skeletonData.animations.length}getAniNameByIndex(t){return this._templet.getAniNameByIndex(t)}getSlotByName(t){return this.skeleton.findSlot(t)}playbackRate(t){this._playbackRate=t}showSkinByName(t){this.showSkinByIndex(this._templet.getSkinIndexByName(t))}showSkinByIndex(t){let e=this.skeleton.data.skins[t];this.skeleton.setSkin(e);this.skeleton.setSlotsToSetupPose()}stop(){if(!this.pause){this._currAniName=null;this.stopPlay()}}paused(){if(!this.pause){this.stopPlay();this.event(Laya.Event.PAUSED)}}resume(){if(this.pause){this.startPlay()}}dispose(){this.release();t.FlyRender.ins.remove(this);this.skeleton.dispose();this.stateData.dispose();this.state.dispose();this.skeletonRenderer.dispose();this._templet=null;this._defaultGraphics.clear();this._defaultGraphics.destroy()}get templet(){return this._templet}get playState(){if(!this._currAniName){return e.stopped}if(this.pause){return e.paused}return e.playing}getAniNameArr(){return this._templet.getAniNameArr()}isHaveClip(){if(this._templet){return this._templet.isHaveClip()}return false}release(){this.stop();this._playbackRate=1;this.x=0;this.y=0;this.alpha=1;this.scaleX=1;this.scaleY=1;this.renderGap=0;this._currentClipIndex=0;if(this.parent){this.parent.removeChild(this)}}reset(){}destroy(){}}e.stopped=0;e.paused=1;e.playing=2;t.SpineSkeleton=e;Laya.ClassUtils.regClass("laya.layaspine.SpineSkeleton",e);Laya.ClassUtils.regClass("Laya.SpineSkeleton",e)})(spine||(spine={}));var spine;(function(t){class e extends t.BaseTemplete{constructor(t,e=true,i=false){super(t,e,i);this._isPngComplete=false;this.onImgLoad=(()=>{var t=new Laya.Texture2D(this._browserImg.width,this._browserImg.height,1,false,false);t.wrapModeU=Laya.WarpMode.Clamp;t.wrapModeV=Laya.WarpMode.Clamp;t.loadImageSource(this._browserImg,true);this.textureLoader(t);this.parseSpineAni()})}loadFlySk(e){var i=e.replace(".flysk",".png");this._textName=i.substring(i.lastIndexOf("/")+1);this.resName=e;Laya.loader.load([{type:Laya.Loader.BUFFER,url:e}],Laya.Handler.create(this,i=>{if(i){var r=Laya.loader.getRes(e);var s=new Uint8Array(r);var n=new t.utils.ByteArray;n.setUint8Array(s);var a=n.readByte_tmp(0,n.readInt());var l=n.readInt();var o=n.readByte_new(0,l);var h=new t.utils.ByteArray;h.setUint8Array(a);h.uncompress();this._atlasText=h.readUTFBytes(h.readInt());this._byteData=h.readByte_tmp(0,h.readInt());this.loadImg(o)}else{logE(`Couldn't load text ${e}`)}}))}loadPvr(e){logE("loadPvr");var i=e.replace(".pvrsk",".png");this._textName=i.substring(i.lastIndexOf("/")+1);this.resName=e;Laya.loader.load([{type:Laya.Loader.BUFFER,url:e}],Laya.Handler.create(this,i=>{if(i){var r=Laya.loader.getRes(e);var s=new Uint8Array(r);var n=new t.utils.ByteArray;n.setUint8Array(s);n.uncompress();this._atlasText=n.readUTFBytes(n.readInt());this._byteData=n.readByte_tmp(0,n.readInt());var a=n.readByte_new(0,n.readInt());var l=new Laya.Texture2D(0,0,Laya.TextureFormat.PVRTCRGBA_4BPPV,false,false);l.wrapModeU=Laya.WarpMode.Clamp;l.wrapModeV=Laya.WarpMode.Clamp;logE("开始解析pvr------------");l.setCompressData(a);logE("pvr 解析完成++++++++++++++++++++++");this.textureLoader(l);this.parseSpineAni()}else{logE(`Couldn't load text ${e}`)}}))}loadImg(t){var e={type:"application/octet-binary"};var i=[];var r;try{i[0]=t;r=new Blob(i,e)}catch(e){var s=window;s.BlobBuilder=s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder;if(e.name=="TypeError"&&s.BlobBuilder){var n=new s.BlobBuilder;n.append(t);r=n.getBlob("image/png")}}var a=URL.createObjectURL(r);this._browserImg=new Laya.Browser.window.Image;this._browserImg.onload=this.onImgLoad;this._browserImg.src=a}loadSkel(t){this.resName=t;let e=t.replace(".skel",".atlas");var i=t.replace(".skel",".png");this._textName=i.substring(i.lastIndexOf("/")+1);this.loadBinary(t);this.loadText(e);this.loadTexture(i)}loadBinary(t){Laya.loader.load([{type:Laya.Loader.BUFFER,url:t}],Laya.Handler.create(this,e=>{if(e){var i=Laya.loader.getRes(t);var r=new Uint8Array(i);this._byteData=r;this.checkComplete()}else{logE(`Couldn't load text ${t}`)}}))}loadText(t){Laya.loader.load([{type:Laya.Loader.TEXT,url:t}],Laya.Handler.create(this,e=>{if(e){this._atlasText=Laya.loader.getRes(t);this.checkComplete()}else{logE(`Couldn't load text ${t}`)}}))}loadTexture(t){Laya.loader.load([{type:Laya.Loader.IMAGE,url:t}],Laya.Handler.create(this,e=>{if(e){this._isPngComplete=true;this.textureLoader(Laya.loader.getRes(t).bitmap);this.checkComplete()}else{logE(`Couldn't load text ${t}`)}}))}textureLoader(e){var i=new t.SpineGLTexture(e);this.textureMap.put(this._textName,i);return i}checkComplete(){if(this._atlasText&&this._byteData&&this._isPngComplete){this.parseSpineAni()}}parseSpineAni(){if(this._isDestroyed){this.destroy();return}var e=new t.TextureAtlas(this._atlasText,t=>{return this.textureMap.get(t)});var i=new t.AtlasAttachmentLoader(e);this._skeletonBinary=new t.SkeletonBinary(i);this.skeletonData=this._skeletonBinary.readSkeletonData(this._byteData);this.skeletonData.isHaveClip=this._skeletonBinary.isHaveClip;this.event(Laya.Event.COMPLETE,this)}destroy(){super.destroy();this._skeletonBinary=null;this._byteData=null;this._atlasText=null;var t=this.resName;let e=t.replace(".skel",".atlas");var i=t.replace(".skel",".png");Laya.loader.clearRes(t);Laya.loader.clearRes(e);Laya.loader.clearRes(i)}}t.SpineTemplet=e})(spine||(spine={}));var spine;(function(t){class e{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}t.AnimationStateAdapter2=e})(spine||(spine={}));var Public;(function(t){class e{constructor(){this.fitX=false;this.fitY=false;this.fitPerfect=false}}t.UIAdaptive=e})(Public||(Public={}));var Public;(function(t){var e;(function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;if(e.test(t)){return true}else{return false}}t.checkEmail=e;function i(t){if(n(t)){return false}var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;if(e.test(t)){if(Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256){return true}}return false}t.isIP=i;function r(t){var e=/^((\+86)|(86))?[1][3,4,5,7,8]\d{9}$/;if(e.test(t)){return true}else{return false}}t.checkMobile=r;function s(t){var e=/^[0][1-9]{2,3}-[0-9]{5,10}$/;var i=/^[1-9]{1}[0-9]{5,8}$/;var r="您输入的电话号码不正确!";if(t.length>9){if(e.test(t)){return true}else{return false}}else{if(i.test(t)){return true}else{return false}}}t.checkPhone=s;function n(t){if(t==""){return true}var e="^[ ]+$";var i=new RegExp(e);return i.test(t)}t.isNull=n;function a(t){var e=/^[-]{0,1}[0-9]{1,}$/;return e.test(t)}t.isInteger=a;function l(t){var e="^[0-9]+$";var i=new RegExp(e);if(t.search(i)!=-1){return true}else{return false}}t.isNumber=l;function o(t){var e="^[0-9]+[.][0-9]{0,3}$";var i=new RegExp(e);if(i.test(t)){return true}else{return false}}t.isMoney=o;function h(t,e){var i=" ";var r=-1;if(e==0||e==1){while(i==" "){++r;i=t.substr(r,1)}t=t.substring(r)}if(e==0||e==2){i=" ";r=t.length;while(i==" "){--r;i=t.substr(r,1)}t=t.substring(0,r+1)}return t}t.cTrim=h;function u(t){let e=null;if(t.length<6){return false}if(t.length>20){return false}return true}t.checkStrLen=u;function c(t){var e="^BFG_[0-9]+$";var i=new RegExp(e);if(i.test(t)){return true}else{return false}}t.isGuestAccount=c;function d(t){var e="/^[a-zA-Z]+[dw]*$/";var i=new RegExp(e);if(i.test(t)){return true}else{return false}}t.isAccount=d})(e=t.RegUtils||(t.RegUtils={}))})(Public||(Public={}));var Public;(function(t){var e;(function(t){function e(){return Laya.LocalStorage.support}t.isSupportLocalData=e;function i(t,e){Laya.LocalStorage.setItem(t,e)}t.setLocalData=i;function r(t){return Laya.LocalStorage.getItem(t)}t.getLocalData=r;function s(t){Laya.LocalStorage.removeItem(t)}t.deleteLocalData=s;function n(){Laya.LocalStorage.clear()}t.clearLocalData=n;function a(){}t.getMic=a;function l(){}t.getScreen=l;function o(t){window.open("tel:"+t,"_self")}t.callPhone=o;function h(t){window.open("sms:"+t,"_self")}t.sendMessage=h;function u(){return window.location.href}t.getCurUrl=u;function c(){let t=window.navigator.userAgent;return{LayaAirIDE:t.indexOf("LayaAirIDE")>-1,trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/)&&t.indexOf("QIHU")&&t.indexOf("Chrome")<0,ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,ua:t}}t.getUserAgent=c;t.curAngle=window["orientation"]})(e=t.NativeApi||(t.NativeApi={}))})(Public||(Public={}));var Global;(function(t){function e(){if(t.waitPanel!=null){t.waitPanel.removeSelf();t.waitPanel=null}}t.Cycle=e;function i(e=true,i=""){if(t.waitPanel==null){t.waitPanel=new WaitPanel(1);Laya.stage.addChild(t.waitPanel)}t.waitPanel.activeStatue(true,e,i)}t.showWaitPanel=i;function r(){if(t.waitPanel!=null){t.waitPanel.activeStatue(false)}}t.hideWaitPanel=r;function s(t){let e=["零","一","二","三","四","五","六","七","八","九"];return e[t]}t.getNumber=s;function n(t){return t.parent.name+t.zOrder+t.name+t.x+t.y}t.getUnique=n;function a(t,e){let i=t.toString();let r=e-i.length;if(i.length<e){let t="";for(let e=0;e<r;e++){t="0"+t}i=t+i}return i}t.ToFitZero=a;function l(t,e){return t+Math.floor(Math.random()*(e-t))}t.getRandomNum=l;function o(t,e,i=true){let r=["\\",'"',"[","]"];r.forEach(e=>{t.replace(e,"")});if(t==null||t.length==0){return[]}let s=t.split(e);if(i){let t=[];s.forEach(e=>{if(e.length>0){t.push(parseInt(e))}});return t}return s}t.splitByStr=o;function h(t,e,i,r=true){let s=[];let n=t.split(e);n.forEach(t=>{if(t.length>0){let e=t.split(i);if(r){let t=[];e.forEach(e=>{t.push(parseInt(e))});s.push(t)}else{s.push(e)}}});return s}t.splitWithTwo=h;function u(t){let e=Math.round(parseFloat(t)*100)/100;let i=t.toString().split(".");if(i.length==1){t=t.toString()+".00";return e}if(i.length>1){if(i[1].length<2){t=t.toString()+"0"}return e}}t.returnFloat=u;function c(t,...e){if(GlobalData.isRelease){return}logI(t,e)}t.log=c;function d(){return"xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)})}t.getUUID=d;function f(t,e,i){let r=e-t;if(r>Math.PI){r=r-2*Math.PI}if(r<-Math.PI){r=r+2*Math.PI}return t+r*i}t.lerpAngle=f;function p(t,e,i){let r=e-t;return t+r*i}t.lerpDistance=p;function g(t,e){let i=t.fieldOfView*.5*Math.PI/180;let r=t.aspectRatio;let s=e*Math.tan(i);let n=s*r;return new Laya.Vector2(n*2,s*2)}t.get3DWinSize=g;function m(t,e){let i=t.fieldOfView*.5*Math.PI/180;let r=t.aspectRatio;let s=e*.01/2/r/Math.tan(i);return s}t.get3DDistance=m;function _(t,e){let i=Math.asin((t.y-e.y)/t.distance(e.x,e.y))*180/Math.PI;if(t.y>e.y){if(t.x>e.x){return 360-i}else{return 180+i}}else{if(t.x>e.x){return-i}else{return 180+i}}}t.WatchRotation=_;function M(t){let e=new Date(t);let i=e.getFullYear();let r=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1;let s=e.getDate()<10?"0"+e.getDate():e.getDate();let n=e.getHours()<10?"0"+e.getHours():e.getHours();let a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return i+"-"+r+"-"+s+" "+n+":"+a}t.getFullTimeString=M;function y(t){let e=new Date(t);let i=e.getFullYear();let r=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1;let s=e.getDate()<10?"0"+e.getDate():e.getDate();let n=e.getHours()<10?"0"+e.getHours():e.getHours();let a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();return n+":"+a}t.getHSTimeString=y;function w(t){let e=new Date(t);let i=new Date;i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());i.setHours(0,0,0,0);return i.getTime()}t.getZeroTimeNumber=w;function v(t){let e=Public.TimeMgr.Inst.currTimer;let i=(e-t)/1e3;let r=Math.floor(i/86400);i=i-r*86400;let s=Math.floor(i/3600);i=i-s*3600;let n=Math.floor(i/60);let a=Math.floor(i-n*60);if(s>0||n>0||a>0){r=r+1}return r}t.getPassDaysTime=v;function E(t,e){return new Laya.Point(t.x+e.x,t.y+e.y)}t.PointPlus=E;function T(t,e){return new Laya.Point(t.x*e,t.y*e)}t.PointScale=T;function A(t,e){return new Laya.Point(t.x-e.x,t.y-e.y)}t.PointCut=A;function x(e){let i="",r=["0","1","2","3","4","5","6","7","8","9"];for(let s=0;s<e;s++){let e=t.getRandomNum(0,r.length);i+=r[e]}return i}t.randomWord=x;function b(t){var e=new Array;var i,r;i=t.length;for(var s=0;s<i;s++){r=t.charCodeAt(s);if(r>=65536&&r<=1114111){e.push(r>>18&7|240);e.push(r>>12&63|128);e.push(r>>6&63|128);e.push(r&63|128)}else if(r>=2048&&r<=65535){e.push(r>>12&15|224);e.push(r>>6&63|128);e.push(r&63|128)}else if(r>=128&&r<=2047){e.push(r>>6&31|192);e.push(r&63|128)}else{e.push(r&255)}}return e}t.stringToByte=b;function S(t){if(typeof t==="string"){return t}var e="",i=t;for(var r=0;r<i.length;r++){var s=i[r].toString(2),n=s.match(/^1+?(?=0)/);if(n&&s.length==8){var a=n[0].length;var l=i[r].toString(2).slice(7-a);for(var o=1;o<a;o++){l+=i[o+r].toString(2).slice(2)}e+=String.fromCharCode(parseInt(l,2));r+=a-1}else{e+=String.fromCharCode(i[r])}}return e}t.byteToString=S;function I(t,...e){if(e.length==0){return t}for(var i=0;i<e.length;i++){var r=new RegExp("\\{"+i+"\\}","gm");t=t.replace(r,e[i])}return t}t.FormatString=I;function C(t){let e=0,i=t.length,r=-1;for(var s=0;s<i;s++){r=t.charCodeAt(s);if(r>=0&&r<=128){e+=1}else{e+=2}}return e}t.GetStrByteLen=C;function R(t,e,i){let r=-1;let s=t.length;let n=0;for(let a=0;a<t.length;a++){let l=t.charCodeAt(a);if(l>=0&&l<=128){n+=1}else{n+=2}if(e<=n&&r==-1){r=a}if(i<n){s=a;break}}if(r==-1){return t}return t.substring(r,s)}t.SubStrWithByteLen=R;t.getLangStr=function(t,...e){return""}})(Global||(Global={}));var Global;(function(t){var e=0;var i=0;var r=0;function s(t,i){e=t;i=i;r=e.toString().length-2}t.InitEnKey=s;function n(){return e}t.EnKeyValue=n;function a(){return r}t.EnKeyLength=a;function l(t){let e=Math.floor(t*1e3);let r=e^i;return r}t.EnFloatValue=l;function o(t){let e=t^i;if(e==i){return 0}else{return e/1e3}}t.DesFloatValue=o;function h(t){return t^e}t.EnValue=h;function u(t){let i=t^e;if(i==e){return 0}else{return i}}t.DesValue=u;function c(t,e){return t^e}t.CheckValue=c})(Global||(Global={}));var Public;(function(t){var e;(function(t){var e=[];function i(t,e=1e3){if(this.rotationArr==null){this.rotationArr=[]}var i=Global.getUnique(t);if(this.rotationArr[i]){return}if(this.rotationArr[i]==null||!this.rotationArr[i]){this.rotationArr[i]=true}var r=()=>{if(this.rotationArr[i]&&t!=null){t.rotation=0;Laya.Tween.to(t,{rotation:360},e,Laya.Ease.linearIn,Laya.Handler.create(null,r))}};t.rotation=0;Laya.Tween.to(t,{rotation:360},e,Laya.Ease.linearIn,Laya.Handler.create(null,r))}t.rotationEffect=i;function r(t){if(this.rotationArr==null){this.rotationArr=[]}var e=Global.getUnique(t);this.rotationArr[e]=false;Laya.Tween.clearAll(t)}t.removeRotationEffect=r;function s(t,e=1e3){var i=new BitmapBlink(t,e)}t.blinkEffect=s;function n(t){var e=80;var i=t.x;Laya.Tween.to(t,{x:t.x-10},e);Laya.timer.once(e*2,null,function(){Laya.Tween.to(t,{x:t.x+20},e)});Laya.timer.once(e*3,null,function(){Laya.Tween.to(t,{x:t.x-20},e)});Laya.timer.once(e*4,null,function(){Laya.Tween.to(t,{x:t.x+20},e)});Laya.timer.once(e*5,null,function(){Laya.Tween.to(t,{x:i},e)})}t.shakeObj=n;function a(t,e=1){var i=40;var r=t.x;var s=t.y;if(e==1){Laya.Tween.to(t,{x:t.x-10},i);Laya.timer.once(i*2,null,function(){Laya.Tween.to(t,{x:t.x+20},i)});Laya.timer.once(i*3,null,function(){Laya.Tween.to(t,{x:t.x-20},i)});Laya.timer.once(i*4,null,function(){Laya.Tween.to(t,{x:t.x+20},i)});Laya.timer.once(i*5,null,function(){Laya.Tween.to(t,{x:r},i)})}else{Laya.Tween.to(t,{x:t.x-10,y:t.y},i);Laya.timer.once(i*2,null,function(){Laya.Tween.to(t,{x:t.x+20,y:t.y},i)});Laya.timer.once(i*3,null,function(){Laya.Tween.to(t,{x:t.x,y:t.y+15},i)});Laya.timer.once(i*4,null,function(){Laya.Tween.to(t,{x:t.x,y:t.y-20},i)});Laya.timer.once(i*5,null,function(){Laya.Tween.to(t,{x:t.x,y:t.y+10},i)});Laya.timer.once(i*6,null,function(){Laya.Tween.to(t,{x:r,y:s},i)})}}t.shakeScreen=a;var l=false;function o(t,e=1){if(this.isPlayEffectPlay){return}this.isPlayEffectPlay=true;var i=function(){this.isPlayEffectPlay=false};var r=function(){if(e==1){Laya.Tween.to(t,{scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,Laya.Ease.elasticOut,Laya.Handler.create(null,i))}else if(e==2){Laya.Tween.to(t,{scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,Laya.Ease.backOut,Laya.Handler.create(null,i))}else if(e==3){Laya.Tween.to(t,{scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100,Laya.Ease.linearIn,Laya.Handler.create(null,i))}};Laya.Tween.to(t,{scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,Laya.Ease.sineIn,Laya.Handler.create(null,r))}t.playEffect=o;function h(t){var e=function(){if(t!=null){var i=function(){t.scaleX=1;t.scaleY=1;Laya.Tween.to(t,{alpha:1},1e3,Laya.Ease.linearIn,Laya.Handler.create(null,e))};t.alpha=1;Laya.Tween.to(t,{scaleX:1.5,scaleY:1.5,alpha:0},1e3,Laya.Ease.linearIn,Laya.Handler.create(null,i))}};e()}t.playScaleEffect=h;function u(t,e,i=50){var r=function(){if(t!=null){var s=function(){Laya.Tween.to(t,{y:t.y-i},e,Laya.Ease.linearIn,Laya.Handler.create(null,r))};Laya.Tween.to(t,{y:t.y+i},e,Laya.Ease.linearIn,Laya.Handler.create(null,s))}};r()}t.flyObj=u;function c(t,e,i=20){var r=function(){if(t!=null){var s=function(){Laya.Tween.to(t,{rotation:-i},e,Laya.Ease.linearIn,Laya.Handler.create(null,r))};Laya.Tween.to(t,{rotation:i},e,Laya.Ease.linearIn,Laya.Handler.create(null,s))}};r()}t.rockObj=c;function d(t,e="",i=200){var r=e.split("");var s=r.length;for(var n=0;n<s;n++){Laya.timer.once(i*n,n,function(){t.appendText(r[Number(this)])})}}t.typerEffect=d;function f(t,e,i,r=0,s=0,n=null,a=null,l=true){let o=s<=0;let h=[];for(var u in e){if(typeof t[u]=="number"){var c=t[u];var d=e[u];h.push([u,c,d])}}let f=Laya.Pool.getItemByClass("tween",Laya.Tween);let p=Laya.Handler.create(f,r=>{if(t.hasOwnProperty("displayedInStage")&&!t.displayedInStage){logE("请留意yoyoTween未及时释放，可能是tween目标被隐藏而并未消毁!");f.clear();Laya.Pool.recover("tween",f);return}if(!o){s--;if(s<=0){Laya.Pool.recover("tween",f);if(a){a.run()}return}}for(var u of h){e[u[0]]=r?u[1]:u[2]}p.args=[!r];f.to(t,e,i,n,p,0,l)},[true],false);return f.to(t,e,i,n,p,r,l)}t.yoyoTween=f;function p(t){Laya.Tween.clearTween(t)}t.clearYoyoTween=p;function g(e,i=600,r=400){let s=i/6;Laya.Tween.to(e,{rotation:5},s);Laya.Tween.to(e,{rotation:-15},s,null,null,s);Laya.Tween.to(e,{rotation:10},s,null,null,s*2);Laya.Tween.to(e,{rotation:-5},s,null,null,s*3);Laya.Tween.to(e,{rotation:3},s,null,null,s*4);Laya.Tween.to(e,{rotation:0},s,null,null,s*5);Laya.Tween.to(e,{},r,null,Laya.Handler.create(e,()=>{t.shakeAndStop(e,i)}),i)}t.shakeAndStop=g;function m(t){Laya.Tween.clearTween(t)}t.clearShakeAndStop=m})(e=t.EffectUtils||(t.EffectUtils={}))})(Public||(Public={}));var common;(function(t){class e{static removeFromParent(t){if(t&&t.parent){t.parent.removeChild(t)}}}t.DisplayUtils=e})(common||(common={}));var Global;(function(t){let e;(function(t){t[t["Red"]=0]="Red";t[t["Gray"]=1]="Gray";t[t["Yellow"]=2]="Yellow";t[t["Green"]=3]="Green";t[t["Blue"]=4]="Blue";t[t["White"]=5]="White";t[t["Black"]=6]="Black";t[t["purple"]=7]="purple"})(e=t.ImageColor||(t.ImageColor={}));function i(t,i){let r=null;switch(i){case e.Red:r=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];break;case e.Gray:r=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];break;case e.Green:r=[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0];break;case e.Blue:r=[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0];break;case e.purple:r=[1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0];break;case e.Yellow:r=[1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0];break;default:break}var s=new Laya.ColorFilter(r);t.filters=[s]}t.ChangeImageColor=i})(Global||(Global={}));var Public;(function(t){class e{static setup(){this.AllSigns=new ds.StringMap}static saveSign(t,e){let i=this.AllSigns.get(t);if(i==null){i=new Array;this.AllSigns.put(t,i)}if(i.indexOf(e)==-1){i.push(e)}}static recoverItem(t,e){Laya.Pool.recover(t,e)}static getItem(t,e="common"){let i=Laya.Pool.getItem(t);if(i==null){this.saveSign(e,t)}return i}static clearItems(t){let e=this.AllSigns.get(t);this.AllSigns.remove(t);if(e!=null){e.forEach(t=>{let e=Laya.Pool.getPoolBySign(t);e.forEach(t=>{t.removeSelf();t=null});Laya.Pool.clearBySign(t)})}}}t.PoolMgr=e})(Public||(Public={}));var Public;(function(t){var e;(function(e){function i(){if(e.GameSocket==null){e.GameSocket=new t.BaseSocket}}e.Init=i;function r(t,i){e.GameSocket.connectServer(t,i)}e.connectGameServer=r;function s(t,i=true){e.GameSocket.closeServer(t,i)}e.closeGameServer=s;function n(t,i,r,s){e.GameSocket.sendMessage(t,i,r,s)}e.sendGameServerMsg=n;function a(){return e.GameSocket.isOpen()}e.statueGameServer=a;function l(t,e){if(e==null||t==null){return null}if(t.decode==null){return parseInt(e)}let i=t.decode(e,e.length);return i}e.getMsgDecodeCmd=l})(e=t.SocketManager||(t.SocketManager={}))})(Public||(Public={}));var Public;(function(t){class e{constructor(){}}t.MessageInfo=e})(Public||(Public={}));var Public;(function(t){var e;(function(t){class e{constructor(){this.responseType="text";this.header=null;this.http=new Laya.HttpRequest}setResponseType(t){this.responseType=t;return this}setHeader(t){this.header=t;return this}setHeaderProperty(t,e){if(this.header==null){this.header=new Array}this.header.push(t+":"+e);return this}getRequest(t,e,i){return this.request(t,e,i,"get")}postRequest(t,e,i,r){return this.request(t,e,i,"post",r)}request(t,e,i,r,s){this.caller=e;this.callBack=i;this.http.once(Laya.Event.COMPLETE,this,this.onHttpRequestComplete);this.http.once(Laya.Event.ERROR,this,this.onHttpRequestError);if(this.header==null){this.http.send(t,s,r,this.responseType)}else{this.http.send(t,s,r,this.responseType,this.header)}return this}onHttpRequestComplete(t){if(this.caller!=null&&this.callBack!=null){this.callBack.call(this.caller,0,this.http.data)}}onHttpRequestError(t){if(this.caller!=null&&this.callBack!=null){this.callBack.call(this.caller,1,t)}}}t.Http=e})(e=t.HttpManager||(t.HttpManager={}))})(Public||(Public={}));var Public;(function(t){class e{constructor(){this.m_event=new Laya.EventDispatcher}static Inst(){var t;if(e.Instance==null){e.Instance=new e}return e.Instance}get theRouter(){return this.m_event}static containsEvent(t){return e.Inst().theRouter.hasListener(t.toString())}static cleanup(){e.Inst().theRouter.offAll()}static on(t,i,r){e.Inst().theRouter.on(t.toString(),i,r)}static off(t,i,r){e.Inst().theRouter.off(t.toString(),i,r)}static trigger(t,...i){e.Inst().theRouter.event(t.toString(),i)}}e.Instance=null;t.EventMgr=e})(Public||(Public={}));var Public;(function(t){class e{}e.SOCKECT_MESSAGE="sockect_Message";e.SOCKECT_CLOSE="sockect_Close";e.BUTTON_CLICK_SOUND="Button_click_sound";e.TRY_ERROR="TryError";t.CommonEvent=e})(Public||(Public={}));var Public;(function(t){let e;(function(t){t[t["First"]=50]="First";t[t["CS_CLIENT_REPORT"]=51]="CS_CLIENT_REPORT";t[t["CS_CLIENT_ERROR"]=52]="CS_CLIENT_ERROR";t[t["P_SO_Verify_Ask"]=53]="P_SO_Verify_Ask";t[t["End"]=54]="End"})(e=t.BaseNetNotify||(t.BaseNetNotify={}));let i;(function(t){t[t["ERROR"]=0]="ERROR";t[t["CLIENT"]=1]="CLIENT";t[t["LOGIN_SERVER"]=2]="LOGIN_SERVER";t[t["GATE_SERVER"]=3]="GATE_SERVER";t[t["GAME_SERVER"]=4]="GAME_SERVER";t[t["MATCH_SERVER"]=5]="MATCH_SERVER";t[t["FIGHT_SERVER"]=6]="FIGHT_SERVER";t[t["LOG_SERVER"]=7]="LOG_SERVER"})(i=t.MessageTarget||(t.MessageTarget={}));let r;(function(t){t[t["Open"]=0]="Open";t[t["Error"]=1]="Error";t[t["Maintain"]=2]="Maintain";t[t["Kick"]=3]="Kick";t[t["Close"]=4]="Close"})(r=t.ServerStatue||(t.ServerStatue={}))})(Public||(Public={}));var Public;(function(t){class e{constructor(){}static get Inst(){if(e.Instance==null){e.Instance=new e}return e.Instance}setup(t){this._callBack=t}get currTimer(){if(this._callBack){return this._callBack.call()}return Laya.timer.currTimer}}e.Instance=null;t.TimeMgr=e})(Public||(Public={}));var Public;(function(t){class e{constructor(){}static GetInst(){if(e.Inst==null){e.Inst=new e}return e.Inst}getLocalData(e){let i=t.NativeApi.getLocalData(e);return i}setLocalData(e,i){t.NativeApi.setLocalData(e,i)}}t.LStorageMgr=e})(Public||(Public={}));var Public;(function(t){class e{constructor(){this._count=0;this.destroyTm=0}addCount(t){this._count++}removeCount(t){this._count--}get count(){return this._count}destroy(){}}t.CountShareData=e})(Public||(Public={}));var Public;(function(t){class e{constructor(t=0,e=10){this._destroyDelay=0;this._cherkFramesCount=10;this._count=0;this.count=0;this._destroyDelay=t;this._cherkFramesCount=e;this._shareDataDict={};this._waitingDestroyShareDataDict={}}startCount(){Laya.timer.frameLoop(1,this,this.checkUninstall)}stopCount(){Laya.timer.clear(this,this.checkUninstall)}hasShareData(t){return this._shareDataDict[t]!=null}getShareData(t){var e=this._shareDataDict[t];return e}addShareData(t,e){var i=this.getShareData(t);if(i){i.destroy();i=null}this._shareDataDict[t]=e;this._count++}removeShareData(t){var e=this.getShareData(t);if(e!=null){e.destroy();e=null;this._count--}delete this._shareDataDict[t];delete this._waitingDestroyShareDataDict[t]}installShareData(t,e){var i=this._shareDataDict[t];i.addCount(e);if(this._waitingDestroyShareDataDict[t]==null){delete this._waitingDestroyShareDataDict[t]}return i}uninstallShareData(t,e){var i=this._shareDataDict[t];if(i){i.removeCount(e);if(i.count<=0){if(this._waitingDestroyShareDataDict[t]==null){this._waitingDestroyShareDataDict[t]=Laya.timer.currTimer}}}}checkUninstall(){if(++this.count<this._cherkFramesCount){return}this.count%=this._cherkFramesCount;var t=Laya.timer.currTimer;var e=0;var i;for(var r in this._waitingDestroyShareDataDict){e++;var s=t-this._waitingDestroyShareDataDict[r]-this._destroyDelay;if(s>0){delete this._waitingDestroyShareDataDict[r];i=this.getShareData(r);if(i){if(i.count<=0&&s-i.destroyTm>0){this.removeShareData(r)}}}}}uninstallAll(){for(var t in this._shareDataDict){this.removeShareData(t)}this._shareDataDict={};this._waitingDestroyShareDataDict={}}uninstallAllWait(){var t;for(t in this._waitingDestroyShareDataDict){this.removeShareData(t)}}get cacheCnt(){return this._count}getAllCacheKeyList(){var t=new Array;var e;for(e in this._shareDataDict){t.push(e)}return t}getAllCacheDataList(){var t=new Array;var e;for(var i in this._shareDataDict){e=this._shareDataDict[i];t.push(e)}return t}}t.CountShare=e})(Public||(Public={}));var GlobalData;(function(t){t.isRelease=true;t.isMiniGame=false})(GlobalData||(GlobalData={}));var GameConfig;(function(t){t.isOnLine=navigator.onLine;t.TextColors={white:"#FFFFFF",milkWhite:"#fbf1af",grayWhite:"#ceb6a2",yellow:"#ffff00",lightYellow:"#ffd375",orangeYellow:"#ff9900",red:"#f11300",green:"#00e500",blue:"#1a94d7",grayBlue:"#2f5177",purple:"#e938f2",pink:"#FF3030",black:"#2e2d2d",golden:"#FFD700"};t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36};function e(){var t=window.navigator.userAgent.toLowerCase();var e=""+t.match(/MicroMessenger/i);if(e=="null"){return false}else if(e=="micromessenger"){return true}}t.isWeiXin=e;function i(){return document.body.clientHeight/document.body.clientWidth>1.32}t.isBigScreen=i;function r(){if(GlobalData.isMiniGame){return"WechatMiniGame"}else{return"H5"}}t.getTerminal=r;function s(){if(Laya.Browser.onAndroid){return"Android"}else if(Laya.Browser.onIOS){return"IOS"}else if(Laya.Browser.onWP){return"WP"}else if(Laya.Browser.onPC){return"PC"}else{return"Other"}}t.getDevice=s;function n(){var t=window.navigator.userAgent.toLowerCase();var e=""+t.match(/MicroMessenger/i);if(""+t.match(/windows nt/i)=="windows nt"){return"windows"}else if(""+t.match(/iphone/i)=="iphone"){return"ios"}else if(""+t.match(/android/i)=="android"){return"android"}else if(""+t.match(/ipad/i)=="ipad"){return"ipad"}else if(""+t.match(/linux/i)=="linux"){return"linux"}else if(""+t.match(/mac/i)=="mac"){return"mac"}else if(""+t.match(/ucbrower/i)=="ucbrower"){return"ucbrower"}else{logI("未知系统类型")}}t.systemType=n;function a(){var t=window.navigator.userAgent.toLowerCase();if(""+t.match(/micromessenger/i)=="micromessenger"){return"micromessenger"}else if(""+t.match(/qzone/i)=="qzone"){return"qzone"}else if(""+t.match(/weibo/i)=="weibo"){return"weibo"}else if(""+t.match(/qq/i)=="qq"){return"qq"}else if(""+t.match(/renren/i)=="renren"){return"renren"}else if(""+t.match(/txmicroblog/i)=="txmicroblog"){return"txmicroblog"}else if(""+t.match(/douban/i)=="douban"){return"douban"}else{return"other"}}t.platformType=a;t.WinScaleX=1;t.WinScaleY=1;t.WinScaleFit=1})(GameConfig||(GameConfig={}));var Public;(function(t){class e{}t.ServerError=e;class i extends Laya.EventDispatcher{constructor(){super();this.isBigPackage=false}isOpen(){return this.socket!=null&&this.socket.connected}connectServer(t,e){if(this.socket!=null){return}this.msgIndex=1;this.lastMsgIndex=1;this.socket=new Laya.Socket;this.socket.endian=Laya.Socket.BIG_ENDIAN;if(t.indexOf("ws")!=0){this.socket.connectByUrl((e?"wss://":"ws://")+t)}else{this.socket.connectByUrl(t)}this.socket.on(Laya.Event.OPEN,this,this.onSocketOpen);this.socket.on(Laya.Event.CLOSE,this,this.onSocketClose);this.socket.on(Laya.Event.MESSAGE,this,this.onReceiveMessage);this.socket.on(Laya.Event.ERROR,this,this.onConnectError);logI("与服务器开始建立链接:"+t)}closeServer(e,i=true,r=null){if(this.socket==null){return}Laya.timer.clearAll(this);this.socket.offAll();try{this.socket.cleanSocket();this.socket.close()}catch(t){logI(t)}this.socket=null;if(i){logD("与服务器断开链接！！！"+i)}else{this.event(t.CommonEvent.SOCKECT_CLOSE,[e,r])}}onSocketOpen(){this.event(Laya.Event.OPEN)}onSocketClose(e){this.closeServer(t.ServerStatue.Close,false)}onConnectError(e){logE("ConnectError:",e);this.closeServer(t.ServerStatue.Error,false)}onReceiveMessage(t){let e=new Laya.Byte(t);e.endian=Laya.Byte.BIG_ENDIAN;this.splitInputMsg(e)}splitInputMsg(t){while(t.length>0){let e=t.pos;let i=0;if(this.isBigPackage){i=t.getUint32()}else{i=t.getUint16()}if(i<5||t.length<i){t.pos=e;break}let r=t.getUint8();let s=t.getUint8();let n=t.getUint8();let a=t.getUint8Array(t.pos,i-5);this.dispathCmdMsg(r,s,n,a);if(t.pos>=t.length){t.clear()}}}dispathCmdMsg(e,i,r,s){var n=new t.MessageInfo;n.main=e;n.sub=i;n.data=s;n.eventFlag=r;this.event(t.CommonEvent.SOCKECT_MESSAGE,n)}sendMessage(t,e,i,r){if(this.socket==null){return}if(this.isBigPackage){this.socket.output.writeUint32(t+7)}else{this.socket.output.writeUint16(t+5)}this.socket.output.writeUint8(e);this.socket.output.writeUint8(i);this.socket.output.writeUint8(0);this.socket.output.writeArrayBuffer(r);++this.msgIndex;{this.flushQueneMsg()}}flushQueneMsg(){if(this.isOpen()&&this.socket.output.length>0){this.lastMsgIndex=this.msgIndex;try{this.socket.flush()}catch(t){logI(t)}}}}t.BaseSocket=i})(Public||(Public={}));class BitmapBlink extends Laya.EventDispatcher{constructor(t,e,i=true){super();this._target=t;this._time=e;if(i){this.start()}}start(){this._currTime=Laya.timer.currTimer;this._target.on(Laya.Event.FRAME,this,this.runDown)}runDown(t){this._target.alpha-=.045;if(this.checkOver()){return}if(this._target.alpha<=.6){this._target.off(Laya.Event.FRAME,this,this.runDown);this._target.on(Laya.Event.FRAME,this,this.runUp)}}runUp(t){this._target.alpha+=.045;if(this.checkOver()){return}if(this._target.alpha>=1){this._target.off(Laya.Event.FRAME,this,this.runUp);this._target.on(Laya.Event.FRAME,this,this.runDown)}}checkOver(){var t=Laya.timer.currFrame;if(t-this._currTime>=this._time){this.destroy();return true}return false}destroy(){this._target.alpha=1;this._target.off(Laya.Event.FRAME,this,this.runDown);this._target.off(Laya.Event.FRAME,this,this.runUp);this.event(Laya.Event.COMPLETE,this._target);this._target=null}}class WaitPanel extends Laya.Sprite{constructor(t=1){super();this.bg=new Laya.Sprite;this.createView()}createView(){this.width=Laya.stage.width;this.height=Laya.stage.height;this.bg.graphics.drawRect(0,0,this.width,this.height,"#000000",.2);this.bg.width=this.width;this.bg.height=this.height;this.bg.alpha=.2;this.bg.visible=false;this.addChild(this.bg);this.showText=new ui.Label;this.showText.fontSize=24;this.showText.color="#FFFFFF";this.showText.bold=true;this.showText.stroke=1;this.showText.strokeColor="#000000";this.addChild(this.showText);this.showText.x=this.width/2;this.showText.y=this.height/2+45;this.showText.anchorX=.5;this.showText.anchorY=.5;this.on(Laya.Event.REMOVED,this,this.onRemove);this.on(Laya.Event.MOUSE_UP,this,this.mouseUpCalled)}onRemove(){}mouseUpCalled(){}activeStatue(t,e=true,i=""){this.visible=t;Laya.timer.clearAll(this);if(t){this.showText.text=i;if(e){Laya.timer.once(1e3,this,()=>{this.bg.visible=true})}else{this.bg.visible=true}}else{this.bg.visible=false}}}